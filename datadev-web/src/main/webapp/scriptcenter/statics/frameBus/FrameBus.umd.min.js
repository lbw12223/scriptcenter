(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["bdp-easy-studio-framework-FrameBus.umd.min"]=t():e["bdp-easy-studio-framework-FrameBus.umd.min"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="fb15")}({"066f":function(e,t,r){"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)}))}e.exports=n},"21ae":function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeReplier=void 0;var i=r("9cf0"),o=n(r("066f"));function s(e,t){var r=o.default();function n(o,s){e(o,s),i.Framebus.target({origin:t}).off(r,n)}return i.Framebus.target({origin:t}).on(r,n),r}t.subscribeReplier=s},2424:function(e,t,r){"use strict";function n(e){return e.top===e&&(null!=e.opener&&(e.opener!==e&&!0!==e.opener.closed))}Object.defineProperty(t,"__esModule",{value:!0}),t.hasOpener=void 0,t.hasOpener=n},"27a5":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=void 0;var n=r("28e1");function i(e,t,r,i,o){if(n.subscribers[e]&&n.subscribers[e][t]){var s=[];r&&s.push(r),i&&s.push(i);for(var c=0;c<n.subscribers[e][t].length;c++)n.subscribers[e][t][c].apply(o,s)}}t.dispatch=i},"28e1":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribers=t.childWindows=t.prefix=void 0,t.prefix="/*framebus*/",t.childWindows=[],t.subscribers={}},"2e81":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackPayload=void 0;var n=r("28e1"),i=r("d36c");function o(e){var t;if(e.data.slice(0,n.prefix.length)!==n.prefix)return!1;try{t=JSON.parse(e.data.slice(n.prefix.length))}catch(c){return!1}if(t.reply){var r=e.origin,o=e.source,s=t.reply;t.reply=function(e){if(o){var t=i.packagePayload(s,r,e);t&&o.postMessage(t,r)}}}return t}t.unpackPayload=o},"3f56":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionArgsInvalid=void 0;var n=r("950f");function i(e,t,r){return!!n.isntString(e)||("function"!==typeof t||n.isntString(r))}t.subscriptionArgsInvalid=i},"674f":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onmessage=void 0;var n=r("950f"),i=r("2e81"),o=r("27a5"),s=r("7a9a");function c(e){if(!n.isntString(e.data)){var t=i.unpackPayload(e);if(t){var r=t.eventData,c=t.reply;o.dispatch("*",t.event,r,c,e),o.dispatch(e.origin,t.event,r,c,e),s.broadcastToChildWindows(e.data,t.origin,e.source)}}}t.onmessage=c},"72f9":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detach=t.attach=void 0;var n=r("674f"),i=!1;function o(){i||"undefined"===typeof window||(i=!0,window.addEventListener("message",n.onmessage,!1))}function s(){i=!1,window.removeEventListener("message",n.onmessage,!1)}t.attach=o,t.detach=s},"7a9a":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.broadcastToChildWindows=void 0;var n=r("f3f8"),i=r("28e1");function o(e,t,r){for(var o=i.childWindows.length-1;o>=0;o--){var s=i.childWindows[o];s.closed?i.childWindows.splice(o,1):r!==s&&n.broadcast(s.top,e,t)}}t.broadcastToChildWindows=o},8875:function(e,t,r){var n,i,o;(function(r,s){i=[],n=s,o="function"===typeof n?n.apply(t,i):n,void 0===o||(e.exports=o)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(l){var r,n,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,c=o.exec(l.stack)||s.exec(l.stack),u=c&&c[1]||!1,a=c&&c[2]||!1,f=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");u===f&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=r.replace(n,"$1").trim());for(var p=0;p<d.length;p++){if("interactive"===d[p].readyState)return d[p];if(d[p].src===u)return d[p];if(u===f&&d[p].innerHTML&&d[p].innerHTML.trim()===i)return d[p]}return null}}return e}))},"950f":function(e,t,r){"use strict";function n(e){return"string"!==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntString=void 0,t.isntString=n},"9cf0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Framebus=void 0;var n=r("950f"),i=r("3f56"),o=r("f3f8"),s=r("d36c"),c=r("28e1"),u=function(){function e(e){void 0===e&&(e={}),this.origin=e.origin||"*",this.channel=e.channel||"",this.verifyDomain=e.verifyDomain,this.isDestroyed=!1,this.listeners=[]}return e.target=function(t){return new e(t)},e.prototype.include=function(e){return null!=e&&(null!=e.Window&&(e.constructor===e.Window&&(c.childWindows.push(e),!0)))},e.prototype.target=function(t){return e.target(t)},e.prototype.emit=function(e,t,r){if(this.isDestroyed)return!1;var i=this.origin;if(e=this.namespaceEvent(e),n.isntString(e))return!1;if(n.isntString(i))return!1;"function"===typeof t&&(r=t,t=void 0);var c=s.packagePayload(e,i,t,r);return!!c&&(o.broadcast(window.top||window.self,c,i),!0)},e.prototype.on=function(e,t){if(this.isDestroyed)return!1;var r=this,n=this.origin,o=t;return e=this.namespaceEvent(e),!i.subscriptionArgsInvalid(e,o,n)&&(this.verifyDomain&&(o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.checkOrigin(this&&this.origin)&&t.apply(void 0,e)}),this.listeners.push({eventName:e,handler:o,originalHandler:t}),c.subscribers[n]=c.subscribers[n]||{},c.subscribers[n][e]=c.subscribers[n][e]||[],c.subscribers[n][e].push(o),!0)},e.prototype.off=function(e,t){var r=t;if(this.isDestroyed)return!1;if(this.verifyDomain)for(var n=0;n<this.listeners.length;n++){var o=this.listeners[n];o.originalHandler===t&&(r=o.handler)}e=this.namespaceEvent(e);var s=this.origin;if(i.subscriptionArgsInvalid(e,r,s))return!1;var u=c.subscribers[s]&&c.subscribers[s][e];if(!u)return!1;for(n=0;n<u.length;n++)if(u[n]===r)return u.splice(n,1),!0;return!1},e.prototype.teardown=function(){if(!this.isDestroyed){this.isDestroyed=!0;for(var e=0;e<this.listeners.length;e++){var t=this.listeners[e];this.off(t.eventName,t.handler)}this.listeners.length=0}},e.prototype.checkOrigin=function(e){var t,r=document.createElement("a");r.href=location.href,t="https:"===r.protocol?r.host.replace(/:443$/,""):"http:"===r.protocol?r.host.replace(/:80$/,""):r.host;var n=r.protocol+"//"+t;return n===e||(!this.verifyDomain||this.verifyDomain(e))},e.prototype.namespaceEvent=function(e){return this.channel?this.channel+":"+e:e},e}();t.Framebus=u},d36c:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.packagePayload=void 0;var n=r("21ae"),i=r("28e1");function o(e,t,r,o){var s,c={event:e,origin:t};"function"===typeof o&&(c.reply=n.subscribeReplier(o,t)),c.eventData=r;try{s=i.prefix+JSON.stringify(c)}catch(u){throw new Error("Could not stringify event: "+u.message)}return s}t.packagePayload=o},e1ac:function(e,t,r){"use strict";var n=r("72f9"),i=r("9cf0");n.attach(),e.exports=i.Framebus},f3f8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.broadcast=void 0;var n=r("2424");function i(e,t,r){var o,s=0;try{e.postMessage(t,r),n.hasOpener(e)&&i(e.opener.top,t,r);while(o=e.frames[s])i(o,t,r),s++}catch(c){}}t.broadcast=i},fb15:function(e,t,r){"use strict";if(r.r(t),"undefined"!==typeof window){var n=window.document.currentScript,i=r("8875");n=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(r.p=o[1])}var s=r("e1ac"),c=r.n(s);"undefined"!==typeof window&&(window.FrameBus=c.a);var u=c.a;t["default"]=u}})}));
//# sourceMappingURL=FrameBus.umd.min.js.map