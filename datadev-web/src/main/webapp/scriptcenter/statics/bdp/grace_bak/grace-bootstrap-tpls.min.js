/*
 * grace-bootstrap
 * http://192.168.152.38:8088/grace_build/

 * Version: 0.1.6 - 2016-04-13
 * License: MIT
 */
angular.module("grace.bootstrap",["grace.bootstrap.tpls","grace.bootstrap.alert","grace.bootstrap.bindHtml","grace.bootstrap.bindTemplate","grace.bootstrap.bootConfigs","grace.bootstrap.buttons","grace.bootstrap.dynamicName","grace.bootstrap.checkbox","grace.bootstrap.chosenAssociate","grace.bootstrap.dataFormatter","grace.bootstrap.dataAdapterModelManager","grace.bootstrap.dataAdapter","grace.bootstrap.date","grace.bootstrap.dateparser","grace.bootstrap.position","grace.bootstrap.datepicker","grace.bootstrap.dimension","grace.bootstrap.dimensionBaseSelect","grace.bootstrap.dimensionSelectWithCheckBox","grace.bootstrap.dimensionSelectWithCustom","grace.bootstrap.dimensionSelectWithRadioBox","grace.bootstrap.dropdown","grace.bootstrap.fieldManager","grace.bootstrap.pagination","grace.bootstrap.tooltip","grace.bootstrap.grid","grace.bootstrap.input","grace.bootstrap.transition","grace.bootstrap.modal","grace.bootstrap.nav","grace.bootstrap.popWindow","grace.bootstrap.radio","grace.bootstrap.search","grace.bootstrap.select","grace.bootstrap.selectByGroup","grace.bootstrap.step","grace.bootstrap.string","grace.bootstrap.summary","grace.bootstrap.summaryList","grace.bootstrap.table","grace.bootstrap.tabs","grace.bootstrap.textarea","grace.bootstrap.utils"]),angular.module("grace.bootstrap.tpls",["template/alert/alert.html","template/checkbox/checkbox.html","template/chosenAssociate/chosenAssociate.html","template/datepicker/datepicker.html","template/datepicker/daterangepicker.html","template/datepicker/day.html","template/datepicker/dayrange.html","template/datepicker/hour.html","template/datepicker/minuteOrSecond.html","template/datepicker/month.html","template/datepicker/monthrange.html","template/datepicker/popup.html","template/datepicker/year.html","template/dimension/dimension.html","template/dimensionBaseSelect/dimensionBaseSelect.html","template/dimensionBaseSelect/dimensionSelectWithCheckBox.html","template/dimensionBaseSelect/dimensionSelectWithCustom.html","template/dimensionBaseSelect/dimensionSelectWithRadioBox.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/grid/grid.html","template/grid/gridBody.html","template/grid/gridBodySimple.html","template/grid/gridCell.html","template/grid/gridFooter.html","template/grid/gridFooterCell.html","template/grid/gridHeader.html","template/grid/gridHeaderCell.html","template/grid/gridPagination.html","template/grid/gridScreener.html","template/grid/gridSearchAll.html","template/input/input.html","template/modal/backdrop.html","template/modal/window.html","template/nav/nav.html","template/popWindow/alert.html","template/popWindow/confirm.html","template/radio/radio.html","template/search/search.html","template/select/select.html","template/selectByGroup/selectByGroup.html","template/step/step.html","template/summary/summary-item.html","template/summary/summary.html","template/summaryList/summaryList.html","template/table/table.html","template/tabs/tab.html","template/tabs/tabset.html","template/textarea/textarea.html"]),angular.module("grace.bootstrap.alert",[]).controller("graceAlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("graceAlert",function(){return{restrict:"EA",controller:"graceAlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("grace.bootstrap.bindHtml",[]).directive("graceBindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.graceBindHtmlUnsafe),a.$watch(c.graceBindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("grace.bootstrap.bindTemplate",[]).directive("graceBindTemplate",["$compile",function(a){return function(b,c,d){c.addClass("ng-binding").data("$binding",d.graceBindTemplate),b.$watch(d.graceBindTemplate,function(d){c.html(d||""),a(c.contents())(b)})}}]),angular.module("grace.bootstrap.bootConfigs",[]).factory("bootConfig",[function(){return["$httpProvider",function(a){a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var b=function(a){var c,d,e,f,g,h,i,j="";for(c in a)if(d=a[c],d instanceof Array)for(i=0;i<d.length;++i)g=d[i],e=c+"["+i+"]",h={},h[e]=g,j+=b(h)+"&";else if(d instanceof Object)for(f in d)g=d[f],e=c+"["+f+"]",h={},h[e]=g,j+=b(h)+"&";else void 0!==d&&null!==d&&(j+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");return j.length?j.substr(0,j.length-1):j};a.defaults.transformRequest=[function(a){return angular.isObject(a)&&"[object File]"!==String(a)?b(a):a}]}]}]),angular.module("grace.bootstrap.buttons",[]).constant("graceButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("graceButtonsController",["graceButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("graceBtnRadio",function(){return{require:["graceBtnRadio","ngModel"],controller:"graceButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.graceBtnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.graceBtnRadio)),f.$render()})})}}}).directive("graceBtnCheckbox",function(){return{require:["graceBtnCheckbox","ngModel"],controller:"graceButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("grace.bootstrap.dynamicName",[]).directive("dynamicName",["$compile","$parse",function(a,b){return{restrict:"A",terminal:!0,priority:1e5,link:function(c,d){var e=b(d.attr("dynamic-name"))(c);d.removeAttr("dynamic-name"),d.attr("name",e),a(d)(c)}}}]),angular.module("grace.bootstrap.checkbox",["grace.bootstrap.dynamicName"]).directive("graceCheckbox",["$timeout",function(a){return{restrict:"EA",replace:!0,transclude:!0,require:["^?graceFieldManager","?ngModel"],templateUrl:"template/checkbox/checkbox.html",scope:{config:"=",instanceHandler:"=?"},link:function(b,c,d,e){var f=e[1];b.modelCtrl={$setViewValue:angular.noop},f&&(b.modelCtrl=f,f.$parsers.unshift(function(a){return b.config.input.allowBlank!==!1||a&&a.length?a:void f.$setValidity("invalid",!1)}),f.$render=function(){angular.isArray(f.$viewValue)&&(b.selection=f.$viewValue)}),b.selection=[],b.isSelect=function(a){return-1!=b.selection.indexOf(a)},b.select=function(a){function c(a){var c,d=b.config;return c=d.callback&&d.callback.beforeSelect?!(d.callback.beforeSelect(a,angular.copy(b.selection))===!1):!0}!b.isSelect(a)&&c(a)&&b.selection.push(a)},b.cancelSelect=function(a){var c=b.selection;angular.forEach(c,function(b,d){a===b&&c.splice(d,1)})},b.selectOrCancel=function(a){var c=b.isSelect(a);c?b.cancelSelect(a):b.select(a)},b.selectByFilter=function(a){if(angular.isFunction(a))for(var c=b.config.list,d=0,e=c.length;e>d;d++)a(c[d],d,c)&&b.select(c[d].value)},b.cancelSelectByFilter=function(a){if(angular.isFunction(a))for(var c=b.config.list,d=0,e=c.length;e>d;d++)a(c[d],d,c)&&b.cancelSelect(c[d].value)},b.selectItem=function(a){b.config.input.disabled||b.selectOrCancel(a.value)},b.formatConfig=function(a){if(!angular.isObject(a))throw new Error("配置需要一个对象");!angular.isObject(a.input)&&(a.input={}),angular.isUndefined(a.input.disabled)&&(a.input.disabled=!1),angular.isUndefined(a.input.allowBlank)&&(a.input.allowBlank=!0),angular.isUndefined(a.callback)&&(a.callback={}),("undefined"==typeof b.config.input.horizontal||b.config.input.horizontal===!0)&&(b.config.input.horizontal="horizontal")},b.publishApi=function(){var c={update:function(){a(function(){b.init()},0)},disable:function(c){a(function(){b.config.input.disabled=c},0)},getValue:function(){return b.getValue()},selectByFilter:function(c){a(function(){b.selectByFilter(c)})},cancelSelectByFilter:function(c){a(function(){b.cancelSelectByFilter(c)})}};return b.instanceHandler=c},b.initList=function(){var a=b.config,d=a.list?a.list:a.list=[];c.find("div.items grace-item").each(function(a,b){var c=angular.element(b);d.push({text:c.attr("text"),value:c.attr("value")})}),c.find("div.items").remove()},b.init=function(){var a=b.config;b.formatConfig(a),angular.isDefined(a.value)&&angular.isArray(a.value)&&angular.forEach(a.value,function(a){b.select(a)}),a.input.isAllSelected&&(b.selection.splice(0),angular.forEach(a.list,function(a){b.select(a.value)}))},b.$watch("selection",function(a){b.modelCtrl.$setViewValue(angular.copy(a));try{b.config.callback.onChange(angular.copy(a))}catch(c){}},!0),b.publishApi(),b.initList(),b.init(),b.getValue=function(){return angular.copy(b.selection)},b.getName=function(){return b.config.input?b.config.input.name:""},e.length&&e[0]&&e[0].addField({type:"checkbox",element:c,scope:b})}}}]);var app=angular.module("grace.bootstrap.chosenAssociate",[]).constant("chosenAssociateConfig",{isPaging:!1,plural:!1,isDefault:!0}).controller("chosenAssociateController",["$scope","$http","chosenAssociateConfig","$sce","$timeout",function(a,b,c,d,e){a.bodyShow=!1,a.isPaging=void 0===a.isPaging?c.isPaging:a.isPaging,a.plural=void 0===a.plural?c.plural:a.plural,a.isDefault=void 0===a.isDefault?c.isDefault:a.isDefault,a.expression="",a.ngModel||(a.ngModel={selected:"",param:""},a.ngModel.selected=a.plural?[]:""),a.trust=function(a){return d.trustAsHtml(a)},a.$watch("data",function(){a.data&&(a.ngModel.selected=a.plural||a.isDefault?a.ngModel.selected?a.ngModel.selected:a.data[0]:"",a.currentPageData=angular.copy(a.data))},!0),a.changeConfigured=function(b){if(a.plural){var c=!1;if(angular.forEach(a.ngModel.selected,function(a,d){a.code==b.code&&(c=!0)}),c)return;a.ngModel.selected.push(b),a.expression=""}else a.currentPageData=angular.copy(a.data),a.ngModel.selected=b},a.selectFuzzy=function(){if(a.loadData)a.ngModel.param=a.expression,a.loadData&&a.loadData();else{for(var b,c=new RegExp(a.expression,"i"),d=[],e=0;b=a.data[e];e++)(c.test(b.name)||c.test(b.code))&&d.push({name:b.name,code:b.code});a.currentPageData=d}},a.choiceCloseClick=function(b,c){c.stopPropagation();for(var d,e=0;d=a.ngModel.selected[e];e++)if(d.code==b.code){a.ngModel.selected.splice(e,1);break}},a.getWidth=function(a){var b=$(a.target).parent(),c=0;angular.forEach(b.find("span"),function(a,b){c+=a.offsetWidth+5}),b.find(".plural-expression").width(b.width()-c-10)},a.setWidth=function(a){var b=$(a.target).parent();b.find(".plural-expression").width("20")},a.$watch("bodyShow",function(b){var c=a.config;c&&c.input&&c.input.disabled&&(a.bodyShow=!1)}),a.init=function(){var b;angular.isObject(a.config)||(a.config={input:{}}),b=a.config,!angular.isObject(b.input)&&(b.input={})},a.instanceHandler={disable:function(b){e(function(){a.config.input.disabled=b},0)}},a.init()}]).directive("graceChosenAssociate",["$window",function(a){return{restrict:"EA",require:["graceChosenAssociate","^ngModel","^?graceFieldManager"],controller:"chosenAssociateController",templateUrl:"template/chosenAssociate/chosenAssociate.html",replace:!0,scope:{data:"=",ngModel:"=",isPaging:"=?",plural:"=?",loadData:"=?",isDefault:"=?",config:"=?",instanceHandler:"=?"},link:function(b,c,d,e){var f=e[1];b.formFieldModel=[],b.allowBlank=b.$eval(d.allowBlank),b.$watch(function(){return b.plural?b.ngModel.selected&&b.ngModel.selected.length||0:b.ngModel.selected},function(a){b.plural?(b.formFieldModel=[].concat(b.ngModel.selected||[]),f.$invalid=!0):a?b.formFieldModel[0]=a.code:b.formFieldModel.splice(0),f.$invalid=b.formFieldModel.length?!1:!0});var g=angular.element(a);g.on("click",function(){b.$apply(function(){b.bodyShow=!1,b.focusing=!1,b.currentPageData=angular.copy(b.data)})});var h=c.find("#chose-single");h.on("click",function(a){b.ngModel.param=b.expression,b.$apply(function(){b.bodyShow=!b.bodyShow,b.focusing=!0}),c.find("input.associate-expression").focus(),a.stopPropagation()});var i=c.find("#chose-plural"),j=c.find(".plural-expression");i.on("click",function(a){j.focus(),b.focusing=!0,b.ngModel.param=angular.copy(b.expression),b.$apply(function(){b.bodyShow=!b.bodyShow}),a.stopPropagation()});var k=c.find(".associate-body input");k.on("click",function(a){a.stopPropagation()}),c.find("#chose-plural").delegate(".choice-close","click",function(a){a.stopPropagation()});var l=e[2];b.getValue=function(){var a,c=b.ngModel.selected;return a=b.plural?c.map(function(a,b,c){return a.code}):c.code||""},b.getName=function(){return b.config&&b.config.input?b.config.input.name:""},l&&l.addField({type:"chosenAssociate",element:c,scope:b})}}}]);angular.module("grace.bootstrap.dataFormatter",[]).factory("$gDataFormatterFactory",["$filter",function(a){function b(a,b){var c=b.indexOf("_");if(-1==c){var d=b;b=null}else{var d=b.substr(0,c);b=b.substr(c+1)}return f[d]?f[d](a,b):a}var c="yyyy-MM-dd",d="￥",e="%",f={number:function(b,c){b=parseFloat(b),c=c||"";var d=c.split("_"),e=a("number")(b,d[0]||0);return parseInt(d[1])&&b>0&&(e="+"+e),e},percent:function(a,b){var c;return b&&(c=b.split("_")[2])&&parseInt(c)&&(a=100*parseFloat(a)),this.number(a,b)+e},date:function(b,d){return d?a("date")(b,d):a("date")(b,c)},currency:function(b,c){return c?a("currency")(b,c):a("currency")(b,d)},limitTo:function(b,c){return c?a("limitTo")(b,c):b},typeCast:function(a,b){switch(b){case"i":return parseInt(a);case"f":return parseFloat(a);case"s":return a instanceof Object?JSON.stringify(a):a+"";case"o":return a&&JSON.parse(a)||a;case"b":return"true"==a?!0:"false"==a||"0"==a||"undefined"==a||"null"==a?!1:!!a;default:return a}}};return b}]).filter("dataFormatterFilter",["$gDataFormatterFactory",function(a){return a}]),angular.module("grace.bootstrap.dataAdapterModelManager",["grace.bootstrap.dataFormatter"]).factory("$gDataAdapterModelManagerFactory",function(){var a={},b={define:function(b,c){if(!a[b]){var d=b.split(".");b=d.pop();for(var e,f=a;e=d.shift();)!f[e]&&(f[e]={isPackage:!0}),f=f[e];f[b]=c}},constant:function(a,b){this.define(a,b)},get:function(b){for(var c,d=b.split("."),e=a;c=d.shift();)e=e[c];return e}};return b}),angular.module("grace.bootstrap.dataAdapter",["grace.bootstrap.dataFormatter","grace.bootstrap.dataAdapterModelManager"]).factory("$gDataAdapterFactory",["$gDataFormatterFactory","$gDataAdapterModelManagerFactory",function(a,b){function c(a,b){if(arguments.length<2)return a;for(var c in b)a[c]=b[c];return a}function d(){return j.root?f(k,j.root):k}function e(a){var c;if(j.dynamicModel[a]){if(c=f(d(),j.dynamicModel[a]),!c)throw new Error("没有找到动态的Model:"+a)}else if(c=b.get(a),!c)throw new Error("没有找到预定义Model:"+a);return c}function f(b,c){c+="";var e=c.split("::");c=e[0];var f=e[1];if(-1!=c.indexOf(j.propertyRegRoot)&&(b=d(),c=c.replace(j.propertyRegRoot+j.propertyJoiner,"")),-1!=c.indexOf(j.propertyJoiner)){for(var e=c.split("."),g=0;e[g]&&(b=b[e[g]]);)g++;return j.enableFormatter&&f?a(b,f):b}return j.enableFormatter&&f?a(b[c],f):b[c]}function g(a,b,c){var d,e;return b?(e=typeof b,b instanceof Array&&(e="array"),d=p[e](a,b,c)):a}var h={},i={root:"data",success:"success",message:"message",propertyRegRoot:"$",propertyJoiner:".",propertyModelPre:"@",propertyConstantPre:"&",parentKey:"#parentKey",autoWalkKey:"#autoKey",autoWalkKeyReg:/#autoKey\*?/,enableFormatter:!0,dynamicModel:{}},j=null,k=null,l=null,m=/{{(.*?)}}/g,n=/&([^\[]*)(\[(.*?)\])?/,o=/^(\$\.)?([^\s'"<>]+\.)+[^\s'"<>]+$/,p={modelString:function(a){var b={};if(/^_this_$/.test(a))b.type="THIS",b.model=a;else if(new RegExp("^"+j.propertyModelPre).test(a))b=p.modelType(e(a.replace(j.propertyModelPre,"")));else if(/^#parentKey$/.test(a.replace(/{{(.*?)}}/g,function(a,b){return b?b:a})))b.type="TEMPLATE_TRACK",b.model=a;else if(/^=/.test(a)){var c;b.type="CONSTANT",b.formater=(c=a.match(/::(\w+)$/))?c[1]:"",b.model=b.formater?a.replace(c[0],""):a,b.data=b.model.replace(/^=/,"")}else/^[a-z A-Z 0-9 _]+$/.test(a)?(b.type="INDEX",b.formater=(c=a.match(/::(\w+)$/))?c[1]:"",b.model=a):(b.type="TEMPLATE_FORMAT",b.model=a);return b},modelType:function(a){var b={};return"NUMBER"==(typeof a).toUpperCase()&&(a+=""),b.type=(typeof a).toUpperCase(),b.model=a,"STRING"===b.type&&(b=p.modelString(a)),b},sourceDataTemplate:function(a,c,d){var e={};if(n.test(a)){var g=a.match(n),h=b.get(g[1]);g[3]?(m.test(g[3])&&(g[3]=g[3].replace(m,function(a,b,e){return b==j.parentKey?d:f(c,b)})),e.tdata=f(h,g[3])):e.tdata=h}else m.test(a)?(a=a.replace(m,function(a,b,e){return b==j.parentKey?d:f(c,b)}),e.tdata=o.test(a)?f(c,a):a):e.tdata=f(c,a);return e.sourceTpl=a,e},array:function(a,b,c){var d,e=b.length,f=[];if(1===e){if(d=p.modelType(b[0]),"INDEX"==d.type&&a instanceof Array){for(var h=0,e=a.length;ic=a[h];h++)f.push(ic[d.model]);return f}if("OBJECT"==d.type&&a instanceof Array)for(var h=0,e=a.length;ic=a[h];h++)f.push(g(ic,d.model,h,0,d));else if("OBJECT"==d.type&&"object"==typeof a)for(var i in a)f.push(g(a[i],d.model,i,0,d));else if("TEMPLATE_TRACK"==d.type&&"object"==typeof a)for(var i in a)f.push(p.sourceDataTemplate(d.model,a[i],i).tdata);return f}for(var j,h=0;j=b[h];h++)f[h]=a[j];return f},object:function(b,c,d){var e={},h={};for(var i in c){if(/#autoKey\*?/.test(i)){var j=i.split("*");e=p.modelType(c[i]);for(var k in b){var l=b[k];h[j[1]?l[j[1]]:k]=g(l,e.model,k)}return h}if(/\|/.test(i)){var m,j=i.split("|");e=p.modelType(c[i]),m=p.sourceDataTemplate(j[1],b,d),h[j[0]]=g(m.tdata,e.model,m.sourceTpl)}if(/^[a-z A-Z 0-9 _$]+$/.test(i))switch(e=p.modelType(c[i]),e.type){case"THIS":h[i]=b;break;case"TEMPLATE_TRACK":h[i]=d;break;case"CONSTANT":h[i]=e.formater?a.apply(null,[e.data,e.formater]):e.data;break;case"INDEX":h[i]=f(b,e.model);break;case"TEMPLATE_FORMAT":h[i]=p.sourceDataTemplate(e.model,b,d).tdata;break;default:h[i]=b}}return h}};return h.read=function(a,b,e){j=c(c({},i),e),k=a,l=b;var f=d();if(f){var h=g(f,b,j.root);return h}},h}]),Date.prototype.toJSON=function(){return this.toString()},angular.module("grace.bootstrap.date",[]).constant("graceDateConfig",{pattern_ymd:"yyyy-MM-dd",pattern_ym:"yyyy-MM",pattern_md:"MM-dd",pattern_week:["SUN","MON","TUE","WED","THU","FRI","SAT"],pattern_ymd_cn:"yyyy年MM月dd日",pattern_ym_cn:"yyyy年MM月",pattern_md_cn:"MM月dd日",pattern_week_cn:["日","一","二","三","四","五","六"],datetime_mm:6e4,datetime_hh:36e5,datetime_dd:864e5}).factory("graceDateServ",["graceDateConfig",function(a){var b=function(b,c){if(b=b||new Date,!(b instanceof Date)){if(!(b.date&&b.date instanceof Date))throw new Error("第一个参数请传入时间类型！");b=b.date}var d=c||a.pattern_ymd;return d=d.replace(/yyyy|YYYY/,b.getFullYear()),d=d.replace(/yy|YY/,b.getFullYear()%100>9?(b.getFullYear()%100).toString():"0"+b.getFullYear()%100),d=d.replace(/MM/,b.getMonth()+1>9?(b.getMonth()+1).toString():"0"+(b.getMonth()+1)),d=d.replace(/M/g,b.getMonth()+1),d=d.replace(/w|W/g,a.pattern_week_cn[b.getDay()]),d=d.replace(/dd|DD/,b.getDate()>9?b.getDate().toString():"0"+b.getDate()),d=d.replace(/d|D/g,b.getDate()),d=d.replace(/hh|HH/,b.getHours()>9?b.getHours().toString():"0"+b.getHours()),d=d.replace(/h|H/g,b.getHours()),d=d.replace(/mm/,b.getMinutes()>9?b.getMinutes().toString():"0"+b.getMinutes()),d=d.replace(/m/g,b.getMinutes()),d=d.replace(/ss|SS/,b.getSeconds()>9?b.getSeconds().toString():"0"+b.getSeconds()),d=d.replace(/s|S/g,b.getSeconds())},c=function(c,d,e){c=c||new Date,e=e||a.pattern_ymd,d=d||1;var f=new Date(c.getTime());return f.setDate(f.getDate()-d),{date:f,format:b(f,e)}},d=function(b,d,e){e=e||a.pattern_ymd,b=b||new Date;for(var f=[],g=1;d>=g;g++)f[g-1]=c(b,g,e);return f},e=function(c,d,e){c=c||new Date,e=e||a.pattern_ymd;var f=new Date(c.getTime());return f.setDate(c.getDate()-(0==c.getDay()?7:c.getDay())+d),{date:f,format:b(f,e)}},f=function(b,c){b=b||new Date,c=c||a.pattern_ymd;for(var d=[],f=1;7>=f;f++)d[f-1]=e(b,f,c);return d},g=function(b,d,e){b=b||new Date,e=e||a.pattern_ymd,d=d||1;var g=c(b,7*d,e).date,h=f(g,e);return h},h=function(a,b,c){var d=i(a,0,c);return{date:d[b].date,format:d[b].format}},i=function(c,d,e){e=e||a.pattern_ymd,d=d||1,c=c||new Date;for(var f,g=new Date,h=[],i=new Date(c.getFullYear(),c.getMonth(),1),j=new Date(c.getFullYear(),c.getMonth()+1,1),k=(j-i)/a.datetime_dd,l=0;k>l;l++)f=new Date(c.getFullYear(),c.getMonth(),l+1),h.push({date:f,format:b(f,e)});return c.getFullYear()===g.getFullYear()&&c.getMonth()===g.getMonth()&&(h=h.slice(0,h.length-d)),h},j=function(b,c,d,e){e=e||a.pattern_ymd,c=c||1,d=d||1,b=b||new Date;var f=new Date(b.getFullYear(),b.getMonth()-c,1);return i(f,d,e)},k=function(c,d){c=c||new Date,d=d||a.pattern_ymd;for(var e,f=[],g=m(c),h=c.getFullYear(),i=new Date(h,3*(g-1),1),j=new Date(h,3*g,1),k=(j-i)/a.datetime_dd,l=0;k>l;l++)e=new Date(i.getTime()+l*a.datetime_dd),f.push({date:e,format:b(e,d)});return f},l=function(c,d){c=c||new Date,d=d||a.pattern_ymd;var e,f,g,h,i=c.getFullYear(),j=m(c),k=3,l=[];0>j-2?(g=new Date(i-1,9,1),h=new Date(i,0,1)):(g=new Date(i,(j-2)*k,1),h=new Date(i,(j-1)*k,1)),f=(h-g)/a.datetime_dd;for(var n=0;f>n;n++)e=new Date(g.getTime()+n*a.datetime_dd),l.push({date:e,format:b(e,d)});return l},m=function(a){return a=a||new Date,a.getMonth()/3+1},n=function(a){a=a||new Date;var b=a.getFullYear(),c=a.getMonth(),d=3,e={};return e=0>=c-d?{year:--b,index:4}:{year:b,index:Math.floor(c/d)}},o=function(a){a=a||new Date;var b=a.getFullYear();return 0==b%4&&(b%100!=0||b%400==0)},p=function(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},q=function(a){var b=new Date(a);return b.setDate(b.getDate()+4-(b.getDay()||7)),b.getFullYear()},r=function(a,b){var c=new Date(b,0,1);q(c)<b&&a++;for(var d,e=new Date(c.getTime()+864e5*(a-1)*7),f=[],g=e.getDay(),h=1;7>=h;h++)d=new Date(864e5*(h-g)+e.getTime()),f.push(d);return f};return{format:b,previousDay:c,previousDays:d,daysOfPreviousWeek:g,dayOfCurrentWeek:e,daysOfCurrentWeek:f,dayOfCurrentMonth:h,daysOfCurrentMonth:i,daysOfPreviousMonth:j,daysOfCurrentSeason:k,daysOfPreviousSeason:l,currentSeasonIndex:m,previousSeasonIndex:n,getISO8601WeekNumber:p,getISO8601WeekYear:q,getDatesByWeek:r,ifLeapYear:o}}]).filter("graceDateFilter",["graceDateServ",function(_graceDateServ){var input,days,returnDates=[];return function(_input,_options){var options=eval("("+_options+")");switch(input=_input instanceof Date?_input:new Date(_input.replace(/(-|\/)/g,"/")),options.type){case"current_week_121":days=_graceDateServ.daysOfCurrentWeek(input,options.pattern),returnDates=[days[0].format,days[days.length-1].format];break;case"previous_week_121":days=_graceDateServ.daysOfPreviousWeek(input,options.n||1,options.pattern),returnDates=[days[0].format,days[days.length-1].format];break;case"current_month_121":days=_graceDateServ.daysOfCurrentMonth(input,options.pattern),returnDates=[days[0].format,days[days.length-1].format];break;case"previous_month_121":days=_graceDateServ.daysOfPreviousMonth(input,options.n||1,0,options.pattern),returnDates=[days[0].format,days[days.length-1].format];break;case"current_season_121":days=_graceDateServ.daysOfCurrentSeason(input,options.pattern),returnDates=[days[0].format,days[days.length-1].format];break;case"previous_season_121":days=_graceDateServ.daysOfPreviousSeason(input,options.pattern),returnDates=[days[0].format,days[days.length-1].format];break;default:returnDates=[_graceDateServ.format(input,options.pattern)]}return returnDates.join(",")}}]),angular.module("grace.bootstrap.dateparser",[]).service("$gDateParserService",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},w:{regex:"[1-9]|[1-5][0-9]",apply:function(a){this.date=+a}},ww:{regex:"0[1-9]|[1-5][0-9]",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("grace.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("grace.bootstrap.datepicker",["grace.bootstrap.dateparser","grace.bootstrap.position","grace.bootstrap.date"]).constant("datepickerConfig",{formatMinute:"HH:mm",formatHour:"HH:mm",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatMinuteTitle:"yyyy/MM/dd",formatHourTitle:"yyyy/MM/dd",formatWeekTitle:"yyyy/WW",formatDayTitle:"yyyy/MM",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:1,graceYearRange:20,minDate:null,maxDate:null,weekMode:!1}).controller("datepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","$locale","dateFilter","datepickerConfig","graceDateServ",function(a,b,c,d,e,f,g,h,i,j){function k(a){return n[a-1]}var l=this,m={$setViewValue:angular.noop};angular.extend(g.DATETIME_FORMATS,{DAY:["日","一","二","三","四","五","六"],SHORTDAY:["日","一","二","三","四","五","六"]}),this.modes=["minute","hour","day","month","year"],angular.forEach(["formatMinute","formatHour","formatDay","formatMonth","formatYear","formatDayHeader","formatMinuteTitle","formatHourTitle","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","graceYearRange","weekMode"],function(c,e){l[c]=angular.isDefined(b[c])?11>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):i[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){l[d]=a?new Date(a):null,l.refreshView()}):l[d]=i[d]?new Date(i[d]):null}),a.datepickerMode=a.datepickerMode||i.datepickerMode,a.uniqueId="grace-datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),l.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===l.compare(b.date,l.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){m=a,m.$render=function(){l.render()}},this.render=function(){if(m.$modelValue){var a=new Date(m.$modelValue),b=!isNaN(a);b?this.activeDate=a:(this.activeDate=new Date,f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')),m.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=m.$modelValue?new Date(m.$modelValue):null;m.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},a.currentWeek=null;var n=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"];this.createDateObject=function(a,b){var c=m.$modelValue?new Date(m.$modelValue):null;if(l.weekMode){var d=l.getWeekNumber(c),e=l.getWeekNumber(new Date),f=l.getWeekNumber(a);return{date:a,label:"MMMM"==b?k(parseInt(h(a,"M"))):h(a,b),selected:c&&f==d,disabled:this.isDisabled(a),current:e==f,weekend:6==a.getDay()||0==a.getDay(),weekIndex:f}}return{date:a,label:"MMMM"==b?k(parseInt(h(a,"M"))):h(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),weekend:6==a.getDay()||0==a.getDay()}},this.createWeekObject=function(a){var b=m.$modelValue?new Date(m.$modelValue):null;return angular.extend({},a,{selected:a.week==j.getISO8601WeekNumber(b)&&l.weekMode})},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b,c){if(l.weekMode){if(angular.isArray(b)){if(c&&/^\d{4}-\d{2}$/.test(c)){var d=(c.split("-")[0],c.split("-")[1]);a.weekIndex=a.$parent.$parent.weekIndex=d,m.$setViewValue(l.minDate&&b[0]<new Date(l.minDate)?new Date(l.minDate):b[0]),m.$render()}return}if(a.datepickerMode===l.minMode){var e=m.$modelValue?new Date(m.$modelValue):new Date(0,0,0,0,0,0,0);e.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),e.setHours(b.getHours()),e.setMinutes(b.getMinutes()),m.$setViewValue(e),m.$render()}else l.activeDate=b,a.switchDisabled||(a.datepickerMode=l.modes[l.modes.indexOf(a.datepickerMode)-1])}else{if(angular.isArray(b))return;if(a.datepickerMode===l.minMode){var e=m.$modelValue?new Date(m.$modelValue):new Date(0,0,0,0,0,0,0);e.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),e.setHours(b.getHours()),e.setMinutes(b.getMinutes()),m.$setViewValue(e),m.$render()}else l.activeDate=b,a.switchDisabled||(a.datepickerMode=l.modes[l.modes.indexOf(a.datepickerMode)-1])}},a.move=function(a){var b=l.activeDate.getFullYear()+a*(l.step.years||0),c=l.activeDate.getMonth()+a*(l.step.months||0),d=l.activeDate.getDate()+a*(l.step.days||0);l.activeDate.setFullYear(b,c,d),l.refreshView()},a.toggleMode=function(b){if(!a.switchDisabled){if(b=b||1,a.datepickerMode===l.maxMode&&1===b||a.datepickerMode===l.minMode&&-1===b)return;a.datepickerMode=l.modes[l.modes.indexOf(a.datepickerMode)+b]}},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",
38:"up",39:"right",40:"down"};var o=function(){e(function(){l.element[0].focus()},0,!1)};a.$on("datepicker.focus",o),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(l.isDisabled(l.activeDate))return;a.select(l.activeDate),o()}else!b.ctrlKey||"up"!==c&&"down"!==c?(l.handleKeyDown(c,b),l.refreshView()):(a.toggleMode("up"===c?1:-1),o())}}]).directive("graceDatepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",switchDisabled:"=?",dateDisabled:"&"},require:["graceDatepicker","?^ngModel"],controller:"datepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("graceDaypicker",["dateFilter","graceDateServ",function(a,b){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^graceDatepicker",link:function(c,d,e,f){function g(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function h(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}c.showWeeks=f.showWeeks,f.step={months:1},f.element=d;var i=[31,28,31,30,31,30,31,31,30,31,30,31];f._refreshView=function(){var d=f.activeDate.getFullYear(),e=f.activeDate.getMonth(),g=new Date(d,e,1),i=f.startingDay-g.getDay(),j=i>0?7-i:-i,k=new Date(g);j>0&&k.setDate(-j+1);for(var l=h(k,42),m=0;42>m;m++)l[m]=angular.extend(f.createDateObject(l[m],f.formatDay),{secondary:l[m].getMonth()!==e,uid:c.uniqueId+"-"+m});c.labels=new Array(7);for(var n=0;7>n;n++)c.labels[n]={abbr:a(l[n].date,f.formatDayHeader),full:a(l[n].date,"EEEE")};if(c.rows=f.split(l,7),c.showWeeks){c.title=a(f.activeDate,f.formatDayTitle),c.weekNumbers=[];for(var o,p,q=c.rows.length,m=0;q>m;m++)o=c.rows[m][c.rows[m].length-1].date,p=b.getISO8601WeekNumber(o),c.weekNumbers.push(f.createWeekObject({year:b.getISO8601WeekYear(o),week:p}))}else c.title=a(f.activeDate,f.formatDayTitle)},f.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},c.selectWeek=function(a){c.select(b.getDatesByWeek(a.week,a.year),a.year+"-"+(a.week<10?"0"+a.week:a.week))},f.getWeekNumber=b.getISO8601WeekNumber,f.handleKeyDown=function(a,b){var c=f.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var d=f.activeDate.getMonth()+("pageup"===a?-1:1);f.activeDate.setMonth(d,1),c=Math.min(g(f.activeDate.getFullYear(),f.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=g(f.activeDate.getFullYear(),f.activeDate.getMonth()));f.activeDate.setDate(c)},f.refreshView()}}}]).directive("graceHourpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/hour.html",require:"^graceDatepicker",link:function(b,c,d,e){e.step={days:1},e.element=c,e._refreshView=function(){for(var c=e.activeDate,d=new Array(25),f=c.getDate(),g=c.getMonth(),h=c.getFullYear(),i=0;24>i;i++)d[i]=angular.extend(e.createDateObject(new Date(h,g,f,i),e.formatHour),{uid:b.uniqueId+"-"+i});d[24]=null,b.title=a(e.activeDate,e.formatHourTitle),b.rows=e.split(d,5)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours())-new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours())},e.handleKeyDown=function(a,b){return},e.refreshView()}}}]).directive("graceMinutepicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/minuteOrSecond.html",require:"^graceDatepicker",link:function(b,c,d,e){e.step={days:1},e.element=c;var f=5,g=5;e._refreshView=function(){for(var c=e.activeDate,d=60/f,h=Math.ceil(d/g)*g,i=new Array(h),j=c.getHours(),k=c.getDate(),l=c.getMonth(),m=c.getFullYear(),n=0;h>n;n++)i[n]=d>n?angular.extend(e.createDateObject(new Date(m,l,k,j,n*f),e.formatMinute),{uid:b.uniqueId+"-"+n}):{uid:b.uniqueId+"-"+n};b.title=a(e.activeDate,e.formatMinuteTitle),b.rows=e.split(i,g)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes())-new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes())},e.handleKeyDown=function(a,b){return},e.refreshView()}}}]).directive("graceMonthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^graceDatepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a,b){var c=e.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);e.activeDate.setMonth(c)},e.refreshView()}}}]).directive("graceYearpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^graceDatepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.graceYearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a,b){var c=d.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*d.step.years:"home"===a?c=e(d.activeDate.getFullYear()):"end"===a&&(c=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(c)},d.refreshView()}}}]).constant("datepickerPopupConfig",{graceDatepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",enterText:"Enter",closeOnDateSelection:!1,showByMouseover:!1,appendToBody:!0,showButtonBar:!0,switchDisabled:!0,buttons:["current","close","clear"],rangeJoint:" 至 "}).directive("graceDatepickerPopup",["$compile","$parse","$document","$position","dateFilter","$gDateParserService","datepickerPopupConfig","$timeout","graceDateServ",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",enterText:"@",dateDisabled:"&",datepickerMode:"=?",closeOnDateSelection:"=?",showByMouseover:"=?"},link:function(j,k,l,m){function n(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function o(a){if(angular.isArray(a)){var b=[];return angular.forEach(a,function(a,c){b[c]=o(a)}),b}if(a){if(angular.isDate(a)&&!isNaN(a))return m.$setValidity("date",!0),a;if(angular.isString(a)){var c=f.parse(a,r)||new Date(a);return isNaN(c)?void m.$setValidity("date",!1):(m.$setValidity("date",!0),c)}return void m.$setValidity("date",!1)}return m.$setValidity("date",!0),null}function p(){m.$setViewValue(j.date),m.$render()}function q(a,b){var c=i.getISO8601WeekNumber(a),d=e(a,b);return b.indexOf("ww")>-1?d.replace("ww",c>9?c:"0"+c):d.replace("w",c)}var r,s=angular.isDefined(l.showByMouseover)?j.$eval(l.showByMouseover):g.showByMouseover,t=angular.isDefined(l.closeOnDateSelection)?j.$parent.$eval(l.closeOnDateSelection):g.closeOnDateSelection,u=angular.isDefined(l.datepickerAppendToBody)?j.$parent.$eval(l.datepickerAppendToBody):g.appendToBody,v=angular.isDefined(l.buttons)?j.$parent.$eval(l.buttons):g.buttons,w=angular.isDefined(l.rangeJoint)?j.$parent.$eval(l.rangeJoint):g.rangeJoint,x=angular.isDefined(l.onEnter)?j.$parent.$eval(l.onEnter):void 0,y=angular.isDefined(l.onClose)?j.$parent.$eval(l.onClose):void 0,z=j.$parent.$eval(l.ngModel);if(j.uniqId="graceDataPikcerPopupWrap"+j.$id+"_"+(new Date).getTime(),j.showButtonBar=angular.isDefined(l.showButtonBar)?j.$parent.$eval(l.showButtonBar):g.showButtonBar,j.datepickerMode=l.datepickerMode,j.switchDisabled=angular.isDefined(l.switchDisabled)?j.$parent.$eval(l.switchDisabled):g.switchDisabled,-1!=v.indexOf("current")&&(j.showCurrentButton=!0),-1!=v.indexOf("clear")&&(j.showClearButton=!0),-1!=v.indexOf("enter")&&(j.showEnterButton=!0),-1!=v.indexOf("close")&&(j.showCloseButton=!0),j.getText=function(a){return j[a+"Text"]||g[a+"Text"]},l.$observe("graceDatepickerPopup",function(a){r=a||g.graceDatepickerPopup,m.$render()}),angular.isArray(z))var A=angular.element("<div grace-datepicker-popup-wrap><div grace-datepicker-range ></div></div>");else var A=angular.element("<div grace-datepicker-popup-wrap><div grace-datepicker ></div></div>");A.attr({"ng-model":"date","ng-change":"dateSelection()"});var B=angular.element(A.children()[0]);l.datepickerOptions&&angular.forEach(j.$parent.$eval(l.datepickerOptions),function(a,b){B.attr(n(b),a)}),j.watchData={},angular.forEach(["minDate","maxDate","datepickerMode","switchDisabled"],function(a){if(l[a]){var c=b(l[a]);if(j.$parent.$watch(c,function(b){j.watchData[a]=b}),B.attr(n(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;j.$watch("watchData."+a,function(a,b){a!==b&&d(j.$parent,a)})}}}),l.dateDisabled&&B.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),m.$parsers.unshift(o),j.dateSelection=function(a){angular.isDefined(a)&&(j.date=a),p(),t&&(j.isOpen=!1,k[0].focus())},k.bind("input change keyup",function(){j.$apply(function(){j.date=m.$modelValue})}),m.$render=function(){if(angular.isArray(m.$viewValue)){var a=[];j.date=[],angular.forEach(m.$viewValue,function(b,c){a[c]=e(b,r)}),k.val(a.join(w)),j.date=o(m.$modelValue)}else{if(r&&-1!=r.indexOf("w"))var a=m.$viewValue?q(m.$viewValue,r):"";else var a=m.$viewValue?e(m.$viewValue,r):"";k.val(a),j.date=o(m.$modelValue)}};var C=function(a){j.isOpen&&a.target!==k[0]&&j.$apply(function(){j.isOpen=!1})},D=function(a,b){j.keydown(a)};k.bind("keydown",D),j.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),j.close()):40!==a.which||j.isOpen||(j.isOpen=!0)},s&&h(function(){angular.element(k[0]).closest(".input-group").off("mouseenter").on("mouseenter",function(){j.isOpen=!0,j.$digest()}).off("mouseleave").on("mouseleave",function(){j.isOpen=!1,h(function(){j.$digest()},100,!1)}),angular.element("#"+j.uniqId+".dropdown-menu").off("mouseenter").on("mouseenter",function(){j.isOpen=!0,j.$digest()}).off("mouseleave").on("mouseleave",function(){j.isOpen=!1,h(function(){j.$digest()},100,!1)})},0,!1),j.$watch("isOpen",function(a){if(a){j.$broadcast("graceDatepicker.focus"),j.position=u?d.offset(k):d.position(k);var b=angular.element("#"+j.uniqId);b.css("visibility","hidden"),h(function(){j.$apply(function(){var a=b.prop("offsetWidth");j.position.left+a>screen.width&&(j.position.left=screen.width-a),b.css("visibility","visible")})},0,!1),j.position.top=j.position.top+k.prop("offsetHeight"),c.bind("click",C)}else c.unbind("click",C)}),j.select=function(a){if("today"===a){var b=new Date;angular.isDate(m.$modelValue)?(a=new Date(m.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}j.dateSelection(a)},j.close=function(){j.isOpen=!1,k[0].focus(),angular.isFunction(y)&&y.call(j.$parent)},j.enter=function(){j.isOpen=!1,k[0].focus(),angular.isFunction(x)&&x.call(j.$parent,k.val())};var E=a(A)(j);u?c.find("body").append(E):k.after(E),j.$on("$destroy",function(){E.remove(),k.unbind("keydown",D),c.unbind("click",C)})}}}]).directive("graceDatepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b,c){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}).constant("daterangepickerConfig",{pickerCount:1}).controller("datepickerRangeController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig","daterangepickerConfig",function(a,b,c,d,e,f,g,h,i){function j(a){return m[a-1]}var k=this,l={$setViewValue:angular.noop};this.modes=["day","month","year"];var m=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"];angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","graceYearRange","pickerCount"],function(c,e){k[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):i[c]||h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){k[d]=a?new Date(a):null,k.refreshView()}):k[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="grace-datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.isActive=function(b){return 0===k.compare(b.date,k.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){l=a,l.$render=function(){k.render()}},this.render=function(){if(l.$modelValue){var a=new Date(l.$modelValue[0]),b=new Date(l.$modelValue[1]),c=!isNaN(a)&&!isNaN(b);c&&!this.activeDate?this.activeDate=[a,b]:c||f.error('DateRangepicker directive: "ng-model" value must be a Array of Date objects, numbers of milliseconds since 01.01.1970 or strings representing an RFC2822 or ISO 8601 date.'),l.$setValidity("date",c)}this.refreshView()},this.refreshView=function(){this.element&&this._refreshView()},this.createDateObject=function(a,b){var c,d,c=d=null;return l.$modelValue&&(c=new Date(l.$modelValue[0]),d=new Date(l.$modelValue[1])),{date:a,label:b===h.formatMonth?j(parseInt(g(a,"M"))):g(a,b),selected:c&&d&&this.compare(a,c,d),disabled:this.isDisabled(a),current:!1,weekend:6==a.getDay()||0==a.getDay()}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(!k._select||k._select(b,l))if(a.datepickerMode===k.minMode){var c=l.$modelValue?new Date(l.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),l.$setViewValue(c),l.$render()}else k.activeDate=b,a.datepickerMode=k.modes[k.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=k.activeDate[0].getFullYear()+a*(k.step.years||0),c=k.activeDate[0].getMonth()+a*(k.step.months||0),d=k.activeDate[1].getFullYear()+a*(k.step.years||0),e=k.activeDate[1].getMonth()+a*(k.step.months||0);k.activeDate[0].setFullYear(b,c,1),k.activeDate[1].setFullYear(d,e,1),k.refreshView()},a.toggleMode=function(a){},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var n=function(){e(function(){k.element[0].focus()},0,!1)};a.$on("datepicker.focus",n),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(k.isDisabled(k.activeDate))return;a.select(k.activeDate),n()}else!b.ctrlKey||"up"!==c&&"down"!==c?(k.handleKeyDown(c,b),k.refreshView()):(a.toggleMode("up"===c?1:-1),n())}}]).directive("graceDatepickerRange",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/daterangepicker.html",scope:{datepickerMode:"=?",quickSelectMode:"=?",dateDisabled:"&"},require:["graceDatepickerRange","?^ngModel"],controller:"datepickerRangeController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("graceDaypickerRange",["dateFilter","graceDateServ",function(a,b){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/dayrange.html",require:"^graceDatepickerRange",link:function(c,d,e,f){function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b){var c=new Date(a,b,1),d=f.startingDay-c.getDay(),e=d>0?7-d:-d,g=new Date(c);return e>0&&g.setDate(-e+1),g}function i(a,b,c){return 3==arguments.length?i(a,b)>=0&&i(a,c)<=0:new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())}c.showWeeks=f.showWeeks,f.step={months:1},f.element=d;var j=0;f._select=function(a,b){var c;return c=b.$modelValue&&b.$modelValue[1]?0==j?[new Date(a.getFullYear(),a.getMonth(),a.getDate()),new Date(a.getFullYear(),a.getMonth(),a.getDate())]:i(a,b.$modelValue[0])<0?[new Date(a.getFullYear(),a.getMonth(),a.getDate()),new Date(b.$modelValue[1])]:[new Date(b.$modelValue[0]),new Date(a.getFullYear(),a.getMonth(),a.getDate())]:[new Date(0,0,0,0,0,0,0),new Date(0,0,0,0,0,0,0)],b.$setViewValue(c),b.$render(),j=++j%2,!1},f._refreshView=function(){var d=f.activeDate[0].getFullYear(),e=f.activeDate[0].getMonth(),i=f.activeDate[1].getFullYear(),j=f.activeDate[1].getMonth(),k=12*(i-d)+(j-e)+1,l=0;for(k=parseInt(f.pickerCount)||k,c.titles=[],c.rowsGroup=[],c.weekNumbersGroup=[];k>l;){for(var m=(e+l)%12,n=d+Math.floor((e+l)/12),o=h(n,m),p=g(o,42),q=0;42>q;q++)p[q]=angular.extend(f.createDateObject(p[q],f.formatDay),{secondary:p[q].getMonth()!==m,uid:c.uniqueId+"-"+q});c.titles.push(a(new Date(n,m,1),f.formatDayTitle));var r=f.split(p,7);if(c.showWeeks){for(var s,t,u=[],v=r.length,q=0;v>q;q++)s=r[q][r[q].length-1].date,t=b.getISO8601WeekNumber(s),u.push({year:b.getISO8601WeekYear(s),week:t});c.weekNumbersGroup.push(u)}c.rowsGroup.push(r),l++}c.labels=new Array(7);for(var w=0;7>w;w++)c.labels[w]={abbr:a(c.rowsGroup[0][0][w].date,f.formatDayHeader),full:a(c.rowsGroup[0][0][w].date,"EEEE")}},f.compare=i,f.handleKeyDown=function(a,b){return},f.refreshView()}}}]).directive("graceMonthpickerRange",["dateFilter","graceDateServ",function(a,b){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/monthrange.html",require:"^graceDatepickerRange",link:function(b,c,d,e){function f(a,b,c){if(3==arguments.length)return f(a,b)>=0&&f(a,c)<=0;if(b instanceof Array){var d=new Date(b[0].getFullYear(),b[0].getMonth()),e=new Date(b[1].getFullYear(),b[1].getMonth());return a-d>=0&&0>=a-e}return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())}e.step={years:1},e.element=c;var g=0;e._select=function(a,b){var c;return c=b.$modelValue&&b.$modelValue[1]?0==g?[new Date(a.getFullYear(),a.getMonth()),new Date(a.getFullYear(),a.getMonth())]:e.compare(a,b.$modelValue[0])<0?[new Date(a.getFullYear(),a.getMonth()),new Date(b.$modelValue[1])]:[new Date(b.$modelValue[0]),new Date(a.getFullYear(),a.getMonth())]:[new Date(0,0,0,0,0,0,0),new Date(0,0,0,0,0,0,0)],b.$setViewValue(c),b.$render(),g=++g%2,!1},e._refreshView=function(){var c=new Array(12),d=e.activeDate[0].getFullYear(),f=(e.activeDate[0].getMonth(),e.activeDate[1].getFullYear()),g=(e.activeDate[1].getMonth(),12*(f-d)+1),h=0,g=parseInt(e.pickerCount)||g;for(b.titles=[],b.rowsGroup=[];g>h;){for(var i=0;12>i;i++)c[i]=angular.extend(e.createDateObject(new Date(d+h,i,1),e.formatMonth),{uid:b.uniqueId+"-"+i});b.titles.push(a(new Date(d+h,1,1),e.formatMonthTitle)),b.rowsGroup.push(e.split(c,3)),h++}},e.compare=f,e.handleKeyDown=function(a,b){return},e.refreshView()}}}]);var app=angular.module("grace.bootstrap.dimension",["grace.bootstrap.position"]).constant("dimensionConfig",{autoIncrement:!1,dimensionContrast:!1,showDimension23:!1,showDimension45:!1,enableContrast:!0,isCodeUniq:!1,isAll:!1}).controller("dimensionController",["$scope","dimensionConfig","$http","dimensionFactory",function(a,b,c,d){function e(b){a.selected[b.code]?delete a.selected[b.code]:a.selected[b.code]=d.makeNodeChainInfo(b.code,a.nodeIndex)}function f(a){for(var b,c="object"==typeof a?a.code:a,d=0;b=p[d];d++)if(b.code==c)return b;return!1}function g(a){for(var b,c=0;b=p[c];c++)if(b.code==a.code)return p.splice(c,1)}function h(a){return p[0]?p[0].level==a.level?!0:void 0:!0}function i(b,c){if(b){var d=angular.element(b.target),e=d.parent().siblings(".grace-dimension-searchbox");23==e.attr("level")?a.closeSearchBox(23):45==e.attr("level")&&a.closeSearchBox(45),e.val(c?"":d.text())}}function j(a){for(var b in a)return!1;return!0}a.dContrast=b.dimensionContrast,void 0==a.isContrast&&(a.isContrast=b.dimensionContrast),void 0==a.enableContrast&&(a.enableContrast=b.enableContrast),void 0==a.isAll&&(a.isAll=b.isAll),a.showDimension23=b.showDimension23,a.showDimension45=b.showDimension45,a.searchResult23={},a.searchResult23Empty=!0,a.searchResult45={},a.searchResult45Empty=!0,a.searchKeyWord23="",a.searchKeyWord45="";var k=!1,l={},m=function(){a._initSelect=null;for(;p.length;)a.nodeClick(null,p[0])};a.$watch("dimensionData",function(b){b&&(m(),a.isAll&&a.dimensionData[0].children.unshift({children:[],code:-1,level:1,name:"全部"}),a.nodeIndex=d.createNodeIndex(a.dimensionData,a),a._initSelect&&(a._initSelect.checked=!1),n=a.isContrast?2:1,a.nodeClick(null,a._initSelect||a.dimensionData[0].children[0]),k||(k=!0,a.onReady&&a.onReady(l)),a.onAction())});var n=1,o=function(b){for(var c,d=0;c=p[d];)a.nodeClick(null,c);a.nodeClick(null,a.dimensionData[0].children[0]),n=b?1:n};a.checkContrast=function(b){return a.enableContrast?-1==a.dimensionData[0].children[0].oldCode&&f(a.dimensionData[0].children[0])?void alert("维度为全部时不能进行对比"):(a.isContrast=b,a.onContrastSwitchClick&&a.onContrastSwitchClick(a.isContrast),n=a.isContrast?2:1,void(a.isContrast||2!=p.length||o())):void(a.onContrastSwitchClick&&a.onContrastSwitchClick(!1))},a.selected={};var p=a.selectedNode=[];a.cancelSelect=function(b){var c=f(b);c&&a.nodeClick(null,c)},a.nodeClick=function(b,c){if(!c.unavailable)if(f(c)||-1!=c.oldCode){if(f(c))c.checked=!c.checked,g(c),e(c),i(b,!0);else if(!f(c)&&p.length<n)h(c)?(p.push(c),c.checked=!c.checked,e(c),i(b,!1)):alert("维度应该在同一级");else if(!f(c)&&p.length==n&&n>1)alert("维度选择超数量限制");else if(!f(c)&&p.length==n&&1==n){var d=p.shift();d.checked=!d.checked,e(d),p.push(c),c.checked=!c.checked,e(c),i(b,!1)}}else{a.isContrast=!1,n=1;for(var j,k=0;j=p[k];)j.checked=!j.checked,g(j),e(j);p.push(c),c.checked=!c.checked,e(c),i(b,!1)}},a.curLevel1Node=null,a.curLevel3Node=null,a.showSubDimension=function(b,c){1==c.level?(a.curLevel1Node&&a.curLevel1Node!=c.code?null!==a.curLevel1Node&&a.curLevel1Node!=c.code&&(a.showDimension23=!0):a.showDimension23=!a.showDimension23,a.curLevel1Node=c.code,a.curDimensionData23=c,a.showDimension45=!1):3==c.level&&(a.curLevel3Node&&a.curLevel3Node!=c.code?null!==a.curLevel3Node&&a.curLevel3Node!=c.code&&(a.showDimension45=!0):a.showDimension45=!a.showDimension45,a.curLevel3Node=c.code,a.curDimensionData45=c)},a.doSearch=function(b,c){"23"==c?(a.searchResult23=d.searchNode(b,a.curDimensionData23,function(a){return-1!=a.name.indexOf(b)&&(3==a.level||2==a.level)}),a.searchResult23Empty=j(a.searchResult23),a.$apply()):"45"==c&&(a.searchResult45=d.searchNode(b,a.curDimensionData45,function(a){return-1!=a.name.indexOf(b)&&(5==a.level||4==a.level)}),a.searchResult45Empty=j(a.searchResult45),a.$apply())},a.closeSearchBox=function(b){23==b?(a.searchResult23={},a.searchResult23Empty=!0):45==b&&(a.searchResult45={},a.searchResult45Empty=!0)},a.onAction=function(){p.length<n||(b.isCodeUniq?a.action(p,a.selected):a.action(d.restoreNode(p),d.restoreNodeChain(a.selected,a.nodeIndex)))},l.takeAction=a.onAction,l.clearSelected=o}]).factory("dimensionFactory",["dimensionConfig",function(a){function b(b,d){var e={};return!k&&(k=d),a.isCodeUniq||c(b),f(b,e,null,null,0),e}function c(a){for(var b,d=0;b=a[d];d++)b.children&&b.children.length&&c(b.children),b.oldCode=b.code,b.code=j++,!k._initSelect&&b.checked&&(k._initSelect=b)}function d(a){for(var b,c=[],d=0;b=a[d];d++){var e={code:b.oldCode,name:b.name};c.push(e)}return c}function e(a,b){var c={};for(var d in a){var e=a[d];c[b[d].oldCode]=e}return c}function f(a,b,c,d,e){for(var g,h=0;g=a[h];h++)g.children&&g.children.length&&f(g.children,b,g.code,d,void 0!=e?e+1:void 0),(!d||d(g))&&(b[g.code]=g,g.pcode=c||null,void 0!=e&&(g.level=e))}function g(a,b){var c={nameChain:[],codeChain:[]};return h(a,c,b),c.nameChain.reverse(),c.codeChain.reverse(),c}function h(b,c,d){var e=d[b];e&&a.isCodeUniq?(c.nameChain.push(e.name),c.codeChain.push(e.code),h(e.pcode,c,d)):e&&!a.isCodeUniq&&e.oldCode&&(c.nameChain.push(e.name),c.codeChain.push(e.oldCode),h(e.pcode,c,d))}function i(a,b,c){var d={};return f(b.children,d,b.code,c),d}var j=1,k=null;return{createNodeIndex:b,makeNodeChainInfo:g,searchNode:i,restoreNode:d,restoreNodeChain:e}}]).directive("graceDimension",["$window","$position",function(a,b){return{restrict:"EA",require:["graceDimension"],controller:"dimensionController",templateUrl:"template/dimension/dimension.html",replace:!0,scope:{dimensionData:"=",action:"=",enableContrast:"=",isContrast:"=",onContrastSwitchClick:"=?",isBtn:"=",onReady:"=",selected:"=",isAll:"=?"},link:function(c,d,e,f){function g(a,b){var c=!0;return function(d){c&&(a(d),c=!1,setTimeout(function(){c=!0},b))}}var h=angular.element(a);c.showContrastOption="false"!=e.showContrastOption,h.on("click",function(){c.$apply(function(){c.showDimension45=!1,c.showDimension23=!1}),k&&k.css({height:"auto"}),l&&l.css({height:"auto"})});var i=angular.element(".grace-section-dimension23"),j=angular.element(".grace-section-dimension45");i.on("click",function(a){i.find(".grace-dimension-searchbox").val(""),c.$apply(function(){c.closeSearchBox(23)});var b=angular.element(a.target);b.hasClass(".grace-dimension-dropdown")||"I"==a.target.tagName||(c.$apply(function(){c.closeSearchBox(45),c.showDimension45=!1}),a.originalEvent.cancelBubble=!0)}),j.on("click",function(a){j.find(".grace-dimension-searchbox").val(""),c.$apply(function(){c.closeSearchBox(45)}),a.originalEvent.cancelBubble=!0});var k=null,l=null,m=null;d.on("click",".grace-dimension-dropdown",function(a){m=angular.element(a.currentTarget);var c=m.parent(),d=b.position(c),e=b.offset(c);if(m.hasClass("level1")){var f=k=m.parent().parent();f.css({height:"auto"});var g=b.offset(f);f.append(i),i.css({top:e.top+e.height+8-g.top}),i.find(".grace-dimension-arrow").css({left:d.left+d.width/2});var h=b.offset(i);h.top+h.height>g.height+g.top&&f.css({height:h.top-g.top+h.height}),a.originalEvent.cancelBubble=!0}else if(m.hasClass("level3")&&!j.hasClass("ng-hide")){var f=l=m.parent().parent().parent().parent().parent();f.append(j),j.css({top:"auto"});var n=(b.offset(j),b.offset(i));j.css({top:e.top-n.top+e.height+8,left:0}),j.find(".grace-dimension-arrow").css({left:d.left+d.width/2}),a.originalEvent.cancelBubble=!0}else m.hasClass("level3")&&j.hasClass("ng-hide")&&(i.css({height:"auto"}),a.originalEvent.cancelBubble=!0)}),d.find(".grace-search-group").on("click",function(a){a.originalEvent.cancelBubble=!0});var n=g(function(a){var b=angular.element(a.target),d=b.val();d?c.doSearch(d,b.attr("level")):b.parent().find(".grace-searchbox-closebtn").triggerHandler("click")},100);d.find(".grace-dimension-searchbox").bind("keyup",n),d.find(".grace-searchbox-closebtn").bind("click",function(a){var b=angular.element(a.target);b.parent().find(".grace-dimension-searchbox").val("")})}}}]);angular.module("grace.bootstrap.dimensionBaseSelect",["template/dimensionBaseSelect/dimensionBaseSelect.html"]).controller("dimensionBaseSelectController",["$scope","$attrs","$parse","$timeout",function(a,b,c,d){var e=this,f={$setViewValue:angular.noop},g=!1;a.lastSelect=angular.noop,this.init=function(a){f=a},a.$watch("data",function(){a.data&&e.render()}),a.$watch(a.getHideListValue,function(){1==g&&(a.selStatus=[""])},!0),a.getHideListValue=function(){return g},a.keyUp=function(b,c){var d=$(b.target).val();a.selStatus[0]=d},this.render=function(){if(a.selStatus=[],a.data.detail&&a.data.detail.length>0)if("all"==a.data.detail[0].code.toLowerCase().substring(a.data.detail[0].code.length-3))for(var b=0;b<a.data.detail.length;b++)"custom"!=a.data.detail[b].code&&a.selStatus.push(a.data.detail[b].code);else if(a.isMult)for(var b=0;b<a.data.detail.length;b++)1==a.data.detail[b].selected&&a.selStatus.push(a.data.detail[b].code);else{for(var b=0;b<a.data.detail.length;b++)if(1==a.data.detail[b].selected){a.selStatus.push(a.data.detail[b].code);break}0==a.selStatus.length&&a.selStatus.push(a.data.detail[0].code)}a.lastSelect=angular.copy(a.selStatus),f.$setViewValue(a.selStatus),a.autoFold&&d(function(){var b=$(a.el).find(".search-list").height();a.isShowflod=b>50?!0:!1,a.heightFix=!0,a.isIconDown=!0,a.flodStatus="更多"},0)},a.rankValue=function(){var b=angular.copy(a.selStatus);a.selStatus.length=0;for(var c,d=0;c=a.data.detail[d];d++)for(var e,f=0;e=b[f];f++)c.code==e&&a.selStatus.push(e)},a.select=function(b,c){if("custom"==b.code)a.hideList=!a.hideList;else{if(a.isMult){if(-1!=a.selStatus.indexOf(b.code))"all"==a.selStatus[0].toLowerCase().substring(a.selStatus[0].length-3)&&a.selStatus.shift(),"all"!=b.code.toLowerCase().substring(b.code.length-3)?a.selStatus.splice(a.selStatus.indexOf(b.code),1):a.selStatus.length=0;else if("all"==b.code.toLowerCase().substring(b.code.length-3)){a.selStatus=[];for(var d=0;d<a.data.detail.length;d++)a.selStatus.push(a.data.detail[d].code);a.selStatus.shift()}else a.selStatus.push(b.code),a.rankValue();a.selStatus.length==a.data.detail.length-1&&a.selStatus.indexOf("$scope.data.detail[0].code")<0&&a.selStatus.unshift(a.data.detail[0].code)}else if("all"==b.code.toLowerCase().substring(b.code.length-3)){a.selStatus=[];for(var d=0;d<a.data.detail.length;d++)a.selStatus.push(a.data.detail[d].code);a.selStatus.pop()}else a.selStatus=[b.code];a.lastSelect=angular.copy(a.selStatus)}f.$setViewValue(a.selStatus)},a.flod=function(b){"更多"==a.flodStatus?(a.flodStatus="收起",a.isIconUp=!0,a.isIconDown=!1,a.heightFix=!1,a.heightInherit=!0):(a.flodStatus="更多",a.isIconUp=!1,a.isIconDown=!0,a.heightFix=!0,a.heightInherit=!1)},a["return"]=function(){a.selStatus=angular.copy(a.lastSelect),a.hideList=!a.hideList,f.$setViewValue(a.selStatus)}}]).directive("graceDimensionBaseSelect",function(){return{restrict:"E",replace:!0,templateUrl:"template/dimensionBaseSelect/dimensionBaseSelect.html",scope:{data:"=data",isMult:"=ismult",autoFold:"=autofold",config:"=?"},require:["graceDimensionBaseSelect","?^ngModel"],controller:"dimensionBaseSelectController",link:function(a,b,c,d){var e=d[0],f=d[1];!a.config&&(a.config={input:{}});var g=a.config;g.input.allowBlank=g.input.allowBlank||void 0===g.input.allowBlank?!0:!1,a.el=b,f&&(f.$parsers.unshift(function(a){return g.input.allowBlank||a&&a.length?a:void f.$setValidity("invalid",!1)}),e.init(f))}}}),angular.module("grace.bootstrap.dimensionSelectWithCheckBox",["template/dimensionBaseSelect/dimensionSelectWithCheckBox.html"]).directive("graceDimensionSelectWithCheckBox",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"template/dimensionBaseSelect/dimensionSelectWithCheckBox.html",scope:{data:"=data"},require:["ngModel"],link:function(a,b,c,d){function e(a,b){this.code=a,this.newName=b}function f(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function g(a,b){var c=!1;return a.indexOf(b)>=0&&(c=!0),c}a.allSelStatus=[],a.allOrderType=[],a._orderType=[],a.selStatus=[],a.lastDi={};var h=d[0];a.$watch("data",function(){if(a.data){if(a.data.detail&&a.data.detail.length>0)for(var b=0;b<a.data.detail.length;b++)if(a.data.detail[b].detail)for(var c=a.data.detail[b].detail,d=0;d<c.length;d++){a.allSelStatus.push(c[d].code);var f=new e(c[d].code,a.data.detail[b].name+"-"+c[d].name);a.allOrderType.push(f),c[d].selected&&(a.selStatus.push(c[d].code),a._orderType.push(f))}else a.allSelStatus.push(a.data.detail[b].code),1==a.data.detail[b].selected&&a.selStatus.push(a.data.detail[b].code);h.$setViewValue(a.selStatus,a._orderType)}}),a.changeAllStatus=function(){a.allSelStatus.length-1>a.selStatus.length||(g(a.selStatus,a.allSelStatus[0])?f(a.selStatus,a.allSelStatus[0]):a.selStatus=angular.copy(a.allSelStatus,[]))},a.updateShowButtonForCheck=function(b,c){if(g(a.selStatus,b))a.updateShowButton(b,c),
a.rankValue();else{a.selStatus.push(b);for(var d=0;d<a.allOrderType.length;d++)if(b==a.allOrderType[d].code){a._orderType.push(a.allOrderType[d]);break}a._orderType.sort(function(b,c){var d,e;return d=a.allOrderType.indexOf(b),e=a.allOrderType.indexOf(c),d-e}),a.changeAllStatus(),a.rankValue()}h.$setViewValue(a.selStatus)},a.updateShowButton=function(b,c){if(!c)for(var d,e=0;d=a.data.detail[e];e++)if(d.detail)for(var g,i=0;g=d.detail[i];i++)if(g.code==b){c=d;break}c._checked=!1,f(a.selStatus,b);for(var e=0;e<a._orderType.length;e++)if(b==a._orderType[e].code){f(a._orderType,a._orderType[e]);break}a.rankValue(),a.changeAllStatus(),h.$setViewValue(a.selStatus,a._orderType)},a.rankValue=function(){var b=angular.copy(a.selStatus);a.selStatus.length=0;for(var c,d=0;c=a.data.detail[d];d++)if(c.detail)for(var e,f=0;e=c.detail[f];f++)for(var g,h=0;g=b[h];h++)e.code==g&&a.selStatus.push(g);else for(var g,h=0;g=b[h];h++)c.code==g&&a.selStatus.push(g)},a.select=function(b,c,d){a.lastDi.showCheckBoxList=!1,a.lastDi.checkboxselect=!1,a.lastDi.isDrop=!1,"all"==b.code.toLowerCase().substring(b.code.length-3)||0==c?g(a.selStatus,b.code)?(a.selStatus.length=0,a._orderType.length=0):(a.selStatus=angular.copy(a.allSelStatus,[]),a._orderType=angular.copy(a.allOrderType,[])):b.detail?(b.isDrop=!0,a.lastDi.checkboxselect=!1,b.showCheckBoxList=!0,b.checkboxselect=!0,a.lastDi=b):(g(a.selStatus,b.code)?f(a.selStatus,b.code):a.selStatus.push(b.code),a.changeAllStatus(),a.rankValue(),h.$setViewValue(a.selStatus)),h.$setViewValue(a.selStatus)},a.hideCheckboxList=function(a){a.showCheckBoxList=!1,a.checkboxselect=!1,a.isDrop=!1},a.hideCheckboxListForClick=function(a,b,c){b&&(a.showCheckBoxList=!1,a.checkboxselect=!1,a.isDrop=!1,c.stopPropagation())}}}}),angular.module("grace.bootstrap.dimensionSelectWithCustom",["template/dimensionBaseSelect/dimensionSelectWithCustom.html"]).controller("dimensionSelectWithCustomController",["$scope","$attrs","$parse",function(a,b,c){a.isCustom=function(a){return"custom"==a.code},a.isBrand=function(){return"statisticalClassification"==a.code}}]).directive("graceDimensionSelectWithCustom",function(){return{restrict:"E",replace:!0,templateUrl:"template/dimensionBaseSelect/dimensionSelectWithCustom.html",scope:{data:"=data",isMult:"=ismult",code:"=code"},require:["ngModel"],controller:"dimensionSelectWithCustomController",link:function(a,b,c,d){a.selStatus=[],a.$watch("data",function(b){if(b){var c=a.data.detail.length;if(a.data.detail&&a.data.detail.length>0)if("all"==a.data.detail[0].code.toLowerCase().substring(a.data.detail[0].code.length-3))for(var e=0;e<a.data.detail.length;e++)"custom"!=a.data.detail[e].code?a.selStatus.push(a.data.detail[e].code):c--;else if(a.isMult)for(var e=0;e<a.data.detail.length;e++)1==a.data.detail[e].selected&&a.selStatus.push(a.data.detail[e].code);else{for(var e=0;e<a.data.detail.length;e++)if(1==a.data.detail[e].selected){a.selStatus.push(a.data.detail[e].code);break}0==a.selStatus.length&&a.selStatus.push(a.data.detail[0].code)}var f=d[0];f.$setViewValue(a.selStatus);a.lastSelect=angular.copy(a.selStatus),a["return"]=function(){a.$parent.cancelCustom&&a.$parent.cancelCustom(),a.selStatus=angular.copy(a.lastSelect),a.hideList=!a.hideList,f.$setViewValue(a.selStatus)},a.select=function(b,d){if(a.isBrand()&&a.$parent.switchBrand&&a.$parent.switchBrand(b),"custom"==b.code)a.hideList=!a.hideList,a.customSelected=!0,document.getElementById("graceDiCusInputBox").value="";else{if(a.customSelected=!1,a.isMult){if(-1!=a.selStatus.indexOf(b.code))"all"==a.selStatus[0].toLowerCase().substring(a.selStatus[0].length-3)&&a.selStatus.shift(),"all"!=b.code.toLowerCase().substring(b.code.length-3)?a.selStatus.splice(a.selStatus.indexOf(b.code),1):a.selStatus.length=0;else if("all"==b.code.toLowerCase().substring(b.code.length-3)){a.selStatus=[];for(var e=0;c>e;e++)a.selStatus.push(a.data.detail[e].code)}else a.selStatus.push(b.code);a.selStatus.length==c-1&&a.selStatus.indexOf("$scope.data.detail[0].code")<0&&a.selStatus.unshift(a.data.detail[0].code)}else if("all"==b.code.toLowerCase().substring(b.code.length-3)){a.selStatus=[];for(var e=0;c>e;e++)a.selStatus.push(a.data.detail[e].code)}else a.selStatus=[b.code];a.lastSelect=angular.copy(a.selStatus)}f.$setViewValue(a.selStatus)}}})}}}),angular.module("grace.bootstrap.dimensionSelectWithRadioBox",["template/dimensionBaseSelect/dimensionSelectWithRadioBox.html"]).directive("graceDimensionSelectWithRadioBox",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"template/dimensionBaseSelect/dimensionSelectWithRadioBox.html",scope:{data:"=data"},require:["ngModel"],link:function(a,b,c,d){function e(a,b){this.code=a,this.newName=b}function f(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function g(a,b){var c=!1;return a.indexOf(b)>=0&&(c=!0),c}a.allSelStatus=[],a.allOrderType=[],a._orderType=[],a.selStatus=[],a.lastDi={};var h=d[0];a.$watch("data",function(){if(a.data){if(a.data.detail&&a.data.detail.length>0)for(var b=0;b<a.data.detail.length;b++)if(a.data.detail[b].detail)for(var c=a.data.detail[b].detail,d=0;d<c.length;d++){var f=new e(c[d].code,a.data.detail[b].name+"-"+c[d].name);a.allOrderType.push(f),c[d].selected&&(a.allSelStatus.push(c[d].code),a.selStatus.push(c[d].code),a._orderType.push(f))}else a.allSelStatus.push(a.data.detail[b].code),1==a.data.detail[b].selected&&a.selStatus.push(a.data.detail[b].code);h.$setViewValue(a.selStatus,a._orderType);var g={};g.code="orderTypeAll",a.select(g,0)}}),a.changeAllStatus=function(){a.allSelStatus.length-1>a.selStatus.length||(g(a.selStatus,a.allSelStatus[0])?f(a.selStatus,a.allSelStatus[0]):a.selStatus=angular.copy(a.allSelStatus,[]))},a.updateShowButtonForCheck=function(b){a.selStatus=[];for(var c=0;c<a.allOrderType.length;c++)if(b==a.allOrderType[c].code){a._orderType=[],a._orderType.push(a.allOrderType[c]);break}return a.selStatus.push(a.allOrderType[c].code),a.changeAllStatus(),void h.$setViewValue(a.selStatus);var c},a.updateShowButton=function(b,c){if(!c)for(var d,e=0;d=a.data.detail[e];e++)if(d.detail)for(var g,i=0;g=d.detail[i];i++)if(g.code==b){c=d;break}c._checked=!1,f(a.selStatus,b);for(var e=0;e<a._orderType.length;e++)if(b==a._orderType[e].code){f(a._orderType,a._orderType[e]);break}a.changeAllStatus(),h.$setViewValue(a.selStatus,a._orderType)},a.select=function(b,c,d){if(a.lastDi.showCheckBoxList=!1,a.lastDi.checkboxselect=!1,a.lastDi.isDrop=!1,"all"==b.code.toLowerCase().substring(b.code.length-3)||0==c){if(g(a.selStatus,b.code))return;a.selStatus=angular.copy(a.allSelStatus,[]),a._orderType=angular.copy(a.allOrderType,[]),a._orderType=a._orderType.slice(0,1)}else b.detail?(b.isDrop=!0,a.lastDi.checkboxselect=!1,b.showCheckBoxList=!0,b.checkboxselect=!0,a.lastDi=b):(a.selStatus=[],a.selStatus.push(b.code),a.changeAllStatus(),a.changeDropStatus(),h.$setViewValue(a.selStatus));h.$setViewValue(a.selStatus)},a.changeDropStatus=function(){for(var b=angular.copy(a._orderType),c=0;c<b.length;c++)a.updateShowButton(b[c].code)},a.hideCheckboxList=function(a){a.showCheckBoxList=!1,a.checkboxselect=!1,a.isDrop=!1},a.hideCheckboxListForClick=function(a,b,c){b&&(a.showCheckBoxList=!1,a.checkboxselect=!1,a.isDrop=!1,c.stopPropagation())}}}}),angular.module("grace.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",["$window",function(a){return{require:"?^dropdown",link:function(b,c,d,e){if(e){e.toggleElement=c;var f=function(f){if(f.preventDefault(),!c.hasClass("disabled")&&!d.disabled&&(b.$apply(function(){e.toggle()}),"true"==c.attr("aria-expanded"))){"relative"!==c.parent().position&&c.parent().css("position","relative");var g=c.offset();g.bottom=g.top+c.outerHeight(!1);var h={height:c.next().outerHeight(!1)},i={top:a.scrollY,bottom:a.scrollY+a.innerHeight},j=i.top<g.top-h.height,k=i.bottom>g.bottom+h.height+15,l={top:"100%"};!k&&j&&(l={top:-(h.height+3)}),c.next().css(l)}};c.bind("click",f),c.attr({"aria-haspopup":!0,"aria-expanded":!1}),b.$watch(e.isOpen,function(a){c.attr("aria-expanded",!!a)}),b.$on("$destroy",function(){c.unbind("click",f)})}}}}]),angular.module("grace.bootstrap.fieldManager",[]).controller("fieldManagerController",["$scope",function(a){var b=this,c=[];b.addField=function(a){c.push(a)},b.getField=function(){return c},b.getFieldValue=function(a){for(var b,d=[],e=0,f=c.length;f>e;e++)b=c[e].scope,arguments.length&&a!==b.getName()||d.push({name:b.getName(),value:b.getValue()});return d},b.triggerFieldChange=function(a){angular.forEach(c,function(b){b.scope.$broadcast("fieldChange",a)})},a.handler({getFieldValue:b.getFieldValue})}]).directive("graceFieldManager",[function(){return{restrict:"EA",replace:!0,scope:{handler:"="},controller:"fieldManagerController",link:function(a,b,c,d){}}}]),angular.module("grace.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("grace.bootstrap.tooltip",["grace.bootstrap.position","grace.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" theme="'+q+"tt_theme"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(a,b){var c=f(s);return function(a,b,d){function f(){a.tt_isOpen?m():k()}function k(){(!A||a.$eval(d[l+"Enable"]))&&(a.tt_popupDelay?x||(x=g(p,a.tt_popupDelay,!1),x.then(function(a){a()})):p()())}function m(){a.$apply(function(){q()})}function p(){return x=null,w&&(g.cancel(w),w=null),a.tt_content?(r(),v.css({top:0,left:0,display:"block"}),y?i.find("body").append(v):b.after(v),B(),a.tt_isOpen=!0,a.$digest(),B):angular.noop}function q(){a.tt_isOpen=!1,g.cancel(x),x=null,a.tt_animation?w||(w=g(s,500)):s()}function r(){v&&s(),v=c(a,function(){}),a.$digest()}function s(){w=null,v&&(v.remove(),v=null)}function t(b){return a.$eval(d[l+b])}function u(){a.tt_title=t("Title");var b=parseInt(t("PopupDelay"),10);a.tt_popupDelay=isNaN(b)?o.popupDelay:b;var c=t("Placement");a.tt_placement=angular.isDefined(c)?c:o.placement;var d=t("Theme");a.tt_theme=angular.isDefined(d)?d:o.theme,D(t("Trigger")),c=t("AppendToBody"),y=angular.isDefined(c)?h(c)(a):y}var v,w,x,y=angular.isDefined(o.appendToBody)?o.appendToBody:!1,z=n(void 0),A=angular.isDefined(d[l+"Enable"]),B=function(){var c=j.positionElements(b,v,a.tt_placement,y);c.top+="px",c.left+="px",v.css(c)};a.tt_isOpen=!1,d.$observe(e,function(b){a.tt_content=b,!b&&a.tt_isOpen&&q()}),d.$observe(l+"Title",function(b){a.tt_title=b}),d.$observe(l+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:o.placement}),d.$observe(l+"Theme",function(b){a.tt_theme=angular.isDefined(b)?b:o.theme}),d.$observe(l+"PopupDelay",function(b){var c=parseInt(b,10);a.tt_popupDelay=isNaN(c)?o.popupDelay:c});var C=function(){b.unbind(z.show,k),b.unbind(z.hide,m)},D=function(a){C(),z=n(a),z.show===z.hide?b.bind(z.show,f):(b.bind(z.show,k),b.bind(z.hide,m))};d.$observe(l+"Trigger",D);var E=a.$eval(d[l+"Animation"]);a.tt_animation=angular.isDefined(E)?!!E:o.animation,d.$observe(l+"AppendToBody",function(b){y=angular.isDefined(b)?h(b)(a):y}),y&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&q()}),a.$on("$destroy",function(){g.cancel(w),g.cancel(x),C(),s()}),u()}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&",theme:"@"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&",theme:"@"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("grace.bootstrap.grid",["grace.bootstrap.pagination","grace.bootstrap.tooltip","grace.bootstrap.bindHtml","grace.bootstrap.position","grace.bootstrap.dataFormatter","grace.bootstrap.bindTemplate"]).constant("gridConstant",{rowHeight:30,headerRowHeight:30,minColumnWidth:50,minBodyHeight:200,enablePagination:!0,enableSort:!1,enableFilter:!1,enableScreen:!1,screenConfig:{screenLabel:"显示/隐藏:",type:"in-line",dropDownWidth:300,dropDownColumnCount:3},enablePinning:!1,enableSelection:!1,enableSelectionMulti:!1,selectionConfig:{checkboxSelect:!0,checkboxSelectWidth:35,pinned:!1},expandableTable:!1,expandingConfig:{remote:!0},enableColumnResize:!1,enableTooltip:!1,paginationConfig:{enableSetRefresh:!1,pageIcon:!1,pageSize:10,paginationSize:5,pageSizes:[10,20,50,100],firstText:"首页",previousText:"上一页",nextText:"下一页",lastText:"尾页"},useRemoteData:!1,ajaxConfig:{dataType:"json",method:"get"},pageSize:10,paginationSize:5,emptyPlaceHolder:"-",tooltipConfig:{place:"bottom",append2Body:!0,showDelay:0,animation:!1},enableInfiniteScroll:!1,infiniteScrollConfig:{iStep:5},lockHeader:!1,lockHeaderType:"normal",enableSearchAll:!1,searchAllConfig:{columnsPass:null},enableAutoResize:!1,enableRowDragging:!1,dataEmptyText:"没有相关数据",loadingText:"正在加载数据...",columnClassPrefix:"grid-column",simpleMode:!1,enableSelectAll:!1,selectAllConfig:{tipsBeforeCheck:"已选中本页{selectedCount}条记录,选中全部{totalCount}条记录",tipsAfterCheck:"已选中所有{totalCount}条记录，取消选择所有记录"}}).controller("gridController",["$scope","$document","gridConstant","gridHeaderService","gridBodyService","gridUtil","$timeout","GridApi","$http",function(a,b,c,d,e,f,g,h,i){function j(b,c){b.forEach(function(b){if(b.rowInfo.visible=c,b.rowInfo.hasChildren&&b.rowInfo.children&&b.rowInfo.children.length){b.rowInfo.expanded=c;var d=a.bodyInfo.rowsChildrenMap;j(d[b.rowInfo.rowId],c)}})}function k(){var b=a.headerInfo,c=b.columnsByDepth,d=a.bodyInfo,g=d.rows,h=d.rowsChildrenMap;if(b.columns2Render=f.copy2DArray(c),a.expandableTable){var i={};for(var j in h)i[j]=e.copyBody(h[j]);d.rowsChildrenMap2Render=i,g=g.filter(function(a){return 0==a.rowInfo.depth})}d.rows2Render=e.copyBody(g)}function l(){e.mergeRows2Render(a.bodyInfo)}function m(){var b=a.bodyInfo;if(a.enableInfiniteScroll)var c=b.rows2RenderCache;else var c=b.rows2Render;for(var d,e=!0,f=0;d=c[f];f++)if(!d.rowInfo.selected){e=!1;break}return e}var n=this;a.gridId=f.newId(),a.$watch("gridOptions",function(a){a&&(f.isEmptyObj(a)||n.update(a))}),n.scope=a,n.gridApi=new h;var o=f.browserType;a.IE=f.browserType.ie,b.on("grace.grid.resize",function(){n.gridApi&&n.gridApi.resize()}),a.ieCompensation=a.IE?1:0,a.compensation=o.ie&&2||o.chrome&&1||o.safari&&1||o.firefox&&2,a.showScroller=!1,a.isDraggingMode=!1,a.valueParse=function(a,b){return a+="","auto"==a||-1!=a.indexOf("%")||-1!=a.indexOf("px")?a:a?a+(b||"px"):0},n.updateBody=function(){a.bodyInfo=e.createBody(n.options.gridData,a),a.bodyInfo.totalWidth=a.headerInfo.totalWidth,n.applyCurrentData()};var p=!1;n.update=function(b){n.options=b,a.simpleMode=b.simpleMode||c.simpleMode,a.rowHeight=b.rowHeight||c.rowHeight,a.headerRowHeight=b.headerRowHeight||c.headerRowHeight,a.minColumnWidth=b.minColumnWidth||c.minColumnWidth,a.enableRowDragging=void 0!==b.enableRowDragging?b.enableRowDragging:c.enableRowDragging,a.dataEmptyText=b.dataEmptyText||c.dataEmptyText,b.gridData=b.gridData||[],a.gridDataEmpty=!b.async&&!b.gridData.length,a.loadingText=b.loadingText||c.loadingText,a.enableAutoResize=void 0!==b.enableAutoResize?b.enableAutoResize:c.enableAutoResize,a.enableAutoResize&&(window.removeEventListener("resize",q,!1),window.addEventListener("resize",q,!1)),a.emptyPlaceHolder=void 0!=b.emptyPlaceHolder?b.emptyPlaceHolder:c.emptyPlaceHolder,a.enableInfiniteScroll=void 0!==b.enableInfiniteScroll?b.enableInfiniteScroll:c.enableInfiniteScroll,a.enableInfiniteScroll&&(a.infiniteScrollConfig=angular.extend(angular.extend({},c.infiniteScrollConfig),b.infiniteScrollConfig)),a.enablePagination=angular.isDefined(b.enablePagination)?b.enablePagination:c.enablePagination,a.enablePagination&&(a.paginationConfig=angular.extend(angular.extend({},c.paginationConfig),b.paginationConfig)),n.paginationHeightWatcher&&n.paginationHeightWatcher(),a.enablePagination&&(n.paginationHeightWatcher=a.$watch(function(){return n.getPaginationHeight&&n.getPaginationHeight()},function(b){b=b||0,a.paginationHeight=b})),a.enableSelectAll=void 0!==b.enableSelectAll?b.enableSelectAll:c.enableSelectAll,a.enableSelectAll&&(a.selectAllConfig=angular.extend(angular.extend({},c.selectAllConfig),b.selectAllConfig)),a.useRemoteData=void 0!==b.useRemoteData?b.useRemoteData:c.useRemoteData,a.useRemoteData&&(a.ajaxConfig=angular.extend(angular.extend({},c.ajaxConfig),b.ajaxConfig)),a.enableSort=angular.isDefined(b.enableSort)?b.enableSort:c.enableSort,a.enableFilter=angular.isDefined(b.enableFilter)?b.enableFilter:c.enableFilter,a.enableScreen=angular.isDefined(b.enableScreen)?b.enableScreen:c.enableScreen,n.screenerHeightWatcher&&n.screenerHeightWatcher(),a.enableScreen&&(a.screenConfig=angular.extend(angular.extend({},c.screenConfig),b.screenConfig),n.screenerHeightWatcher=a.$watch(function(){return n.getScreenerHeight&&n.getScreenerHeight()},function(b){b=b||0,a.screenerHeight=b})),a.enablePinning=angular.isDefined(b.enablePinning)?b.enablePinning:c.enablePinning,a.enableSelection=angular.isDefined(b.enableSelection)?b.enableSelection:c.enableSelection,a.enableSelectionMulti=angular.isDefined(b.enableSelectionMulti)?b.enableSelectionMulti:c.enableSelectionMulti,a.enableSelection&&(a.selectionConfig=angular.extend(angular.extend({},c.selectionConfig),b.selectionConfig),b.columnsDef&&a.selectionConfig.checkboxSelect&&"rowSelector"!=b.columnsDef[0].columnType&&b.columnsDef.unshift({columnType:"rowSelector",field:"rowSelector",width:a.selectionConfig.checkboxSelectWidth,pinned:a.selectionConfig.pinned})),a.expandableTable=angular.isDefined(b.expandableTable)?b.expandableTable:c.expandableTable,a.expandableTable&&(a.expandingConfig=angular.extend(angular.extend({},c.expandingConfig),b.expandingConfig)),a.groupingMode=a.expandableTable,a.tooltipConfig=angular.extend(angular.extend({},c.tooltipConfig),b.tooltipConfig),a.enableColumnResize=angular.isDefined(b.enableColumnResize)?b.enableColumnResize:c.enableColumnResize,a.lockHeader=angular.isDefined(b.lockHeader)?b.lockHeader:c.lockHeader,a.lockHeaderType=angular.isDefined(b.lockHeaderType)?b.lockHeaderType:c.lockHeaderType,a.lockHeader&&"top"==a.lockHeaderType?a.lockHeader2Top():a.unlockHeader2Top(),a.enableSearchAll=angular.isDefined(b.enableSearchAll)?b.enableSearchAll:c.enableSearchAll,a.enableSearchAll&&(a.searchAllConfig=angular.extend(angular.extend({},c.searchAllConfig),b.searchAllConfig)),a.gridWidthWatcher&&a.gridWidthWatcher(),a.gridWidthWatcher=a.$watch(function(){return a.IE?a.gridWrapperEl.parent()[0].offsetWidth:parseFloat(f.getStyles(a.gridWrapperEl.parent()).width.replace("px",""))},function(a){a=a||0,0!=a&&n.setGridWidth(a)}),a.headerInfo=d.createHeader(b.columnsDef||[],a),a.bodyInfo=e.createBody(b.gridData||[],a),g(function(){a.headerData=a.headerInfo.columns2Render,a.bodyData=a.bodyInfo.rows2Render,a.bodyInfo.height="auto"==a.gridHeight?"auto":Math.max(a.gridHeight-a.headerInfo.height,c.minBodyHeight),a.enableInfiniteScroll&&"auto"==a.bodyInfo.height&&(a.bodyInfo.height=c.minBodyHeight),a.bodyInfo.totalWidth=a.headerInfo.totalWidth,a.headerInfo.totalWidth>a.gridWidth?(a.showScroller=!0,"windows"==f.osType&&"auto"!=a.gridHeight&&(a.gridHeight=a.getViewPortInfo().height+f.getScrollBarInfo().horizontalBarHeight)):a.showScroller=!1,n.applyCurrentData(),p?(h.update(n.gridApi,n),a.$broadcast("dataUpdate"),g(function(){n.gridApi.event.trigger("dataUpdate",[])},0)):(g(function(){h.update(n.gridApi,n),b.onReady&&b.onReady(n.gridApi)},0),p=!0)},0)};var q=f.delayExe(function(){0!=a.gridContainerEl[0].offsetWidth&&n.setGridWidth(a.gridContainerEl[0].offsetWidth)},50);n.setGridWidth=function(b){a.gridWidth=b,a.headerInfo&&(a.headerInfo.viewPortWidth=b,n.resizeAutoWidthColumns())},n.resize=q,n.resizeAutoWidthColumns=function(){d.updateColumnWidth(a.headerInfo),d.computeColumnCss(a.headerInfo,a),a.bodyInfo.totalWidth=a.headerInfo.totalWidth,a.headerInfo.totalWidth>a.gridWidth?(a.showScroller=!0,"windows"==f.osType&&"auto"!=a.gridHeight&&(a.gridHeight=a.getViewPortInfo().height+f.getScrollBarInfo().horizontalBarHeight)):a.showScroller=!1},n.resizeColumn=function(b,c){a.$apply(function(){d.resizeColumn(b,c,a.headerInfo,a),a.bodyInfo.totalWidth=a.headerInfo.totalWidth,a.headerInfo.totalWidth>a.gridWidth?(a.showScroller=!0,"windows"==f.osType&&"auto"!=a.gridHeight&&(a.gridHeight=a.getViewPortInfo().height+f.getScrollBarInfo().horizontalBarHeight)):a.showScroller=!1})},n.addRows2Body=function(b,c,d){var f;return f=a.expandableTable?e.addRows(a,c,b,d):e.addRows(a,c,b,d)},n.delRows=function(b){e.delRows(a,b),n.applyCurrentData(),a.gridDataEmpty=0==a.bodyInfo.rows.length},n.updateRow=function(b,c,d){e.updateRow(a,b,c,d),n.selectAll(null,{selectOrUnSelect:!1}),n.applyCurrentData()},n.groupExpand=function(b,c){var d=a.bodyInfo.rowsChildrenMap;if(b.rowInfo.expanded=!0,d[b.rowInfo.rowId])return d[b.rowInfo.rowId].forEach(function(a){a.rowInfo.visible=!0}),void(c&&c());var e=a.expandingConfig;i({method:"get",dataType:"json",url:e.dataUrl,params:e.paramParser(b.rowInfo.rawData)}).success(function(d){d=e.resultParser(d);var f=n.addRows2Body(b.rowInfo.originalRowIndex+1,d,b);a.bodyInfo.rowsChildrenMap[b.rowInfo.rowId]=f,c&&c()})},n.groupCollapse=function(b,c){var d=a.bodyInfo.rowsChildrenMap[b.rowInfo.rowId];b.rowInfo.expanded=!1,d&&d.length&&j(d,!1),c&&c()},n.groupCollapseRows=function(a,b){for(var c,d=0;c=a[d];d++)n.groupCollapse(c);b&&b()},n.applyCurrentData=function(){k(),a.enableSearchAll&&n.searchAll&&n.searchAll(a.searchAllKeywords),a.enableFilter&&n.filtering&&n.filtering(a),a.enableSort&&n.sorting&&n.sorting(a),a.enablePagination&&n.paging&&n.paging(a),a.expandableTable&&l(),a.enableScreen&&n.screening&&n.screening(a),a.enablePinning&&n.pinning&&n.pinning(a),a.isAllRecordsSelected&&n.selectAll&&n.selectAll(null,{selectOrUnSelect:!0}),a.enableInfiniteScroll&&n.infiniteScrollStart&&n.infiniteScrollStart()},n.searchAll=function(b){function c(a){var d=/<.*?>|<\s*\/.*?>/g;return a.filter(function(a){for(var e,j=!1,k=0;e=a[k];k++)if(!(i.columnsPass&&i.columnsPass.indexOf(e.field)>=0))switch(e.type){case"html":-1!=e.content.replace(d,"").indexOf(b)&&(j=!0,k=a.length);break;case"button":break;default:-1!=(e.content+"").indexOf(b)&&(j=!0,k=a.length)}if(h){var l=a.rowInfo;l.children&&l.children.length&&(g[l.rowId]||(g[l.rowId]=!0,f[l.rowId]=c(f[l.rowId]),f[l.rowId].length&&(j=!0)))}return j})}if(b&&b.trim()){var d=a.bodyInfo,e=d.rows2Render,f=d.rowsChildrenMap2Render,g={},h=a.expandableTable,i=a.searchAllConfig;d.rows2Render=c(e)}},a.$on("selectAll",function(){n.selectAll.apply(null,arguments),a.enableSelectAll&&(arguments[1].selectOrUnSelect?n.showSelectAllTip():n.hideSelectAllTip())}),a.$on("selectOne",function(b,c){if(a.enableSelectionMulti){var d=c.selectOrUnSelect,e=a.headerInfo,f=e.columns,g=f[0];"rowSelector"==g.columnType&&(d||(g.isAllSelected=!1,a.enableSelectAll&&n.hideSelectAllTip()),g.isAllSelected=m())}}),n.gridApi.event.on("paging",function(){if(a.enableSelectionMulti&&0==a.useRemoteData){var b=a.headerInfo.columns,c=b[0];c.isAllSelected=m()}})}]).directive("graceGrid",["$window","gridUtil","$position",function(a,b,c){return{restrict:"EA",priority:1,replace:!0,controller:"gridController",templateUrl:"template/grid/grid.html",scope:{gridOptions:"="},compile:function(){return{pre:function(a,c,d){function e(){var a=b.getStyles(c),d=parseFloat(a.height.replace("px",""))||"auto",e=parseFloat(a.width.replace("px",""))||"auto";return d>=0&&c[0].clientHeight<=50&&(d="auto"),{width:e,height:d}}var f=angular.element,g=e();a.gridWidth=g.width,a.gridHeight=g.height,a.getViewPortInfo=e,a.getBodyHeight=function(){var a=c[0].querySelector("section");return a?parseFloat(b.getStyles(f(a)).height.replace("px",""))||"auto":0},a.gridWrapperEl=f(c[0].querySelector(".grace-grid-wrapper")),a.gridContainerEl=c},post:function(d,e,f,g){function h(e){m||(m=c.offset(l));var f=d.IE?document.documentElement.scrollTop:a.scrollY,g=m.top;l.css(f>g?b.cssFixer("transform","translateY("+(f-g)+"px) scale3d(1,1,1)"):b.cssFixer("transform","translateY(0px) scale3d(1,1,1)"))}{var i=e[0],j=(angular.element,i.querySelector(".grace-grid-wrapper")),k=i.querySelector("header"),l=angular.element(k);angular.element(j)}j.addEventListener("scroll",function(a){var c=j.scrollLeft,e=j.scrollTop,f=angular.element(j.querySelector(".pinning-header")),g=angular.element(j.querySelector(".pinning-body")),h=(angular.element(j.querySelector(".grace-grid-selectall-cnt")),b.cssFixer("transform","translateX("+c+"px) scale3d(1,1,1)"));f.css(h),g.css(h),d.lockHeader&&"normal"===d.lockHeaderType&&l.css(b.cssFixer("transform","translateY("+e+"px) scale3d(1,1,1)"))},!1);var m=null;d.lockHeader2Top=function(){d.unlockHeader2Top(),a.addEventListener("scroll",h,!1)},d.unlockHeader2Top=function(){a.removeEventListener("scroll",h,!1)}}}}}}]).directive("graceGridStyle",["gridUtil","$interpolate",function(a,b){return{link:function(a,c,d,e){var f=b(c.text(),!0);f&&a.$watch(f,function(a){c.text(a)})}}}]),angular.module("grace.bootstrap.grid").factory("GridApi",function(){function a(){this.eventHandlers={}}function b(){this.event=new a}return a.prototype.on=function(a,b,c){var d=this.eventHandlers[a];!d&&(d=this.eventHandlers[a]=[]),d.push([b,c])},a.prototype.off=function(a,b){var c=this.eventHandlers[a];if(c)for(var d,e=0;d=c[e];e++)d[0]===b&&(c.splice(e,1),e--)},a.prototype.trigger=function(a,b){var c=this.eventHandlers[a];if(c)for(var d,e=0;d=c[e];e++)d[0].apply(d[1],b)},b.update=function(a,b){var c=b.scope;c.expandableTable&&(a.groupExpand=b.groupExpand,a.groupCollapse=b.groupCollapse,a.groupExpandAll=function(){for(var d,e=c.bodyInfo.rows2Render.filter(function(a){return 1==a.rowInfo.hasChildren}),f=e.length,g=0;d=e[g];g++)b.groupExpand(d,function(){--f||(b.applyCurrentData(),a.event.trigger("afterExpandAllRows",[]))}),a.event.trigger("expandAllRows",[])},a.groupCollapseAll=function(){var d=c.bodyInfo.rows2Render.filter(function(a){return 0==a.rowInfo.depth});b.groupCollapseRows(d,function(){b.applyCurrentData(),a.event.trigger("collapseAllRows",[])})}),a.addRows=function(a,d){d=d||0,a instanceof Array||(a=[a]),b.addRows2Body(d,a),b.applyCurrentData(),c.gridDataEmpty=!1},a.delRows=function(a){a instanceof Array||(a=[a]),b.delRows(a),c.$broadcast("deleteRows",a)},a.updateRow=b.updateRow,c.enableScreen&&(a.showColumn=function(a){var d=c.headerInfo.columnsMap[a];d.visible||(d.visible=!0,b.applyCurrentData())},a.hideColumn=function(a){var d=c.headerInfo.columnsMap[a];d.visible&&(d.visible=!1,b.applyCurrentData())}),c.enableSearchAll&&(a.searchAll=function(a){c.searchAllKeywords=a,b.applyCurrentData()},a.clearSearch=function(){c.searchAllKeywords=void 0,b.applyCurrentData()}),c.enableSelection&&(a.getSelectedData=function(){return"function"==typeof b.getSelectedRowDatas?b.getSelectedRowDatas():[]},a.getSelectedRowIndexes=function(){return"function"==typeof b.getSelectedRowIndexes?b.getSelectedRowIndexes():[]},a.selectOne=function(a,c){"function"==typeof b.rowSelectCheck&&b.rowSelectCheck(a,c)},
a.clearAllSelected=function(){b.selectAll(null,{selectOrUnSelect:!1})}),c.enableSort&&(a.sort=function(a,c,d){b.sortingExposed(a,c)}),c.enablePinning&&(a.pinning=function(a){b.pinningExposed(a)}),c.enableRowDragging&&(a.draggingMode=function(a){return void 0!==a&&(c.isDraggingMode=!!a),c.isDraggingMode}),c.useRemoteData&&(a.reload=function(a){b.reloadCurrentPage(a),c.$broadcast("gridReload",{type:"apiReload"})}),c.enablePagination&&(a.toPage=function(a){var c=b.pageCount();if("first"==a)b.toPage(1);else if("last"==a)b.toPage(c);else{if(1>a||a>c||!/^\d+$/.test(a+""))return;b.toPage(a)}},a.pageCount=b.pageCount,a.curPageIndex=b.curPageIndex,a.nextPage=function(){a.toPage(+b.curPageIndex()+1)},a.prePage=function(){a.toPage(+b.curPageIndex()-1)}),a.getGridData=function(){for(var a,b=c.bodyInfo,d=b.rows,e=[],f=0;a=d[f];f++)e.push(a.rowInfo.rawData);return e},a.getCurrentPageData=function(){for(var a,b=c.bodyInfo,d=b.rows2Render,e=[],f=0;a=d[f];f++)e.push(a.rowInfo.rawData);return e},a.setGridWidth=function(a,d){1==d?(/^\d+$/.test(a+"")&&(a+="px"),c.gridContainerEl.css("width",a)):b.setGridWidth(a)},a.resize=function(){b.resize()},a.getRowDataByIndex=function(a){return c.bodyInfo.rows[a].rowInfo.rawData},a.getRowData=function(a,b){var d=c.bodyInfo,e=d.rows;1==arguments.length&&(b=a,a="id");for(var f,g=0;f=e[g];g++){var h=f.rowInfo.rawData;if(h[a]===b)return h}},a.switchRow=function(a,c){b.switchRow(a,c)},a.moveRowTo=function(a,d){0>d&&(d=0);var e=c.bodyInfo,f=e.rows2Render,g=f[0].rowInfo.originalRowIndex,h=f[f.length-1].rowInfo.originalRowIndex;return d+="",/^\d+$/.test(d)?(d=parseInt(d),g>d&&(d=g),d>h&&(d=h),b.moveRowTo(a,d)):"top"==d?b.moveRowTo(a,g):"bottom"==d?b.moveRowTo(a,h):void 0}},b}),angular.module("grace.bootstrap.grid").factory("gridRowFactory",function(){var a={},b={rowId:"",visible:!0};return a.copy=function(a){var b=[].concat(a);return b.rowInfo=a.rowInfo,b},a.create=function(a,c){var d=[];return c&&(d=d.concat(c)),d.rowInfo=angular.extend(angular.extend({},b),a),d},a}).factory("gridBodyService",["$gDataFormatterFactory","gridUtil","gridRowFactory","gridConstant",function(a,b,c,d){function e(d,e,f,g){for(var i,j=0;i=d[j];j++)"rowIndex"==i.columnType&&(e.rowIndex=g.bodyInfo.rows.length);var k=c.create(f);k.rowInfo.rawData=e;for(var l,m=0;l=d[m];m++){var n=angular.copy(h);n.content=e[l.field],n.displayContent="string"==typeof l.formatter?a(n.content,l.formatter):"function"==typeof l.formatter?l.formatter(n.content,e):n.content,n.type=l.columnType||"normal",n.editable=l.editable||!0,"normal"==n.type&&(n.editable=!1,n.displayContent=n.displayContent,n.displayContent||0===n.displayContent||(n.displayContent=g.emptyPlaceHolder)),"select"==n.type&&(n.selectModel=l.selectModel,n.selectModel.length||n.selectModel.push({value:n.content,displayValue:n.content})),("check"==n.type||"rowSelector"==n.type)&&("function"!=typeof g.gridOptions.beforeSelection||g.gridOptions.beforeSelection(e)||"rowSelector"!=n.type?n.displayContent=!!n.content:(n.type="normal",n.displayContent="")),"rowIndex"==n.type&&(n.displayContent=g.bodyInfo.rows.length+1),l.enableTooltip&&(n.tooltip=l.tooltiper?l.tooltiper(e):n.displayContent,n.enableTooltip=!0),n.width=l.drawnWidth,n.originalColumnIndex=m,n.field=l.field,n.cellId=b.newId(),n.columnId=l.columnId,n.columnClasses=l.columnClasses,k.push(n)}return k}function f(a,b,c){var d=[];b=b||0;for(var e,g,h=0;g=a[h];h++)g.$depth=b,c&&(g.$parent=c),d.push(g),g.$hasChildren&&g.$children&&g.$children.length&&(e=f(g.$children,b+1,g),d=d.concat(e));return d}var g={},h={content:"",displayContent:"",width:100,visible:!0};return g.copyBody=function(a){for(var b=[],d=0,e=a.length;e>d;d++){var f=a[d],g=c.copy(f);g.rowInfo.visible&&b.push(g)}return b},g.copy2Render=function(a){var b=a.rows,c=a.rowsChildrenMap;a.rows2Render=g.copyBody(b);var d={};for(var e in c)d[e]=g.copyBody(c[e]);a.rowsChildrenMap2Render=d},g.mergeRows2Render=function(a){for(var b,c=a.rows2Render,d=a.rowsChildrenMap2Render,e=0;b=c[e];e++){var f=d[b.rowInfo.rowId];if(f){{f.length}f=[].concat(f),f.unshift(0),f.unshift(e+1),c.splice.apply(c,f)}}},g.delRows=function(a,b){var c,d=a.bodyInfo.rows.slice(0),e=a.gridOptions.gridData.slice(0),f=a.bodyInfo.rows,g=a.gridOptions.gridData,h=!1,i=!1;for(var j in a.headerData)for(var k in a.headerData[j])if("rowIndex"==a.headerData[j][k].columnType){h=!0;break}if(h)for(var l=b[0]||0,m=0,n=d[l].length;n>m;m++)if("rowIndex"==d[l][m].type&&d[l][m].displayContent==l+1){i=!0;break}b.forEach(function(a){c=f.indexOf(d[a]),f.splice(c,1),c=g.indexOf(e[a]),g.splice(c,1)}),f.forEach(function(a,b){var c;a.rowInfo.originalRowIndex=b,c=i?b+1:f.length-b,h&&a.forEach(function(a,b){"rowIndex"==a.type&&(a.displayContent=c)})})},g.updateRow=function(a,b,c,d){for(var e,f,h=a.gridOptions.gridData,i=0;f=h[i];i++)if(f[c]==d){e=i;break}if(void 0!=e){var j=h[i];angular.extend(j,b),g.delRows(a,[e]),g.addRows(a,[j],e)}},g.addRows=function(a,c,d,g){var h=a.bodyInfo.rows,i=a.headerInfo.columns,j=a.gridOptions.gridData,k=a.expandableTable;k&&(g.rowInfo.children=c,c=f(c,g.rowInfo.depth+1,g));for(var l=h.length-1,m=c.length;l>=d;)h[l--].rowInfo.originalRowIndex+=m;for(var n,o=[],p=0;n=c[p];p++){var q={},r=d+p;q.originalRowIndex=r,q.rowId=b.newId(),k&&(q.hasChildren=n.$hasChildren||!1,q.children=n.$children,q.depth=n.$depth,q.parent=n.$parent);var s=e(i,n,q,a);h.splice(r,0,s),j.splice(r,0,n),o.push(s)}return o},g.createBody=function(a,c){function d(j,k,l){k=k||0;for(var m,n=[],o=0;m=j[o];o++){var p={rowId:b.newId(),visible:!0,originalRowIndex:i++,parent:l,depth:k,hasChildren:m.$hasChildren||!1,expanded:!1};h&&m.$hasChildren&&m.$children&&m.$children.length&&(a.splice.apply(a,[i,0].concat(m.$children)),o+=m.$children.length,p.children=d(m.$children,k+1,m),p.expanded=!0,f.rowsChildrenMap[p.rowId]=p.children);var q=e(g,m,p,c);n.push(q),h&&p.children&&(n=n.concat(p.children))}return n}var f={rows:[],rowsChildrenMap:{}},g=c.headerInfo.columns,h=c.expandableTable,i=0;return f.rows=d(a,0,0),f},g}]).controller("graceGridBodyController",["$scope",function(a){}]).directive("graceGridBody",["gridUtil","$position","$compile",function(a,b,c){return{restrict:"EA",replace:!0,require:["^graceGrid","graceGridBody"],templateUrl:"template/grid/gridBody.html",controller:"graceGridBodyController",scope:{bodyData:"="},compile:function(c,d){return{pre:function(a,b,c,d){},post:function(c,d,e,f){function g(a){return a=a.originalEvent||a,a.pageY}function h(b){var d=g(b),e=d-A;if(H.css(a.cssFixer({transform:"translateY("+e+"px)"})),c.gridScope.IE){for(var f,h=-1;(f=N[++h])&&!(d>=f[0]&&d<f[1]););K=h}b.preventDefault()}function i(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function j(a,b,c){var d=a[b].rowInfo.originalRowIndex;a[b].rowInfo.originalRowIndex=a[c].rowInfo.originalRowIndex,a[c].rowInfo.originalRowIndex=d}function k(a,b,c){if(a&&a.length){var d=a.splice(b,1)[0];return a.splice(c,0,d),d}}function l(a,b){var d,e=c.gridScope.bodyInfo.rows;if(b=parseInt(b),a==b)return b;if(b>a)for(var f=a+1;b>=f;f++)-1!=(d=w.indexOf(e[f].rowInfo.originalRowIndex))&&w[d]--,e[f].rowInfo.originalRowIndex--;else for(var f=b;a>f;f++)-1!=(d=w.indexOf(e[f].rowInfo.originalRowIndex))&&w[d]++,e[f].rowInfo.originalRowIndex++;return-1!=(d=w.indexOf(a))&&(w[d]=b),k(e,a,b).rowInfo.originalRowIndex=b,k(c.gridScope.bodyInfo.rows2Render,a,b),k(c.gridScope.bodyInfo.rows2Pinning,a,b),b}function m(a,b){var d=c.gridScope.bodyInfo.rows;i(d,a,b),j(d,a,b),d=c.gridScope.bodyInfo.rows2Render,i(d,a,b),d=c.gridScope.bodyInfo.rows2Pinning,i(d,a,b)}function n(b){l(J,K),H.css({position:"relative",zIndex:"0","pointer-events":"auto"}).css(a.cssFixer({transform:"translateY(0)"})),C&&C.remove(),E&&E.remove(),F&&F.remove(),G&&G.remove(),y(document.body).unbind("mousemove",h),y(document.body).unbind("mouseup",n),d.find("tr").unbind("mouseover",o)}function o(a){for(var b=a.target;"TR"!=b.tagName;)b=b.parentElement;K=b.getAttribute("tr-index"),K||(K=J)}function p(e,f,i){function j(a,c){var d=b.offset(y(a));N[c]=[d.top,d.top+d.height]}z=!0,A=g(f),K=J=i,B=y(d[0].querySelector(".pinning-body tr:nth-child("+(i+1)+")")),D=y(d[0].querySelector(".normal-body tr:nth-child("+(i+1)+")")),H=y(d[0].querySelectorAll("tr:nth-child("+(i+1)+")")),c.gridScope.IE&&(M=y(document.querySelectorAll(".normal-body tr")),L=y(document.querySelectorAll(".pinning-body tr")),N=[],a.forEach(M,j),N.length||a.forEach(L,j)),I=d.find("tr");var k=c.gridScope.headerInfo,l=k.columns2Pinning[0]&&k.columns2Pinning[0].length||0,m=k.columns.length-l;B[0]&&(C=y('<tr><td colspan="'+l+'" ></td></tr>'),C.css({width:B[0].offsetWidth+"px",height:B[0].offsetHeight+"px"}),B.css({position:"absolute",zIndex:10,"pointer-events":"none"}),F=y('<tr style="display: none;" ></tr>'),B.after(C).after(F)),D[0]&&(E=y('<tr><td colspan="'+m+'" ></td></tr>'),E.css({width:D[0].offsetWidth+"px",height:D[0].offsetHeight+"px"}),D.css({position:"absolute",zIndex:10,"pointer-events":"none"}),G=y('<tr style="display: none;" ></tr>'),D.after(E).after(G)),y(document.body).bind("mousemove",h),y(document.body).bind("mouseup",n),c.gridScope.IE||d.find("tr").bind("mouseover",o)}function q(a){return y(a.target||a.srcElement||a.toElement)}function r(a,b){var d,e=v.bodyInfo,f=e.rows[a],g=f.rowInfo.originalRowIndex,h=w.indexOf(g);if(d=f.rowInfo.selected=void 0!==b?b:!f.rowInfo.selected,"rowSelector"==f[0].type&&(f[0].displayContent=f.rowInfo.selected),-1!=h)w.splice(h,1),x.splice(h,1),c.$emit("selectOne",{selectOrUnSelect:!1});else if(d&&-1==h){if(v.enableSelectionMulti)w.push(g),x.push(f.rowInfo.rawData);else{var i=w[0];if(void 0!=i){var j=e.rows[i];"rowSelector"==j[0].type&&(j[0].displayContent=!1),j.rowInfo.selected=!1}w[0]=g,x[0]=f.rowInfo.rawData}c.$emit("selectOne",{selectOrUnSelect:!0})}}var s=f[0],t=f[1],u=s.gridApi,v=s.scope,w=[],x=[];s.getSelectedRowIndexes=function(){return w},s.getSelectedRowDatas=function(){return x};var y=angular.element;c.gridScope=s.scope,c.$on("dataUpdate",function(){w=[],x=[]}),c.$on("deleteRows",function(a,b){w=[],x=[]}),"auto"==c.gridScope.rowHeight&&(c.rowHeightWatcher&&c.rowHeightWatcher(),c.rowHeightWatcher=c.$watch(function(){function a(a,c){b+=a.offsetHeight+","}L=y(document.querySelectorAll(".pinning-body tr")),M=y(document.querySelectorAll(".normal-body tr"));var b="";return angular.forEach(L,a),b=b.substr(0,b.length-1)+"_",angular.forEach(M,a),b=b.substr(0,b.length-1)},function(b){function c(a,b){var c=Math.max(d[b]||0,e[b]||0);a.offsetHeight<c&&(a.style.height=c+"px")}if(b){L=y(document.querySelectorAll(".pinning-body tr")),M=y(document.querySelectorAll(".normal-body tr")),b=b.split("_");var d=b[0].split(","),e=b[1].split(",");a.forEach(L,c),a.forEach(M,c)}}),c.$on("$destroy",function(){c.rowHeightWatcher()})),t.expandOrCollapseRow=function(a){v.expandableTable&&a.rowInfo.hasChildren&&(a.rowInfo.expanded?s.groupCollapse(a,function(){s.applyCurrentData(),s.gridApi.event.trigger("collapseRow",[null,a.rowInfo.rawData])}):(s.groupExpand(a,function(){s.applyCurrentData(),s.gridApi.event.trigger("afterExpandRow",[null,a.rowInfo.rawData])}),s.gridApi.event.trigger("expandRow",[null,a.rowInfo.rawData])))};var z=!1,A=0;s.switchRow=m,s.moveRowTo=l;var B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=0,K=0,L=null,M=null,N=null;c.rowClick=function(a,b){var c=q(b);!v.enableSelection||v.isDraggingMode||v.enableSelectionMulti&&"rowSelector"!=c.attr("row-type")||(("function"!=typeof v.gridOptions.beforeSelection||v.gridOptions.beforeSelection(a.rowInfo.rawData,a.rowInfo.originalRowIndex))&&(r(a.rowInfo.originalRowIndex),u.event.trigger(a.rowInfo.selected?"rowSelect":"rowUnSelect",[b,a.rowInfo.originalRowIndex,w,x])),b.stopPropagation())},c.rowMousedown=function(a,b,c){v.isDraggingMode&&p(a,b,c)},s.selectOne=r,s.rowSelectCheck=function(a,b){var c=v.bodyInfo,d=c.rows[a],e=d.rowInfo.originalRowIndex;v.enableSelection&&!v.isDraggingMode&&("function"!=typeof v.gridOptions.beforeSelection||v.gridOptions.beforeSelection(d.rowInfo.rawData,d.rowInfo.originalRowIndex))&&(r(e,b),u.event.trigger(d.rowInfo.selected?"rowSelect":"rowUnSelect",[null,e,w,x]))},s.selectAll=function(a,b){var d=b.selectOrUnSelect,e=c.gridScope,f=e.bodyInfo,g=f.rows;if(e.enableInfiniteScroll)var h=f.rows2RenderCache;else var h=f.rows2Render;d?(h.forEach(function(a){var b=a.rowInfo.originalRowIndex,c=g[b];c.rowInfo.selected=!0,"rowSelector"==c[0].type&&(c[0].displayContent=!0),-1==w.indexOf(b)&&(w.push(b),x.push(c.rowInfo.rawData))}),u.event.trigger("rowSelectAll",[a,w,x])):(h.forEach(function(a){var b=a.rowInfo.originalRowIndex,c=g[b],d=w.indexOf(b);"rowSelector"==c[0].type&&(c[0].displayContent=!1),c.rowInfo.selected=!1,-1!=d&&(w.splice(d,1),x.splice(d,1))}),u.event.trigger("rowUnSelectAll",[a,w,x]))}}}}}}]),angular.module("grace.bootstrap.grid").controller("graceGridBodySimpleController",["$scope","gridUtil",function(a,b){function c(a,b){if("rowSelector"==a.type)return{type:"rowSelector",displayContent:'<i class="grid-check-icon '+(a.displayContent?"grace-icon-check":"grace-icon-unchecked")+'" row-index="'+b+'" ></i>',columnClasses:a.columnClasses};if("buttons"==a.type){for(var c,d="",e=0;c=a.displayContent[e];e++)c.text=c.text||"",d+='<a class="a-button grace-icon-'+c.icon+'" row-index="'+b+'" button-index="'+e+'" field="'+a.field+'"  title="'+c.text+'"  ></a>';return{type:"buttons",displayContent:d,columnClasses:a.columnClasses}}return a}var d=this,e=angular.element,f='<div style="float:left"  ><table class="grace-grid-body" ><tbody></tbody></table></div>',g='<tr class="grace-grid-body-row row-depth{depth} {selected}" >{tdContent}</tr>',h='<td class="grace-grid-cell {columnClasses}" ><div class="cell-content" ><span><span class="cell-content-{type}" >{displayContent}</span></span></div></td>';d.render=function(a,b,c,g){if(a.empty(),b.rows2Pinning&&b.rows2Pinning[0]&&b.rows2Pinning[0][0]){var h=e(f);h.addClass("pinning-body"),h.find("tbody").append(d.buildRows(b.rows2Pinning)),a.append(h)}var i=e(f);i.addClass("normal-body"),i.find("tbody").append(d.buildRows(b.rows2Render)),a.append(i)},d.buildRows=function(a){if(!a)return"";for(var d,e="",f=0;d=a[f];f++){for(var i,j="",k=d.rowInfo.originalRowIndex,l=0;i=d[l];l++)i.visible&&(j+=b.formatStr(h,c(i,k)));e+=b.formatStr(g,{depth:d.rowInfo.depth,tdContent:j,selected:d.rowInfo.selected?"selected":""})}return e}}]).directive("graceGridBodySimple",["gridUtil","$position","$compile","$timeout",function(a,b,c,d){return{restrict:"EA",replace:!0,require:["^graceGrid","graceGridBodySimple"],templateUrl:"template/grid/gridBodySimple.html",controller:"graceGridBodySimpleController",scope:{bodyData:"="},compile:function(b,c){return{pre:function(a,b,c,d){},post:function(b,c,d,e){function f(d,e){var g,h=b.bodyData.rows[d],i=h.rowInfo.originalRowIndex,n=c.find("tbody");g=h.rowInfo.selected=void 0!==e?e:!h.rowInfo.selected,"rowSelector"==h[0].type&&(h[0].displayContent=h.rowInfo.selected);var o=k.indexOf(i);g&&-1==o?(!j.enableSelectionMulti&&k.length&&f(k[0],!1),k.push(i),l.push(h.rowInfo.rawData)):-1!=o&&(k.splice(o,1),l.splice(o,1)),a.forEach(n,function(a){var b=m(a).find("tr").eq(d);b[g?"addClass":"removeClass"]("selected"),g&&b[0]?m(b[0].querySelector(".grace-icon-unchecked")).removeClass("grace-icon-unchecked").addClass("grace-icon-check"):b[0]&&m(b[0].querySelector(".grace-icon-check")).removeClass("grace-icon-check").addClass("grace-icon-unchecked")})}var g=e[0],h=e[1],i=g.gridApi,j=g.scope,k=[],l=[];g.getSelectedRowIndexes=function(){return k},g.getSelectedRowDatas=function(){return l},b.$on("dataUpdate",function(){k=[],l=[]}),b.$on("deleteRows",function(a,b){k=[],l=[]});var m=angular.element;b.gridScope=g.scope,b.$watch(function(){return b.bodyData.rows2Render},function(a){a&&h.render(c,b.bodyData,b.gridScope.headerInfo,b.gridScope)}),c.on("click",function(a){var c=a.target||a.toElement,d=m(c);if(d.hasClass("grid-check-icon")){var e=d.attr("row-index");f(e),i.event.trigger(rowData.rowInfo.selected?"rowSelect":"rowUnSelect",[a,rowData.rowInfo.originalRowIndex,k,l]),b.$emit("selectOne",{selectOrUnSelect:rowData.rowInfo.selected})}else if(d.hasClass("a-button")){var e=d.attr("row-index"),g=d.attr("field"),h=d.attr("button-index");i.event.trigger("buttonClick",[a,b.bodyData.rows[e].rowInfo.rawData,g,h])}}),g.selectOne=f,g.selectAll=function(a,d){var e=d.selectOrUnSelect,g=b.gridScope,h=g.bodyInfo,j=h.rows2Render,m=h.rows;e?(j.forEach(function(a,b){a=m[a.rowInfo.originalRowIndex],"rowSelector"==a[0].type&&(a[0].displayContent=!0),f(b,!0)}),i.event.trigger("rowSelectAll",[a,k,l])):(j.forEach(function(a,b){a=m[a.rowInfo.originalRowIndex],"rowSelector"==a[0].type&&(a[0].displayContent=!1),f(b,!1)}),c.find("tbody tr"),i.event.trigger("rowUnSelectAll",[a,k,l]))}}}}}}]),angular.module("grace.bootstrap.grid").controller("graceGridCellController",["gridConstant",function(a){}]).directive("graceGridCell",["$compile",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/grid/gridCell.html",require:["^graceGrid","^graceGridBody"],scope:{cellData:"=",rowIndex:"="},compile:function(){return{pre:function(b,c,d,e){var f=e[0],g=f.scope.expandableTable,h=f.scope,i='<div class="cell-content" >';g&&(i+='<i class="cell-icon" ng-click="iconClick($event)" ></i>');var j=b.cellData;switch(i+="<span "+(j.enableTooltip?'tooltip="'+j.tooltip+'" tooltip-placement="'+h.tooltipConfig.place+'" tooltip-popup-delay="'+h.tooltipConfig.showDelay+'" tooltip-animation="'+h.tooltipConfig.animation+'" tooltip-append-to-body="'+h.tooltipConfig.append2Body+'"':"")+">",j.type){case"normal":i+='<span  class="cell-content-normal"  >'+j.displayContent+"</span>";break;case"text":i+='<span class="cell-content-text" ><input type="text"ng-model="cellData.displayContent"ng-model-options="{updateOn:\'blur\',debounce:{blur:\'10\'}}"ng-change="contentChange($event,cellData)"ng-click="elClick($event,cellData)"ng-class="{active:cellData.active}"ng-blur="elBlur($event,cellData)"ng-disabled="gridScope.isDraggingMode" /></span>';break;case"check":i+='<span  class="cell-content-check" ><i class="grid-check-icon"ng-class="{\'grace-icon-check\':cellData.displayContent,\'grace-icon-unchecked\':!cellData.displayContent}"ng-click="doCheck($event,cellData)" ></i></span>';break;case"select":i+='<span class="cell-content-select" ><grace-simple-select select-model="cellData.selectModel" select-val="cellData.displayContent" content-change="selectChange" ></grace-simple-select></span>';break;case"rowSelector":i+='<span  class="cell-content-check" ><i row-type="rowSelector" class="grid-check-icon"ng-class="{\'grace-icon-check\':cellData.displayContent,\'grace-icon-unchecked\':!cellData.displayContent}" ></i></span>';break;case"rowIndex":i+='<span  grace-bind-template="cellData.displayContent" class="cell-content-html" ></span>';break;case"date":i+="<span></span>";break;case"button":i+='<span class="cell-content-button" ><button class="'+j.displayContent["class"]+'"ng-click="buttonClick($event,cellData)"ng-disabled="gridScope.isDraggingMode"  >'+j.displayContent.text+"</button></span";break;case"buttons":i+='<span class="cell-content-buttons">';for(var k,l=0;k=j.displayContent[l];l++)i+='<a ng-click="buttonClick($event,cellData,'+l+')"class="grace-icon-'+k.icon+'"ng-disabled="gridScope.isDraggingMode" title="'+k.text+'"  ></a>';i+="</span>";break;case"html":i+='<span  class="cell-content-html" >'+j.displayContent+"</span>";break;case"template":i+='<span  grace-bind-template="cellData.displayContent" class="cell-content-html" ></span>'}i+="</span></div>",c.append(a(i)(b))},post:function(a,b,c,d){var e=d[0],f=d[1],g=e.gridApi,h=e.scope.expandableTable,i=e.scope.bodyInfo;a.gridScope=e.scope,a.iconClick=function(b){a.gridScope.isDraggingMode||(b.stopPropagation(),h&&f.expandOrCollapseRow(i.rows[a.rowIndex]))},a.elBlur=function(a,b){b.active=!1},a.selectionClick=function(a){a.stopPropagation()},a.elClick=function(a,b){a.stopPropagation(),b.editable&&(b.active=!0)},a.contentChange=function(b,c){switch(c.type){case"text":c.content=c.displayContent,i.rows[a.rowIndex].rowInfo.rawData[c.field]=c.displayContent,g.event.trigger("contentEdit",[b,a.rowIndex,c.field,c.displayContent]);break;case"select":g.event.trigger("contentEdit",[b,a.rowIndex,c.field,c.displayContent])}},a.selectChange=function(b,c,d){var e=a.cellData;e.content=c,e.displayContent=c,i.rows[a.rowIndex].rowInfo.rawData[e.field]=e.displayContent,g.event.trigger("contentEdit",[b,a.rowIndex,e.field,e.displayContent])},a.buttonClick=function(b,c,d){b.stopPropagation(),g.event.trigger("buttonClick",[b,a.rowIndex,c.field,d])},a.doCheck=function(b,c){a.gridScope.isDraggingMode||(b.stopPropagation(),c.displayContent=!c.displayContent,g.event.trigger("checkStatusChange",[b,a.rowIndex,c.field,c.displayContent]))}}}}}}]),angular.module("grace.bootstrap.grid"),angular.module("grace.bootstrap.grid").factory("gridHeaderService",["gridConstant","gridUtil",function(a,b){function c(c,d){for(var e,f=c.columns,g=[],h=0;e=f[h];h++)g.push(b.formatStr(".grid{1} .{2}{3}{width:{4}px}\n.grid{1} .{2}{3} .cell-content{width:{5}px;}",d.gridId,a.columnClassPrefix,e.columnId,e.drawnWidth,e.drawnWidth-1));c.columnCss=g.join("\n")}function d(a,b,e,f){var g=a.drawnWidth+b;if(g<a.minWidth){var h=a.drawnWidth;a.drawnWidth=a.minWidth,b=a.drawnWidth-h}else a.drawnWidth=g;a.parent?d(a.parent,b,e,f):(c(e,f),e.totalWidth+=b)}function e(a){for(var b,c=0,d=a.length;b=a[--d];)c+=b.drawnWidth;return c}function f(b){if(b.autoWidthColumns.length){var c=e(b.givenWidthColumns.filter(function(a){return a.visible})),d=b.autoWidthColumns.filter(function(a){return a.visible}),f=a.minColumnWidth;f=Math.max((b.viewPortWidth-c)/d.length,f),f=Math.floor(f);for(var g,h=0,i=0;g=d[i];i++)g.drawnWidth=f<g.minWidth?g.minWidth:f,h+=g.drawnWidth;if(b.totalWidth=c+h,b.viewPortWidth>b.totalWidth&&d[0]){var j=Math.floor(b.viewPortWidth-b.totalWidth)-1;d[0].drawnWidth+=j,b.totalWidth+=j}}}function g(c,d,e){for(var f,h=0;f=c[h];h++){var j=f.children;f.children=null;var k=angular.copy(i);k.minWidth=d.minColumnWidth,c.splice(h,1,angular.extend(k,f)),void 0===k.enableResize&&(k.enableResize=d.enableResize),k.drawnWidth="auto"==k.width?"auto":parseFloat(k.width),k.displayName=k.name||k.field,k.sortable=d.enableSort&&1!=k.disableSort,k.columnId=b.newId(),k.columnClasses=a.columnClassPrefix+k.columnId,k.customClasses&&(k.columnClasses+=" "+k.customClasses),k.parent=e,"select"==k.columnType&&(k.selectModel?k.selectModel.forEach(function(a,b,c){"object"!=typeof a&&(c[b]={value:a,displayValue:a})}):k.selectModel=[]),j?(g(j,d,f),k.children=j,k.colspan=0):(d.columns.push(k),d.columnsMap[k.field]=k,k.columnIndex=d.columns.length-1,"auto"==k.drawnWidth?d.autoWidthColumns.push(k):(d.givenWidthColumns.push(k),d.totalWidth+=k.drawnWidth))}}function h(a,b){function c(a,d){var e=0;if(a.children){a.drawnWidth=0,a.colspan=0;for(var f=a.children,g=0;g<f.length;g++){var h=c(f[g],d+1);e+=h.w,a.colspan+=h.cs}a.drawnWidth=e}return a.depth=d,b.totalDepth=Math.max(d,b.totalDepth),!b.columnsByDepth[d-1]&&(b.columnsByDepth[d-1]=[]),b.columnsByDepth[d-1].push(a),{w:a.drawnWidth,cs:a.colspan}}b.totalDepth=0,b.columnsByDepth=[];for(var d,e=0;d=a[e];e++)c(d,1);for(var d,e=0;d=b.columnsByDepth[e];e++)for(var f,g=0;f=d[g];g++)f.rowspan=f.children?f.rowspan:b.totalDepth-f.depth+1}var i={name:"",displayName:"",width:"auto",drawnWidth:100,field:"",colspan:1,rowspan:1,visible:!0},j={};return j.createHeader=function(a,b){var d={totalDepth:0,totalWidth:0,minColumnWidth:b.minColumnWidth,viewPortWidth:b.gridWidth,viewPortHeight:b.gridHeight,enableResize:b.enableColumnResize,enableSort:b.enableSort,columns:[],columnsMap:{},autoWidthColumns:[],givenWidthColumns:[],columnsByDepth:[]};return g(a,d),f(d),c(d,b),h(a,d),d.height=d.totalDepth*b.headerRowHeight,d},j.computeColumnCss=c,j.resizeColumn=d,j.updateColumnWidth=f,j.formatHeader=g,j.fixColumn=h,j}]).controller("graceGridHeaderController",["gridConstant",function(a){var b=this;b.sortTypes=["none","asc","des"],b.sortTypeIndexMap={none:0,asc:1,des:2},b.sorters={asc:function(a,b){var c=a-b;return isNaN(c)?a>b?1:a==b?0:-1:c},des:function(a,b){var c=b-a;return isNaN(c)?a>b?-1:a==b?0:1:c}},b.filters=[];var c={};b.addColumnScope=function(a){var b=a.cellData.field;c[b]=a},b.getColumnScope=function(a){return c[a]}}]).directive("graceGridHeader",["gridUtil",function(a){return{restrict:"EA",replace:!0,require:["^graceGrid","graceGridHeader"],controller:"graceGridHeaderController",templateUrl:"template/grid/gridHeader.html",scope:{headerData:"="},compile:function(){return{post:function(b,c,d,e){var f=e[0],g=e[1],h="none",i=null,j=null,k=f.gridApi;b.gridOptions=f.scope.gridOptions,b.gridScope=f.scope;var l=f.scope,m=null;g.doSort=function(a,c,d,e){m&&m.$id!=e.$id&&m.resetSort(),m=e,h=g.sortTypes[a],j=e.cellData.field,b.curRowIndex=c,b.curColumnIndex=d,f.applyCurrentData(),k.event.trigger("sort",[h,j])},f.sortingExposed=function(a,b){var c=g.getColumnScope(a),d=g.sortTypeIndexMap[b];c&&void 0!=d&&c.valueClick(null,d)},f.sorting=function(b){if("none"!=h&&j){var c=a.indexOf4AO(b.headerInfo.columns,"field",j);i=c[1];var d,e=c[0],f=i.sorter&&i.sorter[h]||g.sorters[h],k=i.sorterPro&&i.sorterPro[h],m=b.bodyInfo,n=m.rows2Render;if(d=k?function(a,b){return k(a.rowInfo.rawData,b.rowInfo.rawData)}:function(a,b){return f(a[e].content,b[e].content)},n.sort(d),l.expandableTable){var o=m.rowsChildrenMap2Render;for(var p in o)o[p].sort(d)}}},g.doFilter=function(a){-1==g.filters.indexOf(a)&&g.filters.push(a),f.applyCurrentData()},f.filtering=function(a){function b(b,c,e){for(var f,g=!0,h=0;f=d[h];h++){var i=b[a.headerInfo.columns.indexOf(f)].content;if(!i)return!1;if(g=-1!=(i+"").indexOf(f.filterKeyWord),!g)return!1}return g}for(var c,d=g.filters,e=[],f=0;c=d[f];f++)e.push(a.headerInfo.columns.indexOf(c));var h=a.bodyInfo,i=h.rows2Render;if(h.rows2Render=i.filter(b),l.expandableTable){var j=h.rowsChildrenMap2Render;for(var k in j)j[k]=j[k].filter(b)}},b.pinnings=[];var n=b.$watch("headerData",function(a){if(a){if(l.enablePinning)for(var c,d=a.columns,e=0;c=d[e];e++)c.pinned===!0&&b.pinnings.push(c);n()}});g.doPinning=function(a){-1==b.pinnings.indexOf(a)?b.pinnings.push(a):b.pinnings.splice(b.pinnings.indexOf(a),1),f.applyCurrentData()},f.pinningExposed=function(a){var b=g.getColumnScope(a);b&&b.togglePinning(null)},f.pinning=function(c){for(var d=c.headerInfo,e=d.columns2Render,f=0,g=e[0].length;g>f;f++){var h=e[0][f];if(!h.children){h.pinnable=void 0===h.pinnable?!0:h.pinnable;var i=a.indexOf4AO(b.pinnings,"field",h.field);if(-1!=i){var j=e[0].splice(f,1)[0];j!==i[1]&&(j.pinned=!0,b.pinnings.splice(i[0],1,j)),f--,g-=1}}}c.headerInfo.columns2Pinning=[b.pinnings];var k=c.bodyInfo;c.bodyInfo.rows2Pinning=[];for(var l,f=0;l=k.rows2Render[f];f++){for(var m,h=[],n=0;m=b.pinnings[n];n++)h.push(l.splice(m.columnIndex,1,null)[0]);h.rowInfo=l.rowInfo,l=l.filter(function(a){return null!=a}),l.rowInfo=h.rowInfo,k.rows2Render[f]=l,c.bodyInfo.rows2Pinning.push(h)}}}}}}}]),angular.module("grace.bootstrap.grid").directive("graceGridHeaderCell",["$position","gridUtil","$compile",function(a,b,c){return{restrict:"EA",replace:!0,require:["^graceGrid","^graceGridHeader"],templateUrl:"template/grid/gridHeaderCell.html",scope:{cellData:"=",columnIndex:"=",rowIndex:"="},compile:function(){return{pre:function(a,b,d,e){var f=a.cellData,g=e[0],h=g.scope,i='<div class="cell-content '+("rowSelector"==f.columnType?"row-selector":"")+'"  >';f.desc&&(i+='<span tooltip="'+f.desc+'"tooltip-append-to-body="'+h.tooltipConfig.append2Body+'"tooltip-popup-delay="'+h.tooltipConfig.showDelay+'"tooltip-animation="'+h.tooltipConfig.animation+'" tooltip-placement="'+h.tooltipConfig.place+'" ><i class="grace-icon-question-sign" ></i></span>'),i+="rowSelector"==f.columnType?'<span class="cell-value"  >'+(h.enableSelectionMulti&&h.enableSelectAll?"<i ng-class=\"{'grace-icon-check':cellData.isAllSelected,'grace-icon-unchecked':!cellData.isAllSelected}\" ng-click=\"selectAll($event)\" ></i>":"")+"</span></div>":'<span class="cell-value" ng-click="valueClick($event)"  >{{cellData.displayName}}<i ng-if="cellData.sortable && !cellData.children" ng-class="{\'grace-icon-sort-down\':sortTypeIndex == 2,\'grace-icon-sort-up\':sortTypeIndex == 1,\'grace-icon-sort\':sortTypeIndex == 0}" ></i></span><div ng-if="!cellData.children && gridOptions.enableFilter && !cellData.disableFilter" class="column-filter" ><input type="text" ng-model="cellData.filterKeyWord" ng-change="filterChange($event)" /></div></div>',f.pinnable&&!f.disablePinning&&"rowSelector"!=f.columnType&&(i+='<div  class="pin-icon" ng-class="{pinned:cellData.pinned}" ng-click="togglePinning($event)" ><i class="grace-icon-pushpin" ></i></div>'),h.enableColumnResize&&f.enableResize&&!f.children&&(i+='<div  class="resize-bar" ng-mousedown="beginResize($event)" ></div>'),b.append(c(i)(a))},post:function(c,d,e,f){function g(a){return a=a.originalEvent||a,a.pageX}function h(a){if(j.scope.enableColumnResize&&p){q=g(a)-o;var c=b.cssFixer("transform","translateX("+q+"px)");r.css(c),s.css(c),a.preventDefault()}}function i(a){j.scope.enableColumnResize&&(p=!1,j.resizeColumn(c.cellData,q),m.event.trigger("columnResize",[a,c.cellData.field,q]),q=0,r.css(b.cssFixer("transform","translateX(0px)")),r=null,a.preventDefault(),angular.element(document.body).unbind("mousemove",h),angular.element(document.body).unbind("mouseup",i),s.remove())}var j=f[0],k=f[1],l=0,m=j.gridApi;if(c.gridScope=j.scope,c.gridOptions=j.options,c.sortTypeIndex=l,k.addColumnScope(c),c.resetSort=function(){l=0,c.sortTypeIndex=l},c.cellData&&"rowSelector"==c.cellData.columnType){var n=c.cellData;n.isAllSelected=!1}c.selectAll=function(a,b){var b=c.cellData,d=b.isAllSelected=!b.isAllSelected;c.$emit("selectAll",{selectOrUnSelect:d})},c.valueClick=function(a,b){c.cellData.children||j.scope.enableSort&&(c.cellData.disableSort||(void 0!=b?l=b:(l++,l%=3),k.doSort(l,c.rowIndex,c.columnIndex,c),c.sortTypeIndex=l))},c.filterChange=function(a){k.doFilter(c.cellData)},c.togglePinning=function(a){c.cellData.children||c.cellData.parent||j.scope.enablePinning&&(c.cellData.disablePinning||(c.cellData.pinned=!c.cellData.pinned,k.doPinning(c.cellData)))};var o,p=!1,q=0,r=null,s=null;c.beginResize=function(b){if(j.scope.enableColumnResize){r=angular.element(b.target),p=!0,o=g(b),angular.element(document.body).bind("mousemove",h),angular.element(document.body).bind("mouseup",i),s=angular.element("<div class='base-line' ></div>"),j.scope.gridWrapperEl.append(s);var c=a.offset(r),d=a.offset(j.scope.gridWrapperEl);s.css("left",c.left-d.left+j.scope.gridWrapperEl[0].scrollLeft+"px"),b.preventDefault()}},c.doResize=h,c.stopResize=i}}}}}]),angular.module("grace.bootstrap.grid").directive("graceGridScrollbarVertical",["gridUtil","$compile","gridConstant","$timeout","$document",function(a,b,c,d,e){return{restrict:"EA",replace:!0,template:'<div class="grace-grid-scrollbar-v" ></div>',require:["^graceGrid"],compile:function(){return{pre:function(c,d,e){var f=a,g="";"osx"==f.osType?(d.addClass("osx"),g+='<div class="scroll-handle-bar" ></div>'):(d.addClass("win"),g+='<div class="scroll-handle-button-up" ><i class="grace-icon-angle-up" ></i></div><div class="scroll-slot" ><div class="scroll-handle-bar" ></div></div><div class="scroll-handle-button-down" ><i class="grace-icon-angle-down" ></i></div>'),d.append(b(g)(c))},post:function(b,c,d,f){function g(a){a=a.originalEvent||a,w=a.pageY;var b=w-v;v=w;var c=parseFloat(r.css("top").replace("%","")),d=s[0].clientHeight,e=parseFloat(r.css("height").replace("%","")),f=b/d*100;c+=f,0>c&&(c=0),c>100-e&&(c=100-e),r.css("top",c+"%"),a.preventDefault()}function h(a){x=!1,c.removeClass("dragging");var d=b.bodyInfo,f=d.rows2RenderCache,i=d.rows2PinningCache,j=f.length||i&&i.length,k=parseFloat(r.css("top").replace("%",""));b.curStartIndex=parseInt(k/100*j),b.curEndIndex=b.curStartIndex+b.iSPageSize,q.infiniteScroll(),e.unbind("mousemove",g),e.unbind("mouseup",h)}function i(){var a=b.bodyInfo,c=a.height,d=0,e=b.rowHeight+d,f=c%e,g=Math.ceil(c/e),h=e-f;b.iSPageSize=g,b.bodyHeightOverFlow=h}function j(){var a=b.bodyInfo,c=a.rows2RenderCache,d=a.rows2PinningCache,e=c.length||d&&d.length,f=Math.floor(100*b.curStartIndex/e);

r.css("top",f+"%")}function k(a,b){for(var c=0,d=a.length;d>c;c++)a[c]=b[c]}function l(a){var a=a.originalEvent||a;return void 0!==a.wheelDeltaY?a.wheelDeltaY:void 0!==a.wheelDelta?a.wheelDelta:a.detail}function m(a){if(!x){var c,d=l(a),e=b.bodyInfo;0!=d&&(e.rows2Render.length>=b.iSPageSize&&(c=d>0?o.cssFixer("transform","translateY(0px)"):o.cssFixer("transform","translateY("+-b.bodyHeightOverFlow+"px)"),b.gridWrapperEl.find("section").css(c)),A(l(a)),a.wheelDeltaX||y&&d>0||z&&0>d||a.preventDefault())}}function n(d){var e=b.gridWrapperEl[0].scrollLeft,f=a.cssFixer("transform","translateX("+e+"px)");c.css(f)}var o=a,p=angular.element,q=f[0],r=(b.gridWrapperEl.find("section"),p(c[0].querySelector(".scroll-handle-bar")));if("osx"==o.osType)var s=c;else{var s=p(c[0].querySelector(".scroll-slot")),t=p(c[0].querySelector(".scroll-handle-button-up")),u=p(c[0].querySelector(".scroll-handle-button-down"));t.bind("click",function(a){b.$apply(function(){q.infiniteScroll(1)})}),u.bind("click",function(a){b.$apply(function(){q.infiniteScroll(-1)})})}s.bind("click",function(a){});var v,w,x=!1;r.bind("mousedown",function(a){a=a.originalEvent||a,x=!0,c.addClass("dragging"),v=a.pageY,e.bind("mousemove",g),e.bind("mouseup",h)}),b.$watch(function(){if(!b.bodyInfo||!b.bodyInfo.rows2Render||!b.bodyInfo.rows2RenderCache)return void 0;var a=b.bodyInfo.rows2RenderCache.length,c=b.bodyInfo.rows2Render.length;return a+","+c},function(a){if(a){var d=a.split(",");b.scrollHandlerBarLen=Math.max(Math.ceil(d[1]/d[0]*100),5),r.css("height",b.scrollHandlerBarLen+"%");var e=parseInt(d[1])<parseInt(d[0]);c.css({height:b.bodyInfo.height+"px",top:"auto"}),c[e?"addClass":"removeClass"]("is-visible")}}),b.curStartIndex=0,b.iSPageSize,b.scrollHandlerBarLen=5,q.infiniteScrollStart=function(){void 0==b.iSPageSize&&i();var a=(b.infiniteScrollConfig,b.bodyInfo),c=a.rows2Render,d=a.rows2Pinning,e=b.iSPageSize;void 0===b.curEndIndex&&(b.curEndIndex=e),b.curEndIndex>c.length&&(c.length>e?(b.curEndIndex=c.length,b.curStartIndex=b.curEndIndex-e):(b.curStartIndex=0,b.curEndIndex=b.curStartIndex+e)),a.rows2Render=c.slice(b.curStartIndex,b.curEndIndex),a.rows2RenderCache=c,y=0==b.curStartIndex,z=b.curEndIndex==c.length,b.enablePinning&&(a.rows2Pinning=d.slice(b.curStartIndex,b.curEndIndex),a.rows2PinningCache=d),j()};var y=!1,z=!1;q.infiniteScroll=function(a){var c=b.infiniteScrollConfig,d=c.iStep;if(a=a>0?-d:0==a?0:d,0!==a){var e=b.bodyInfo,f=e.rows2RenderCache,g=e.rows2PinningCache;b.curStartIndex+a<0?(b.curStartIndex=0,b.curEndIndex=b.iSPageSize):b.curStartIndex+b.iSPageSize+a>f.length?(b.curStartIndex=f.length-b.iSPageSize,b.curEndIndex=f.length):(b.curStartIndex+=a,b.curEndIndex+=a);var h=f.slice(b.curStartIndex,b.curEndIndex);k(e.rows2Render,h),b.enablePinning&&(h=g.slice(b.curStartIndex,b.curEndIndex),k(e.rows2Pinning,h)),y=0==b.curStartIndex,z=b.curEndIndex==f.length,j()}};var A=o.delayExe(function(a){q.infiniteScroll(a)},50),B=o.browserType.firefox?"DOMMouseScroll":"mousewheel";b.bindInfiniteScroll=function(){b.unbindInfiniteScroll(),b.gridWrapperEl.bind(B,m).bind("scroll",n)},b.unbindInfiniteScroll=function(){b.gridWrapperEl.unbind(B,m).unbind("scroll",n)},b.bindInfiniteScroll()}}}}}]),angular.module("grace.bootstrap.grid").directive("graceGridPagination",["gridUtil","gridConstant","$http","$timeout","$interval",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:["^graceGrid"],templateUrl:"template/grid/gridPagination.html",compile:function(){return{post:function(f,g,h,i){function j(b){var e={url:o.url,dataType:o.dataType,method:o.method},g={rows:f.pageSize,page:f.currentPageIndex};if("get"==o.method){var h=g;o.externalParam&&(h=angular.extend(h,"function"==typeof o.externalParam?o.externalParam():o.externalParam)),e.params=h,b&&b.params&&angular.extend(h,b.params)}else if("post"==o.method){var i=g,h={};e.headers={"Content-type":"application/x-www-form-urlencoded;charset=UTF-8"},o.externalParam&&(h="function"==typeof o.externalParam?o.externalParam():o.externalParam),o.externalData&&(i=angular.extend(i,"function"==typeof o.externalData?o.externalData():o.externalData)),b&&(angular.extend(i,b.data),angular.extend(h,b.params)),i=a.json2query(i),e.params=h,e.data="string"===o.dataType?JSON.stringify(i):i}l.isLoading=!0,c(e).success(function(a){o.resultParser&&(a=o.resultParser(a)),l.totalRecordCount=f.totalItems=a.records,k.options.gridData=a.rows,k.update(k.options),l.gridDataEmpty=a.rows&&a.rows.length?!1:!0,d(function(){l.isLoading=!1},0)}).error(function(a){console.error(a)})}var k=i[0],l=k.scope,m=(l.headerInfo,l.paginationConfig);if(f.currentPageIndex=1,f.paginationSize=m.paginationSize||b.paginationSize,f.pageSizes=angular.copy(m.pageSizes),f.pageSize=m.pageSize,f.pageIcon=m.pageIcon,f.enableRefresh=m.enableRefresh,f.setTimeRefresh=m.setTimeRefresh,f.enableSetRefresh=m.enableSetRefresh,f.firstText=m.firstText,f.previousText=m.previousText,f.nextText=m.nextText,f.lastText=m.lastText,l.totalRecordCount=f.totalItems=l.bodyInfo.rows.length,-1==f.pageSizes.indexOf(f.pageSize)&&(f.pageSizes.push(f.pageSize),f.pageSizes.sort(function(a,b){return a-b})),f.pageSizes.forEach(function(a,b,c){c[b]={value:a,displayValue:a}}),f.refreshGrid=function(){"function"==typeof m.refresh?m.refresh(f):k.gridApi.reload()},f.enableSetRefresh){var n=e(function(){"function"==typeof m.setRefresh?m.setRefresh(f):k.gridApi.reload()},1e3*f.setTimeRefresh);f.changeTime=function(a,b){f.setTimeRefresh=b,e.cancel(n),n=e(function(){"function"==typeof m.setRefresh?m.setRefresh(f):k.gridApi.reload()},1e3*b)}}f.changePage=function(a,b){void 0!=b&&(f.pageSize=b),/^\d+$/.test(f.currentPageIndex+"")?f.currentPageIndex<1?f.currentPageIndex=1:f.currentPageIndex>f.totalPages&&(f.currentPageIndex=f.totalPages):f.currentPageIndex=1,k.gridApi.event.trigger("prePaging",[f.currentPageIndex,f.pageSize]),f.useRemoteData?j():k.applyCurrentData(),k.gridApi.event.trigger("paging",[f.currentPageIndex,f.pageSize])},k.toPage=function(a){f.currentPageIndex=a,f.changePage()},k.pageCount=function(){return f.totalPages},k.curPageIndex=function(){return f.currentPageIndex},k.getCurrentPageData=function(a){return f.useRemoteData||(a=a.slice((f.currentPageIndex-1)*f.pageSize,f.pageSize*f.currentPageIndex)),a},k.paging=function(a){var b=a.bodyInfo,c=b.rows2Render;l.useRemoteData||(l.totalRecordCount=f.totalItems=l.expandableTable?c.filter(function(a){return 0==a.rowInfo.depth}).length:c.length),c=k.getCurrentPageData(c),b.rows2Render=c},k.getPaginationHeight=function(){return g[0].offsetHeight};var o=f.ajaxConfig;k.reloadCurrentPage=j,f.useRemoteData&&j()}}}}}]),angular.module("grace.bootstrap.grid").directive("graceGridScreen",["gridUtil","$position","$document",function(a,b,c){return{restrict:"EA",replace:!0,require:["^graceGrid"],templateUrl:"template/grid/gridScreener.html",compile:function(){return{pre:function(a,b,c,d){function e(){var b=a.headerInfo;a.allSelector={label:"全选",checked:!1,field:"showAll"},a.screener=[],a.visibleCount=0,a.totalColumnNum=0;for(var c,d=0;c=b.columns[d];d++)"rowSelector"!=c.columnType&&(a.screener.push({label:c.displayName,checked:c.visible,field:c.field}),a.totalColumnNum++,c.visible&&a.visibleCount++);a.visibleCount==a.totalColumnNum&&(a.allSelector.checked=!0)}e(),a.$on("dataUpdate",function(){e()})},post:function(d,e,f,g){function h(a){function b(a){if(a.children){var d=c.children;a.drawnWidth=0,a.colspan=0;for(var e,f=0;e=d[f];f++){var g=b(e);a.drawnWidth+=g.w,a.colspan+=g.cs}}return a.visible?{w:a.drawnWidth,cs:a.colspan}:{w:0,cs:0}}for(var c,d=0,e=0;c=a[0][e];e++)d+=b(c).w;return d}function i(){d.$apply(function(){d.dropDownConfig.active=!1})}{var j=g[0];j.gridApi}d.gridScope=j.scope,d.doCheck=function(b,c){var e=a.indexOf4AO(d.screener,"field",b)[1];if(!(d.visibleCount<=1&&e.checked)){e.checked=!e.checked,e.checked&&d.visibleCount++||d.visibleCount--,d.allSelector.checked=d.visibleCount==d.totalColumnNum?!0:!1;var f=a.indexOf4AO(j.scope.headerInfo.columns,"field",b)[1];f.visible=e.checked,j.applyCurrentData(),c.preventDefault(),c.stopPropagation()}},d.stateSaved=null,d.toggleAll=function(b){var c=d.screener;if(!d.allSelector.checked){for(var e,f=0;e=c[f];f++){e.checked=!0;var g=a.indexOf4AO(j.scope.headerInfo.columns,"field",e.field)[1];g.visible=!0}d.allSelector.checked=!0,d.visibleCount=d.totalColumnNum,j.applyCurrentData(),b.preventDefault(),b.stopPropagation()}},j.screening=function(a){var b=a.headerInfo,c=a.bodyInfo,d=b.columns2Render,e=h(d);b.totalWidth=e,c.totalWidth=e;for(var f,g=b.columns,i=c.rows2Render,k=0;f=i[k];k++)for(var l,m=0;l=g[m];m++)f[m].visible=l.visible;j.resizeAutoWidthColumns&&j.resizeAutoWidthColumns()},j.getScreenerHeight=function(){return e[0].offsetHeight},d.dropDownConfig={active:!1},d.showDropDown=function(a){var c=e[0].querySelector(".screen-drop-down-trigger"),f=e[0].querySelector(".screen-drop-down"),g=b.position(angular.element(c));f.style.top=g.top+g.height-1+"px",d.dropDownConfig.active=!0,a.preventDefault(),a.stopPropagation()},c.bind("click",i)}}}}}]),angular.module("grace.bootstrap.grid").directive("graceGridSelectall",["gridUtil",function(a){return{restrict:"EA",replace:!0,template:'<div class="grace-grid-selectall-cnt" style="position: relative" ></div>',require:["^graceGrid"],compile:function(){return{post:function(b,c,d,e){function f(a,b){if(k.useRemoteData)j.gridApi.event.trigger("toSelectAllRecords",[a,b]);else{var c=[];k.bodyInfo.rows.forEach(function(a){c.push(a.rowInfo.originalRowIndex)}),j.gridApi.event.trigger("selectAllRecords",[a,c]),b()}}function g(a,b){var c=[];k.bodyInfo.rows2Render.forEach(function(a){c.push(a.rowInfo.originalRowIndex)}),j.gridApi.event.trigger("cancelSelectAllRecords",[a,c]),b(),k.isAllRecordsSelected=!1}function h(){var d=b.selectAllConfig,e=(d.tipsBeforeCheck,d.tipsAfterCheck),f=(k.bodyInfo,"<div class='grace-grid-selectall' ><span>{1}</span></div>");e=a.formatStr(e,{totalCount:k.totalRecordCount}),f=a.formatStr(f,e),c.empty().append(f),k.isAllRecordsSelected=!0}function i(){c.empty(),k.isAllRecordsSelected=!1}var j=e[0],k=j.scope;b.showSelectAllTip=!1,k.isAllRecordsSelected=!1,b.tipsContent=null,b.$on("dataUpdate",function(){k.isAllRecordsSelected||(k.headerInfo.columns[0].isAllSelected=!1,i())}),c.on("click",function(a){var b=a.target||a.toElement;"A"==b.tagName?f(a,h):"SPAN"==b.tagName&&g(a,j.showSelectAllTip)}),j.showSelectAllTip=function(){var d=b.selectAllConfig,e=d.tipsBeforeCheck,f=(d.tipsAfterCheck,k.bodyInfo),g="<div class='grace-grid-selectall' ><a >{1}</a></div>";e=a.formatStr(e,{selectedCount:f.rows2Render.length,totalCount:k.totalRecordCount}),g=a.formatStr(g,e),c.empty().append(g)},j.hideSelectAllTip=i}}}}}]),angular.module("grace.bootstrap.grid").factory("graceGridRefreshDown",["gridUtil","$position","$window",function(a,b,c){function d(a,b){if(!j||(g(),b.id!=k.id)){k=b;var c=b.setTimeRefresh,d=h(c);d=l(d),l(document.body).append(d),e(a,d),j=d,d.on("keydown",f),j.on("click",function(a){a.preventDefault(),a.stopPropagation()}),m.on("click",g),l(window)[0].onresize=function(){e(a,d)}}}function e(a,d){var e={height:d[0].clientHeight};d.css("display","none");var f=b.offset(a),g=f.top+f.height,h={top:c.scrollY,bottom:c.scrollY+c.innerHeight},i=h.top<f.top-e.height,j=h.bottom>g+e.height+17;d.css({display:"block",top:g+2+"px",left:f.left+"px"}),!j&&i&&d.css({display:"block",top:g-e.height-f.height-3+"px",left:f.left+"px"})}function f(a){if(13==a.keyCode){var b=l(a.target)[0].value,c=/^[1-9]+.?[0-9]*$/;if(!c.test(b))return void alert("请输入数字,且数字不能为0");k.setTimeRefresh=b,k.onChange&&k.onChange(a,k.setTimeRefresh),i()}}function g(a){k.onBlur&&k.onBlur(a),i()}function h(a){var b="<div class='grace-select-dropdown grace-set-time' >时间设置<input id='setTimeInput' type='text' ng-model='"+a+"' value='"+a+"'><span>s</span></div>";return b}function i(){m.off("click",g),j&&(j.off().remove(),j=null)}var j,k,l=angular.element,m=l(document);return{show:d,hide:i}}]).directive("graceRefreshSettime",["gridUtil","graceGridRefreshDown","$document",function(a,b,c){return{restrict:"EA",replace:!0,template:'<a href="javaScript:void(0)" title="定时刷新" ng-click="showDropDown($event)" ng-class="{active:isActive}" class="custom-select" >{{displayVal}}</a>',scope:{setTimeRefresh:"=",refreshChange:"="},compile:function(){return{post:function(a,c,d,e){a.showDropDown=function(d){a.isActive=!0,b.show(c,{setTimeRefresh:a.setTimeRefresh,onChange:a.onChange,onBlur:a.onBlur}),d.preventDefault(),d.stopPropagation()},a.onChange=function(b,c){a.setTimeRefresh=c,a.refreshChange(b,c),a.$apply(function(){a.isActive=!1})},a.onBlur=function(b){return b?void a.$apply(function(){a.isActive=!1}):void(a.isActive=!1)}}}}}}]),angular.module("grace.bootstrap.grid").factory("graceGridSelectDropDown",["gridUtil","$position","$window",function(a,b,c){function d(a,b){if(!j||(g(),b.id!=k.id)){k=b;var c=b.selectModel,d=h(c);d=l(d),l(document.body).append(d),e(a,d),d.on("click",f),m.on("click",g),j=d,l(window)[0].onresize=function(){e(a,d)}}}function e(a,d){var e={height:d[0].clientHeight};d.css("display","none");var f=b.offset(a),g=f.top+f.height,h={top:c.scrollY,bottom:c.scrollY+c.innerHeight},i=h.top<f.top-e.height,j=h.bottom>g+e.height+16;d.css({display:"block",top:g-1+"px",left:f.left+"px",width:f.width+"px"}),!j&&i&&d.css({display:"block",top:g-e.height-f.height+1+"px",left:f.left+"px",width:f.width+"px","border-top":"1px solid #2c4a93","border-bottom":"none"})}function f(a){var b=l(a.target);k.onSelect&&k.onSelect(a,b.attr("val"),b.html()),i()}function g(a){k.onBlur&&k.onBlur(a),i()}function h(a){for(var b,c="<ul class='grace-select-dropdown' >",d=0;b=a[d];d++)c+=k.selectVal!=b.value?"<li val="+b.value+" >"+b.displayValue+"</li>":"<li val="+b.value+" class='selected' >"+b.displayValue+"</li>";return c+="</ul>"}function i(){m.off("click",g),j&&(j.off("click",f).remove(),j=null)}var j,k,l=angular.element,m=l(document);return{show:d,hide:i}}]).directive("graceSimpleSelect",["gridUtil","graceGridSelectDropDown","$document",function(a,b,c){return{restrict:"EA",replace:!0,template:'<span ng-click="showDropDown($event)" ng-class="{active:isActive}" class="custom-select" >{{displayVal}}</span>',scope:{selectModel:"=",selectVal:"=",contentChange:"="},compile:function(){return{post:function(a,c,d){angular.element;a.showDropDown=function(d){a.isActive=!0,b.show(c,{selectModel:a.selectModel,selectVal:a.selectVal,onSelect:a.onSelect,onBlur:a.onBlur,id:a.id}),d.preventDefault(),d.stopPropagation()};var e=a.$watch("selectVal",function(b){void 0!=b&&(a.selectModel.forEach(function(c){c.value==b&&(a.displayVal=c.displayValue)}),e())});a.onSelect=function(b,c,d){a.selectVal=c,a.displayVal=d,a.contentChange(b,c,d),a.$apply(function(){a.isActive=!1})},a.onBlur=function(b){return b?void a.$apply(function(){a.isActive=!1}):void(a.isActive=!1)}}}}}}]),angular.module("grace.bootstrap.grid").factory("gridUtil",["$timeout",function(a){function b(a,b){for(var c=["webkit","Moz","ms","o"],d={},e=0,f=c.length;f>e;e++)d[c[e]+a.replace(/^\w/,a[0].toUpperCase())]=b;return d}var c={};c.newId=function(){var a=(new Date).getTime();return function(){return a+=1}}(),c.isEmptyObject=function(a){if("object"==typeof a)for(var b in a)return!1;return!0},c.formatStr=function(a){var b=arguments;if(2==b.length&&"object"==typeof b[1]){var c=b[1];return a.replace(/{(.*?)}/g,function(a,b,d){return c[b]||""})}return a.replace(/{(\d+)}/g,function(a,c,d){return b[c]})},c.copy2DArray=function(a){for(var b,c=[],d=0;b=a[d];d++){for(var e,f=[],g=0;e=b[g];g++)f.push(e);c.push(f)}return c},c.getStyles=function(a){var b=a;return"undefined"!=typeof b.length&&b.length&&(b=a[0]),b.ownerDocument.defaultView.getComputedStyle(b,null)},c.delayExe=function(b,c){var d=!0,e=b;return function(f){d&&(e&&e(f),e=null,d=!1,a(function(){b(f),d=!0},c))}},c.browserType=function(){var a=navigator.userAgent;return{ie:/MSIE/i.test(a)||/trident/i.test(a),chrome:/chrome.*safari/i.test(a),safari:/version.*safari/i.test(a),firefox:/gecko.*firefox/i.test(a)}}(),c.osType=function(){var a=navigator.platform;return/mac/i.test(a)?"osx":/win/i.test(a)?"windows":/x11/i.test(a)?"unix":/linux/i.test(a)?"linux":"other"}(),c.getScrollBarInfo=function(){var a=document.createElement("div");a.style.cssText="position:absolute;left:0;top:0;width:100px;height:100px;overflow:scroll;visibility:hidden",document.body.appendChild(a);var b={verticalBarWidth:a.offsetWidth-a.clientWidth,horizontalBarHeight:a.offsetHeight-a.clientHeight};return document.body.removeChild(a),b};var d={transform:!0,"box-shadow":!0};return c.register2Hack=function(a){d[a]=!0},c.cssFixer=function(){if(2==arguments.length)return d[arguments[0]]?b.apply(null,arguments):arguments;var a=arguments[0],c=[a];for(var e in a)c.push(b(e,a[e]));return angular.extend.apply(angular,c),a},c.isElementVisible=function(a){for(;a[0]&&a[0]!=document;){if("none"===c.getStyles(a).display)return!1;a=a.parent()}return!0},c.forEach=function(a,b){if(b)for(var c=0,d=a.length;d>c;c++)b&&b(a[c],c)},c.json2query=function(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")},c.isEmptyObj=function(a){if(!a)return!0;for(var b in a)return!1;return!0},c.indexOf4AO=function(a,b,c){if(!a)return-1;for(var d=0,e=a.length;e>d;d++)if(a[d][b]==c)return[d,a[d]];return-1},c.delegate=function(a,b,c,d){var e=a[0];e.$$delegates||(e.$$delegates={},e.on("")),e.$$delegates[b]||(e.$$delegates[b]=[]),e.$$delegates[b].push(d)},c.unDelegate=function(a,b,c){var d=a[0],e=arguments;if(d.$$delegates)if(3==e.length){var f=d.$$delegates[b];if(!f)return;var g=f.indexOf(c);-1!=g&&f.splice(g,1)}else 2==e.length?d.$$delegates[b]=[]:d.$$delegates=void 0},c}]),angular.module("grace.bootstrap.input",["grace.bootstrap.tooltip","grace.bootstrap.dynamicName"]).config(["$tooltipProvider",function(a){a.setTriggers({blur:"focus"})}]).constant("graceInputConstant",{enter:"请输入",type:["text","number","password"],typeReg:{number:/^[-\+]?\d+(\.\d+)?$/},defaultMaxLen:1e5,blankText:"该字段不能为空"}).factory("graceInputService",[function(){function a(a){return angular.isUndefined(a)||""===a||null===a||a!==a}return{isEmpty:a}}]).controller("inputController",["$scope","graceInputService","graceInputConstant","$timeout",function(a,b,c,d){a.result={value:""},a.validResult={text:""},a.maxLength=c.defaultMaxLen,a.publishApi=function(){var b={update:function(){d(function(){a.init()},0)},disable:function(b){d(function(){a.config.input?a.config.input.disabled=b:a.config.input={disabled:b}},0)},getValue:function(){return a.getValue()},setValue:function(b){d(function(){a.result.value=b})}};return a.instanceHandler=b},a.init=function(){var b=a.config;b.input.type&&-1==c.type.indexOf(b.input.type)&&(b.input.type=""),angular.isDefined(b.value)&&(a.result.value=b.value)},a.$watch("result.value",function(d,e){var f,g=a.config;g.input&&!b.isEmpty(d)&&"number"==(f=g.input.type)&&!c.typeReg[f].test(d)&&(a.result.value=e);try{a.config.callback.onChange(a.result.value)}catch(h){}a.saveValue(a.result.value)}),a.publishApi(),a.init()}]).directive("graceInput",[function(){return{restrict:"EA",replace:!0,require:["^?graceFieldManager","?ngModel"],templateUrl:"template/input/input.html",scope:{config:"=",instanceHandler:"=?"},controller:"inputController",link:function(a,b,c,d){var e=d[1]||{$setViewValue:angular.noop};a.saveValue=function(a){e.$setViewValue(a)},e.$render=function(){a.result.value=e.$viewValue},a.getValue=function(){return a.result.value},a.getName=function(){return a.config.input?a.config.input.name:""},d[0]&&d[0].addField({type:"input",element:b,scope:a})}}}]).directive("inputValidate",["graceInputService","graceInputConstant",function(a,b){return{require:"ngModel",link:function(c,d,e,f){var g=f;d.on("blur",function(){c.validResult.text&&angular.element(this).addClass("error")}).on("focus",function(){angular.element(this).removeClass("error")}),g.$validators||(g.$validators={}),g.$validators.valid=function(d,e){var g,h,i=c.config,j=c.validResult;if(j.text="",i.input){if((g=i.input.valid)&&"function"==typeof g.validFn){var k=g.validFn.call(this,e);(!k||angular.isArray(k)&&!k[0])&&(j.text=k?k[1]:g.inValidText)}a.isEmpty(e)&&(h=i.input.allowBlank,angular.isDefined(h)&&!h&&(j.text=b.blankText))}return j.text?(f.$setValidity("invalid",!1),!1):(f.$setValidity("invalid",!0),!0)}}}}]),angular.module("grace.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("grace.bootstrap.modal",["grace.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k)}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);n.top().value.modalDomEl=o,f.append(o),f.addClass(m)},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controller&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("grace.bootstrap.nav",[]).directive("graceNav",["$rootScope",function(a){return{restrict:"AE",replace:!0,templateUrl:"template/nav/nav.html",scope:{navsData:"=",vm:"="},link:function(a,b,c,d){}}}]),angular.module("grace.bootstrap.popWindow",[]).factory("$gPopWindow",["$modal",function(a){var b=function(){function b(b,c,d,e){var f=a.open({templateUrl:b,controller:"popWindowCtrl",resolve:{data:function(){return c}},backdropClass:"grace-pop-back",windowClass:"grace-pop-win",backdrop:"static"});f.result.then(function(a){angular.isFunction(d)&&d()},function(a){angular.isFunction(e)&&e()})}var c={};return c.alert=function(a,c,d){var e,f;angular.isObject(c)||(d=c,c={}),e="template/popWindow/alert.html",f={content:a,option:c,title:c&&c.title?c.title:""},b(e,f,d)},c.confirm=function(a,c,d,e){var f,g;angular.isObject(c)||(e=d,d=c,c={}),f="template/popWindow/confirm.html",g={content:a,option:c,title:c&&c.title?c.title:""},b(f,g,d,e)},c};return b()}]).controller("popWindowCtrl",["$scope","$modalInstance","data",function(a,b,c){a.title=c.title,a.content=c.content,a.option=c.option,a.option&&a.option.oprationIcon&&("ok"==a.option.oprationIcon?a.showOKIcon=!0:"error"==a.option.oprationIcon&&(a.showErrorIcon=!0)),a.ok=function(){b.close(!0)},a.cancel=function(){b.dismiss(!0)}}]),angular.module("grace.bootstrap.radio",["grace.bootstrap.dynamicName"]).directive("graceRadio",["$timeout",function(a){return{restrict:"EA",require:["^?graceFieldManager","?ngModel"],replace:!0,transclude:!0,scope:{config:"=",instanceHandler:"=?"},templateUrl:"template/radio/radio.html",link:function(b,c,d,e){var f=e[1];b.modelCtrl={$setViewValue:angular.noop},f&&(b.modelCtrl=f,f.$parsers.unshift(function(a){return a||b.config.required!==!0?a:void f.$setValidity("invalid",!1)}),f.$render=function(){b.selectByFilter(function(a,b,c){return a.value===f.$viewValue})}),b.currentItem=null,b.select=function(a){b.currentItem=a,b.config.input.disabled||(b.currentItem=a)},b.selectItem=function(a){b.config.input.disabled||b.select(a)},b.getCurrentItem=function(){return b.currentItem},b.getItemIndex=function(a){var c=b.config.list.map(function(a){return a.value});return c.indexOf(a.value)},b.selectByFilter=function(a){if(angular.isFunction(a))for(var c=b.config.list,d=0,e=c.length;e>d;d++)if(a(c[d],d,c)){b.select(c[d]);break}},b.formatConfig=function(a){if(!angular.isObject(a))throw new Error("配置需要一个对象");!angular.isObject(a.input)&&(a.input={}),angular.isUndefined(a.input.disabled)&&(a.input.disabled=!1),angular.isUndefined(a.input.allowBlank)&&(a.input.allowBlank=!0)},b.publishApi=function(){var c={update:function(){a(function(){b.init()},0)},selectByFilter:function(c){a(function(){b.selectByFilter(c)},0)},disable:function(c){a(function(){b.config.input?b.config.input.disabled=c:b.config.input={disabled:c}},0)},getValue:function(){return b.getValue()}};return b.instanceHandler=c},b.initList=function(){var a=b.config,d=a.list?a.list:a.list=[];c.find("div.items grace-item").each(function(a,b){var c=angular.element(b);d.push({text:c.attr("text"),value:c.attr("value")})}),c.find("div.items").remove()},b.init=function(){var a=b.config;b.formatConfig(a),b.currentItem=null,angular.isUndefined(a.value)||b.selectByFilter(function(b){return b.value===a.value}),b.currentItem||b.selectByFilter(function(a,b){return 0==b})},b.$watch("currentItem.value",function(a,c){b.modelCtrl.$setViewValue(a);try{var d=b.currentItem,e=b.getItemIndex(d),f=b.config.list;b.config.callback.onChange(a,d,e,f)}catch(g){}}),b.publishApi(),b.initList(),b.init(),b.getValue=function(){return b.currentItem.value},b.getName=function(){return b.config.input?b.config.input.name:""},e.length&&e[0]&&e[0].addField({type:"radio",element:c,scope:b})}}}]),angular.module("grace.bootstrap.search",["grace.bootstrap.dynamicName"]).controller("searchController",["$scope","$timeout",function(a,b){a.result={value:""},a.doSearch=function(){try{a.config.callback.onChange(a.result.value)}catch(b){}},a.enterSearch=function(b){13==b.which&&a.doSearch()},a.publishApi=function(){var c={update:function(){b(function(){a.init()},0)},disable:function(c){b(function(){a.config.input?a.config.input.disabled=c:a.config.input={disabled:c}},0)},getValue:function(){return a.getValue()}};return a.instanceHandler=c},a.formatConfig=function(a){if(!angular.isObject(a))throw new Error("grace-search 组件需要一个对象作为配置。");!angular.isObject(a.input)&&(a.input={})},a.init=function(){var b=a.config;a.formatConfig(b),angular.isDefined(b.value)&&(a.result.value=b.value)},a.$watch("result.value",function(b,c){a.config.input.instantSearch&&a.doSearch(),a.ngModelCtrl.$setViewValue(b)}),a.publishApi(),a.init()}]).directive("graceSearch",[function(){return{restrict:"EA",replace:!0,require:["^?graceFieldManager","?ngModel"],templateUrl:"template/search/search.html",scope:{config:"=",instanceHandler:"=?"},controller:"searchController",link:function(a,b,c,d){function e(){var a=$(b).find(".bdp-search-input");a.on("focus",function(){$(b).find(".search-box").addClass("bdp-color-blue")}),a.on("blur",function(){$(b).find(".search-box").removeClass("bdp-color-blue")})}var f=d[1]||{$setViewValue:angular.noop};f.$render=function(){a.result.value=f.$viewValue},a.ngModelCtrl=f,a.getValue=function(){return a.result.value},a.getName=function(){return a.config.input?a.config.input.name:""},setTimeout(e,0)}}}]),angular.module("grace.bootstrap.select",["grace.bootstrap.dropdown","grace.bootstrap.dynamicName"]).constant("graceSelectConst",{blankText:"该字段不能为空"}).directive("graceSelect",["$http","$timeout","graceSelectConst",function(a,b,c){return{restrict:"EA",replace:!0,transclude:!0,require:["^?ngModel","^?graceFieldManager"],templateUrl:"template/select/select.html",scope:{config:"=",instanceHandler:"=?"},link:function(c,d,e,f){c.currentItem=null,c.validResult={text:""};var g=f[0]||{$setViewValue:angular.noop};g.$render=function(){c.selectByFilter(function(a,b,c){return a.value===g.$viewValue})},c.selectItem=function(a){c.currentItem=a},c.getItemIndex=function(a){var b=c.config.list.map(function(a){return a.value});return b.indexOf(a.value)},c.selectByFilter=function(a){if(angular.isFunction(a))for(var b=c.config.list,d=0,e=b.length;e>d;d++)if(a(b[d],d,b)){
c.selectItem(b[d]);break}},c.formatConfig=function(a){if(!angular.isObject(a))throw new Error("配置需要一个对象");!angular.isObject(a.input)&&(a.input={}),angular.isUndefined(a.input.disabled)&&(a.input.disabled=!1),angular.isUndefined(a.input.allowBlank)&&(a.input.allowBlank=!0)},c.getRemoteData=function(b,d){var e;c.config.input&&(e=c.config.input.dataUrl)&&a({method:"post",url:e,param:b}).success(function(a){a.success&&(c.config.list=a.data.list,c.currentItem=null,angular.isFunction(d)&&d())})},c.publishApi=function(){var a={update:function(){b(function(){c.init()},0)},disable:function(a){b(function(){c.config.input?c.config.input.disabled=a:c.config.input={disabled:a}},0)},selectByFilter:function(a){b(function(){c.selectByFilter(a)},0)},getValue:function(){return c.getValue()}};return c.instanceHandler=a},c.initList=function(){var a=c.config,b=a.list?a.list:a.list=[];d.find("div.items grace-item").each(function(a,c){var d=angular.element(c);b.push({text:d.attr("text"),value:d.attr("value")})}),d.find("div.items").remove()},c.init=function(){var a=c.config,b=function(){var b=a.value;angular.isDefined(b)&&c.selectByFilter(function(a){return a.value===b})};c.currentItem=null,c.formatConfig(a),angular.isDefined(a.input.dataUrl)?angular.isUndefined(a.input.require)&&c.getRemoteData({},b):(c.initList(),b())},c.$watch("currentItem.value",function(a,b){g.$setViewValue(a);try{var d=c.currentItem,e=c.getItemIndex(c.currentItem),f=c.config.list;c.config.callback.onChange(a,d,e,f)}catch(h){}c.sendValueChangeInfo()}),c.$on("fieldChange",function(a,b){b=b?b:{};var d=c.config.input?c.config.input.require:"";if(b.name===d){var e={};e[d]=b.value,c.getRemoteData(e)}}),c.publishApi(),c.init(),d.find("div.item-select").on("focus",function(){c.config.input.disabled||angular.element(this).addClass("focus")}).on("blur",function(){angular.element(this).removeClass("focus")}),c.getValue=function(){return c.currentItem?c.currentItem.value:""},c.getName=function(){return c.config.input?c.config.input.name:""};var h=f[1];h&&h.addField({type:"select",element:d,scope:c}),c.sendValueChangeInfo=function(){h&&h.triggerFieldChange({type:"select",name:c.getName(),value:c.getValue()})}}}}]).directive("selectValid",["graceSelectConst",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$validators||(e.$validators={}),e.$validators.valid=function(c,d){var f=b.validResult,g=b.config;return f.text="",g.input.allowBlank?!0:c?(e.$setValidity("invalid",!0),!1):(f.text=a.blankText,e.$setValidity("invalid",!1),!0)}}}}]);var app=angular.module("grace.bootstrap.selectByGroup",["grace.bootstrap.position"]).controller("selectByGroupController",["$scope","$http",function(a,b){function c(a){for(var b in a)return!1;return!0}function d(a,b,c){var d={};return e(b,d,c),d}function e(a,b,c){for(var d,e=0;d=a[e];e++)(!c||c(d))&&(b[d.code]=d)}var f=["A-E","F-J","K-O","P-T","U-Z"];a.curCode="",a.$watch("data",function(){if(a.data&&a.data.length){if(a.baseFirst=a.data[0],a.curCode=a.baseFirst.code,"own"==a.curCode)a.selectionData=a.baseFirst.children;else{a.selectionData={title:[],body:[]},a.selectionData.title=f;for(var b,c=0;b=f[c];c++)a.selectionData.body.push(a.baseFirst.children[b])}a.changTitle(0)}}),a.changeSelectionShow=function(){},a.changTitle=function(b){a.index=b,"own"==a.curCode?a.curDataList=a.selectionData:(a.curTitle=a.selectionData.title[b],a.curDataList=a.selectionData.body[b])},a.doSearch=function(b){a.searchResult23=d(b,a.curDataList,function(a){return-1!=a.name.indexOf(b)}),a.searchResult23Empty=c(a.searchResult23),a.$apply()},a.nodeClick=function(b){a.ngModel=b,a.ngModel.pid=a.curCode,angular.element(".selectionList").hide(),angular.element(".selectByGroup").parent().css("height","auto")}}]).directive("graceSelectByGroup",["$window","$position",function(a,b){return{restrict:"EA",require:["graceSelectByGroup","^ngModel"],controller:"selectByGroupController",templateUrl:"template/selectByGroup/selectByGroup.html",replace:!0,scope:{data:"=",ngModel:"="},link:function(c,d,e,f){function g(a,b){var c=!0;return function(d){c&&(a(d),c=!1,setTimeout(function(){c=!0},b))}}var h=angular.element(a),i=null;h.on("click",function(){c.$apply(function(){angular.element(".selectionList",d).hide()}),i&&i.css({height:"auto"})}),angular.element(".selectionList").on("click",function(a){a.originalEvent.cancelBubble=!0}),d.on("click",".selection",function(a){if(!angular.isArray(c.selectionData)||c.selectionData.length){angular.element(".selectionList").hide(),curEl=angular.element(a.currentTarget);var e=curEl.parent(),f=b.position(e),g=b.offset(e),h=angular.element(".selectionList",d);h.toggle();var j=i=curEl.parent().parent();j.css({height:"auto"});var k=b.offset(j);h.css({top:g.top+g.height+8-k.top,left:0}),h.find(".selection-arrow").css({left:f.left+f.width/2});var l=b.offset(h);l.top+l.height>k.height+k.top&&j.css({height:l.top-k.top+l.height}),a.originalEvent.cancelBubble=!0}});var j=g(function(a){var b=angular.element(a.target),d=b.val();d?c.doSearch(d):b.parent().find(".selection-search-searchbtn").triggerHandler("click")},100);d.find(".selection-search-searchbox").bind("keyup",j)}}}]);angular.module("grace.bootstrap.step",[]).controller("stepCtrl",["$scope",function(a){}]).directive("graceStep",[function(){return{restrict:"EA",replace:!0,templateUrl:"template/step/step.html",scope:{config:"=",clickHandler:"&"},controller:"stepCtrl",link:function(a,b,c,d){}}}]).directive("stepRepeatDone",["$timeout",function(a){return{restrict:"EA",require:"^graceStep",link:function(b,c,d,e){function f(a){var b=document.querySelectorAll(".grace-step-list .bold-line"),c=document.querySelector(".grace-step-list ul");a?(b[0].remove(),len=b.length):len=b.length+1;var d=document.querySelectorAll(".grace-step-list .g-wrapper p"),e=Math.floor((c.clientWidth-45*len-35-20)/len),d=document.querySelectorAll(".grace-step-list .g-wrapper p");angular.forEach(d,function(a,b){a.style.width=e>135?e+20+"px":"155px"}),angular.forEach(b,function(b,c){if(!a||0!=c){var d=b.parentElement,f=d.previousElementSibling,g=f.querySelector(".g-wrapper").clientWidth,h=b.nextElementSibling,i=h.clientWidth,j=(g-35)/2,k=(i-35)/2;j=-j-5,k=-k-5,b.style.width=e+"px",b.style.marginRight=k+"px",b.style.marginLeft=j+"px"}})}c.on("click",function(a){b.$parent.clickHandler({item:b.item,event:a})}),b.$last&&a(function(){f(1)}),window.onresize=function(){f()}}}}]),angular.module("grace.bootstrap.string",[]).service("$gStringService",[function(){var a=this;a.trim=function(a){return a.replace(/(^\s+)|(\s+$)|(^　+)|(　+$)/g,"")},a.ltrim=function(a){return a.replace(/(^\s+)|(^　+)/g,"")},a.rtrim=function(a){return a.replace(/(\s+$)|(　+$)/g,"")},a.isNumber=function(a){return a.isInt()||a.isFloat()||a.isPercent()},a.isFloat=function(a){return/^(?:-?|\+?)\d+(,\d\d\d)*\.\d+$/g.test(a)},a.isInt=function(a){return/^(?:-?|\+?)\d+(,\d\d\d)*$/g.test(a)},a.isPercent=function(a){return/^(?:-?|\+?)\d+(,\d\d\d)*(\.\d+)?\%$/g.test(a)},a.isPlus=function(b){return a.isPlusInt()||a.isPlusFloat()},a.isPlusFloat=function(a){return/^\+?\d*\.\d+$/g.test(a)},a.isPlusInt=function(a){return/^\+?\d+$/.test(a)},a.isMinus=function(b){return a.isMinusInt()||a.isMinusFloat()},a.isMinusFloat=function(a){return/^-\d*\.\d+$/g.test(a)},a.isMinusInt=function(a){return/^-\d+$/g.test(a)},a.isLeastCharSet=function(a){return!/[^A-Za-z0-9_]/g.test(a)},a.isEmail=function(a){return/^\w+@.+\.\w+$/g.test(a)},a.isZip=function(a){return/^\d{6}$/g.test(a)},a.isPhone=function(a){return/^(\d{2,4}-)?((\(\d{3,5}\))|(\d{3,5}-))?\d{3,18}(-\d+)?$/g.test(a)},a.isMobile=function(a){return/^((13)|(15))\d{9}$/g.test(a)},a.isTel=function(b){return a.isMobileTelephone()||a.isFixedTelephone()},a.hasMark=function(a){var b=new RegExp("("+_mark+")","g");return(a.match(b)?a.match(b).length:0)>0},a.getLen=function(a){var b=a.match(/[^\x00-\xff]/gi);return a.length+(null==b?0:b.length)},a.encodeHtml=function(a){var b=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g,c=a.toString();return"string"!=typeof c?c:c.replace(b,function(a){var b=a.charCodeAt(0),c=["&#"];return b=32==b?160:b,c.push(b),c.push(";"),c.join("")})},a.format=function(a){var b=arguments;if(2==b.length&&"object"==typeof b[1]){var c=b[1];return a.replace(/{(.*?)}/g,function(a,b,d){return c[b]||""})}return a.replace(/{(\d+)}/g,function(a,c,d){return b[c]})},a.decodeHtml=function(a){var b=/&\w+;|&#(\d+);/g,c={"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&quot;":'"',"&copy;":""},d=a.toString();return"string"!=typeof d?d:d.replace(b,function(a,b){var d=c[a];return void 0==d&&(d=isNaN(b)?a:String.fromCharCode(160==b?32:b)),d})}}]),angular.module("grace.bootstrap.summary",["grace.bootstrap.tooltip"]).constant("summaryConfig",{footLeft:{},footRight:{},mainValue:{},maxItemCount:5,deepWatch:!1}).controller("summaryController",["$scope","summaryConfig","summaryFactory","$attrs",function(a,b,c,d){a.selectedIndex=0,a.curSummrayData=null,a.overFlowData=null,a.selectedOverFlow=null,a.selectedOverFlowIndex=0,d.summaryOptions&&(a.options=a.$parent.$eval(d.summaryOptions));var e=this;a.options&&(a.maxItemCount=a.options.maxItemCount||b.maxItemCount),a.options&&(a.deepWatch=a.options.deepWatch||b.deepWatch),a.itemClick=function(b,c){a.summaryData[b].disable||(a.selectedIndex=b,a.onSelect&&a.onSelect(b,a.summaryData[b]))},a.overFlowItemClick=function(b){a.selectedOverFlow&&0!=a.selectedOverFlowIndex&&(a.selectedIndex=a.maxItemCount-1,a.onSelect&&a.onSelect(a.maxItemCount+a.selectedOverFlowIndex-2,a.selectedOverFlow))},a.onSelectClick=function(a){a.preventDefault(),a.stopPropagation()},a.overFlowItemChanged=function(b){a.selectedOverFlowIndex=a.overFlowData.indexOf(a.selectedOverFlow),0!=a.selectedOverFlowIndex&&(a.selectedIndex=a.maxItemCount-1,e.odometerUpdateByIndex(a.selectedIndex),a.onSelect&&a.onSelect(a.maxItemCount+a.selectedOverFlowIndex-2,a.selectedOverFlow))},this.updateData=function(b){if(b){var d=c.formatData(b,a);d.length>a.maxItemCount?(a.curSummaryData=d.slice(0,a.maxItemCount-1),a.overFlowData=d.slice(a.maxItemCount-1),a.overFlowData.unshift({title:"请选择"}),a.selectedOverFlow=a.overFlowData[a.selectedOverFlowIndex]):a.curSummaryData=d}}}]).factory("summaryFactory",["$filter",function(a){function b(a,b){var c={value:"",style:"","class":"",format:""};if(b&&(c=angular.extend(c,b)),"string"==typeof a)c.value=a;else{if("object"!=typeof a)return null;angular.extend(c,a)}return c}function c(a,c){d=c.options;for(var e,f=[],g=0;e=a[g];g++){var h=angular.extend({},e);h.mainValue=b(h.mainValue,d.main),h.footLeftValue=b(h.footLeftValue,d.footLeft),h.footRightValue=b(h.footRightValue,d.footRight),f.push(h)}return f}var d=null;return{formatData:c}}]).filter("summaryFilter",["$filter",function(a){function b(b,c){b=parseFloat(b);var d=c.split("_"),e=a("number")(b,d[1]||0);return d[2]&&b>0&&(e="+"+e),e}var c=/number/,d=/percent/,e=/date_/,f=/currency/;return function(g,h){return c.test(h)?g=b(g,h):d.test(h)?g=b(g,h)+"%":e.test(h)?g=a("date")(g,h.replace("date_","")):f.test(h)&&(g=a("currency")(g,h.replace(/currency_?/,"")||"￥")),g}}]).directive("graceSummary",["$timeout","$window","summaryConfig",function(a,b,c){return{restrict:"A",scope:{summaryData:"=",onSelect:"=?",triggerSelectOnLoaded:"@?"},replace:!0,templateUrl:"template/summary/summary.html",controller:"summaryController",link:function(c,d,e,f){function g(b){b&&(b=c.summaryData,f.updateData(b),a(function(){h=d.find(".odometer"),h.each(f.odometerUpdateByIndex)},10))}a(function(){b.Odometer&&Odometer.init()},0);var h;f.odometerUpdateByIndex=function(a){a>=c.curSummaryData.length?c.selectedOverFlow&&c.selectedOverFlow.mainValue&&$(h[a]).html(c.selectedOverFlow.mainValue.value):$(h[a]).html(c.curSummaryData[a].mainValue.value)},c.options.deepWatch?c.$watch(function(){for(var a,b=c.summaryData,d="",e=0;a=b[e];e++)d+=a.mainValue.value,a.footLeftValue&&(d+=a.footLeftValue.value),a.footRightValue&&(d+=a.footRightValue.value);return d},g):c.$watch("summaryData",g)}}}]),angular.module("grace.bootstrap.summaryList",["grace.bootstrap.tooltip","grace.bootstrap.dataFormatter"]).controller("SummaryListController",["$scope","$gDataFormatterFactory",function(a,b){a.format=function(a){if(!a)return a;for(var c=0,d=a.length;d>c;c++)a[c].format&&(a[c].value=b(a[c].value,a[c].format));return a},a.adapterDataLength=function(a){var b=a.data;if(!b)return a;for(var c=0,d=0,e=0,f=0;4>f;f++)b[f]||b.push({});if(b.length>4){if(c=Math.floor(b.length/4),d=b.length%4,c>1){b[0]=[b[0]],b[1]=[b[1]],b[2]=[b[2]],b[3]=[b[3]];for(var f=1;c>f;f++)e=4*f,b[0].push(b[e]),b[1].push(b[e+1]),b[2].push(b[e+2]),b[3].push(b[e+3])}for(var f=0;d>f;f++)b[f]instanceof Array||(b[f]=[b[f]]),b[f].push(b[4*c+f]);b.splice(4),a.height||(a.height=40*(c+(d>0?1:0))-10)}return a}}]).directive("graceSummaryList",function(){return{templateUrl:"template/summaryList/summaryList.html",restrict:"AE",scope:{summaryListData:"="},controller:"SummaryListController",link:function(a,b,c,d){a.summaryListData.data&&a.summaryListData.data.length>0&&(a.summaryListData.data=a.format(a.summaryListData.data),a.summaryListData=a.adapterDataLength(a.summaryListData)),a.rowheight=a.summaryListData.height?a.summaryListData.height:40,b.find("h3").css("height",a.rowheight+"px").css("line-height",a.rowheight+"px")}}});var app=angular.module("grace.bootstrap.table",["grace.bootstrap.dropdown"]).constant("tableConfig",{autoIncrement:!1,enableFn:!0,fnThText:"操作",NORMAL_TYPE:"x,xxx.xx",formatType:null,isFormat:!1}).config(["$sceProvider",function(a){a.enabled(!1)}]).controller("tableController",["$scope","tableConfig","$http","tableFactory",function(a,b,c,d){a.autoIncrement=b.autoIncrement,a.enableFn=b.enableFn,a.fnThText=b.fnThText,a.isArray=function(a){return a instanceof Array&&a instanceof Object?!0:!1},a.isObject=function(a){return a instanceof Object&&!(a instanceof Array)?!0:!1},a.isFnConfig=function(a){return"object"==typeof a&&a.fn?!0:!1},a.isFnCell=function(b){return a.isFnConfig(a.isArray(b)?b[0]:b)},a.searchData=function(b,c){var d=b.target,e=angular.element(d).parent().find("input").val();if(13===b.keyCode||"undefined"==typeof b.keyCode){if(!a.action)return void console.error("Table: Search Title Must Have Action");a.action({code:c.code,query:e})}},a.$watch("tableData",function(b){b&&d.formatData(a,b)}),a.isThEmpty=function(){return a.tableData&&a.tableData.head[0]?!1:!0},a.editCell=function(b,c,d){a.curEditItem=c,a.curColIndex=d},a.onEditDispatch=function(){var b=a.tableData.head,c=b[a.curColIndex];c.onEdit&&c.onEdit(b,a.curEditItem,a.curColIndex)},a.tipBubbleFormatter=function(a){return a?(angular.isNumber(a)&&(a+=""),a.replace(/<.*?>/g,"")):a},a.onFilterDispatch=function(b,c){b.selected=b.filter[c],a.filterAction&&a.filterAction(b,b.selected),console.log(arguments)},a.htmlLog=function(){console.log(arguments)}}]).factory("tableFactory",["tableConfig",function(a){function b(b,c){var d=c.body,e=c.head,f=[],g=[];g=g.concat(e),b.autoIncrement&&g.unshift({name:"",code:null}),b.enableFn&&g.push({name:b.fnThText,code:null});for(var h,i=0;h=g[i];i++)h.isSearch&&(h.type="search"),"filter"==h.type&&(h.selected||(h.selected=h.filter[0]));for(var j,k=0;j=d[k];k++){var l=[];l=l.concat(j),b.autoIncrement&&l.unshift(k+1),a.enableFn&&!j.$$fn?j.$$fn=[{name:"remove",text:"删除",iconClass:"",fn:function(a){console.log("to remove...")}},{name:"modify",text:"修改",iconClass:"",fn:function(a){console.log("to modify...")}}]:a.enableFn&&(l.$$fn=j.$$fn),f.push(l)}c.body=f,c.head=g}return{formatData:b}}]).filter("tableFilter",["tableConfig","$filter",function(a,b){function c(a){var c=(""+a).match(/(-?|\+?){0,1}([\d\.]+)(%?)$/);return!c||isNaN(c[2])?a:(c[2]=c[2].replace(/\.0*$/,""),c[2]=100*parseFloat(c[2]),c[2]=(""+c[2]).replace(/(\.\d{2}).*/,"$1"),c[3]=c[3]?c[3]:"%",(c[1]?c[1]:"")+b("number")(c[2])+c[3])}function d(a){var b,c=a,d=new Date(a)+"";return c=d.match(/\d{2}:\d{2}:\d{2}/)[0].split(":"),b=d.match(/Jan (\d+) 1970/)[1],c[0]=parseInt(b)>1?parseInt(c[0])+24*(b-2)+16:(parseInt(c[0])-8+"").replace(/^(\d?)(\d)$/,function(){return(arguments[1]?arguments[1]:"0")+arguments[2]}),c.join(":")}function e(a){var c=(""+a).match(/^(-?|\+?){0,1}([\d\.]+)(%?)$/);return!c||isNaN(c[2])?a:(c[2]=c[2].replace(/\.0*$/,""),a=(""+c[2]).replace(/(\.\d{2}).*/,"$1"),(c[1]?c[1]:"")+b("number")(a)+(c[3]?c[3]:""))}return function(b,f){if("SkuId"==f||"TimeDay"==f||"BatchesId"==f||"BatchId"==f)return b;if(a.isFormat&&a.formatType==a.NORMAL_TYPE||a.isFormat&&!a.formatType){var g=val=b;switch(f){case"BouncesRate":case"SiteConversionRate":case"GoalConversionRate":case"NewVisitorVisitsPercent":case"OnePageUvRate":case"OrderConversionRate":g=c(val);break;case"AvgPageRt":g=d(1e3*val);break;case"AvgLoadSec":g=(val/1e3).toFixed(2)+"s";break;case"AvgSiteRt":g=d(1e3*val);break;default:g=e(val)}return g}return b}}]).directive("graceTable",["tableConfig",function(a){return{restrict:"EA",require:["graceTable"],controller:"tableController",templateUrl:"template/table/table.html",replace:!0,scope:{tableData:"=",action:"=",filterAction:"="},link:function(b,c,d){function e(a){var b=a.find(".grace-table-group");b.remove(),a.children().show()}"true"==d.autoIncrement&&(b.autoIncrement=!0),d.fnThText&&(b.fnThText=d.fnThText),d.formatType&&(a.formatType=d.formatType),d.isFormat&&(a.isFormat=!!d.isFormat),b.enableFn="true"==d.enableFn?!0:!1;var f=angular.element(c),g=!1,h=null;f.on("click",".grace-table-btn-edit",function(a){var c=angular.element(a.currentTarget),d=c.parent();h&&d!=h&&e(h),h=d,c.prev().hide(),c.hide();var f="<span class='grace-table-group' autofocus ><input class='grace-table-input-edit' /><i class='grace-table-btn-ok' >&#10004;</i><i class='grace-table-btn-cancel'>&#10008;</i></span>",i=angular.element(f);d.append(i),i.find(".grace-table-input-edit").val(b.curEditItem[b.curColIndex]),g=!0}).on("click",".grace-table-btn-ok",function(a){var c=angular.element(a.currentTarget);console.log("ok.......");var d=c.parent(),f=d.parent(),g=d.find(".grace-table-input-edit"),h=g.val();return h?(b.$apply(function(){b.curEditItem[b.curColIndex]=h,b.onEditDispatch()}),void e(f)):void alert("不能为空")}).on("click",".grace-table-btn-cancel",function(a){var b=angular.element(a.currentTarget);console.log("cancel....");var c=b.parent(),d=c.parent();e(d)}).on("keyup",".grace-table-input-edit",function(a){{var b=angular.element(a.currentTarget),c=b.parent(),d=(c.parent(),b);d.val()}13==a.keyCode&&c.find(".grace-table-btn-ok").trigger("click")}).on("click",function(a){a.stopPropagation()}).on("click","span.grace-table-group",function(a){a.stopPropagation()})}}}]).directive("graceTableCell",function(){return{restrict:"A",require:"^graceTable",scope:{cellData:"="},link:function(a,b){var c=a.cellData;if("object"==typeof c){b.html(c[0]);for(var d,e="",f=1;d=c[f];f++)e+="<div>"+d+"</div>";e&&b.after(angular.element(e))}else b.html(c)}}});angular.module("grace.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("grace.bootstrap.textarea",["grace.bootstrap.dynamicName"]).constant("textareaConst",{defaultMaxLen:1e5,blankText:"该字段不能为空"}).controller("textareaController",["$scope","textareaConst","$timeout",function(a,b,c){a.result={value:""},a.validResult={text:""},a.maxLength=b.defaultMaxLen,a.publishApi=function(){var b={update:function(){c(function(){a.init()},0)},getValue:function(){return a.getValue()},disable:function(b){c(function(){a.config.input?a.config.input.disabled=b:a.config.input={disabled:b}},0)}};return a.instanceHandler=b},a.init=function(){var b=a.config.value;angular.isDefined(b)&&(a.result.value=b)},a.$watch("result.value",function(c,d){var e,f=a.config,g=a.validResult;g.text="",f.input&&(String(c).length||(e=f.input.allowBlank,angular.isDefined(e)&&!e&&(g.text=b.blankText))),a.modelCtrl&&a.modelCtrl.$setViewValue(c);try{a.config.callback.onChange(c)}catch(h){}}),a.publishApi(),a.init()}]).directive("graceTextarea",[function(){return{restrict:"EA",replace:!0,require:["^?graceFieldManager","?ngModel"],templateUrl:"template/textarea/textarea.html",scope:{config:"=",instanceHandler:"=?"},controller:"textareaController",link:function(a,b,c,d){var e=d[1]||{$setViewValue:angular.noop,$validators:{}};a.modelCtrl=e,e.$validators.emptyValid=function(b,c){var d=a.config;return d&&d.input&&d.input.allowBlank===!1?angular.isUndefined(b)?!1:!!b.length:!0},e.$render=function(){a.result.value=e.$viewValue},b.find("textarea").on("blur",function(){""!=a.validResult.text&&angular.element(this).addClass("error")}).on("focus",function(){angular.element(this).removeClass("error")}),a.getValue=function(){return a.result.value},a.getName=function(){return a.config.input?a.config.input.name:""},d.length&&d[0]&&d[0].addField({type:"textarea",element:b,scope:a})}}}]),angular.module("grace.bootstrap.utils",[]).factory("graceUtil",[function(){function interpolater(template,context,options){return options=_ext({codeBracketStart:"<%",codeBracketEnd:"%>",codeOpBracketStart:"<%="},options),template=template.replace(/\r|\n/g,"").replace(/(<%=)/g,"$1$codeOp$").replace(/(<%)[^=]/g,"$1$code$").replace(/(['"])/g,"\\$1").split(/<%=|<%|%>/),template.forEach(function(a,b,c){c[b]=-1!=a.indexOf("$code$")?a.replace(/\$code\$/g,""):-1!=a.indexOf("$codeOp$")?a.replace(/\$codeOp\$/,"res+="):'res += "'+a+'";'}),template.unshift('with(context){ var res = "";'),template.push("}"),template=template.join("\r\n"),eval(template)}function template(){}var _ext=angular.extend;return{interpolater:interpolater,template:template}}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="grace-alert" ng-class="[\'alert-\' + (type || \'warning\')]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/checkbox/checkbox.html",[]).run(["$templateCache",function(a){a.put("template/checkbox/checkbox.html",'<div class="grace-checkbox">\n	<label class="checkbox-label" ng-style="config.label.style" ng-show="config.label.text">\n		<span ng-if="!config.input.allowBlank" class="not-blank">*</span>\n		{{config.label.text}}\n	</label>\n	<div class="item-container {{!!config.label.text ? \'\' : \'all\'}}" ng-class="{\'disabled\': config.input.disabled}">\n		<div ng-repeat="ck in config.list" ng-click="selectItem(ck)" class="grace-checkbox-item {{config.input.horizontal}}">\n			<i class="" ng-class="{\'grace-icon-check-empty uncheck-bdp-color\': !isSelect(ck.value), \'grace-icon-check bdp-color-blue\': isSelect(ck.value), \'bdp-color-gray\': config.input.disabled}"></i><input type="checkbox" value="ck.value" ng-model="ck.checked"/><label >{{ck.text}}</label>\n		</div>\n	</div>\n	<div class="items" style="display: none;" ng-transclude></div>\n	<input style="display: none;" dynamic-name="config.input.name" ng-model="selection" ng-list="," />\n</div>')}]),angular.module("template/chosenAssociate/chosenAssociate.html",[]).run(["$templateCache",function(a){a.put("template/chosenAssociate/chosenAssociate.html",'<div class="grace-select-by-associate clearfix" ng-class="{\'disabled\': config.input.disabled,\'has-label\':config.label}">\n	<label ng-if="config.label" class="associate-label" ng-style="config.label.style" ><span>{{config.label.text}}</span></label>\n    <div class="associate-main" >\n    <div class="associate-input" id="chose-single" ng-show="!plural" ng-class="{\'bdp-unfocus\': !focusing, \'bdp-focus\': focusing}">\n		<span ng-bind="ngModel.selected.name"></span>\n		<div class="dropdown-icon grace-icon-caret-down" ng-class="{\'unfucus-bdp-color\': !focusing, \'bdp-color-blue\': focusing}">\n		</div>\n	</div>\n	<div class="associate-input" id="chose-plural" ng-show="plural" ng-class="{\'bdp-unfocus\': !focusing, \'bdp-focus\': focusing}">\n		<span class="choice-close" ng-repeat="con in ngModel.selected"><a ng-mouseup="choiceCloseClick(con, $event)"></a><i ng-class="con.class" ng-bind-html="trust(con.name)"></i></span>\n		<input class="plural-expression" ng-model="expression" ng-focus="getWidth($event)" ng-blur="setWidth($event)"  ng-keyup="selectFuzzy()" type="text"/>\n		<div class="dropdown-icon grace-icon-caret-down" ng-class="{\'unfucus-bdp-color\': !focusing, \'bdp-color-blue\': focusing}"></div>\n	</div>\n	<div class="associate-body body-plural{{plural}}" ng-style="{display:bodyShow?\'block\':\'none\'}">\n		<input class="associate-expression" ng-show="!plural" type="text" ng-model="expression" ng-keyup="selectFuzzy()" />\n		<div class="dropdown-icon grace-icon-search bdp-color-blue search-icon">\n		</div>\n		<div class="associate-box">\n	        <p ng-show="!currentPageData.length">\n	            没有匹配项\n	        </p>\n		    <ul class="chosen chosen{{isPaging}}">\n		        <li ng-repeat="con in currentPageData">\n		            <a ng-click="changeConfigured(con)" ng-bind-html="trust(con.name)"></a>\n		        </li>\n		    </ul>\n		    <!-- <div class="pagination-container found-pages" ng-show="isPaging" style="position:relative;">\n		        <div class="pagination-info">\n		            <span>共{{pagegroup.totalPages}}页</span>\n		            <span>到第<input pagination-input tableType="pagegroup" type="tel"/>页</span>\n		        </div>\n		        <pagination ng-change="pagegroup.changePage()" boundary-links="true" total-items="pagegroup.totalItems"\n		                    ng-model="pagegroup.currentPage" items-per-page="pagegroup.itemsPerPage" class="pagination-sm"\n		                    previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;"\n		                    last-text="&raquo;"></pagination>\n		    </div> -->\n		</div>\n	</div>\n	<div class="no-input"></div>\n    </div>\n	<input style="display: none;" ng-if="config.input.name" dynamic-name="config.input.name" ng-model="formFieldModel" ng-list=","  />\n</div>')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)" class="grc datepicker" >\n  <grace-daypicker  ng-switch-when="day" tabindex="0"></grace-daypicker>\n  <grace-monthpicker  ng-switch-when="month" tabindex="0"></grace-monthpicker>\n  <grace-yearpicker  ng-switch-when="year" tabindex="0"></grace-yearpicker>\n    <grace-hourpicker ng-switch-when="hour" tabindex="0"></grace-hourpicker>\n    <grace-minutepicker ng-switch-when="minute" tabindex="0"></grace-minutepicker>\n</div>')}]),angular.module("template/datepicker/daterangepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/daterangepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)" class="grc datepicker" >\n	\n    <grace-daypicker-range ng-switch-when="day" tabindex="0"></grace-daypicker-range>\n    <grace-monthpicker-range ng-switch-when="month" tabindex="0"></grace-monthpicker-range>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<div>\n    <table role="grid" class="day-picker" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n      <thead>\n        <tr>\n          <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n          <th colspan="{{5 + showWeeks}}" class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="grace-btn btn-default btn-sm" ng-class="{\'click-disabled\': switchDisabled}" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n          <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n        </tr>\n        <tr>\n          <th ng-show="showWeeks" class="text-center">周</th>\n          <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="row in rows track by $index">\n          <td ng-show="showWeeks" class="text-center h6">\n              <em class="grace-btn btn-default btn-sm"\n                      ng-click="selectWeek(weekNumbers[$index])" ng-class="{active: weekNumbers[$index].selected}">{{ weekNumbers[$index].week }}</em>\n          </td>\n          <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n            <button type="button" style="width:100%;" class="grace-btn btn-default btn-sm"\n                    ng-class="{\'btn-info\': dt.selected, active: dt.selected,\'cell-muted\': dt.secondary,weekend:dt.weekend}"\n                    ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1">\n                <span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n</div>')}]),angular.module("template/datepicker/dayrange.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/dayrange.html",'<div class="datepicker-group" >\n    <table role="grid" class="day-picker" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}" ng-repeat="rows in rowsGroup track by $index">\n        <thead>\n        <tr>\n            <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n            <th colspan="{{5 + showWeeks}}" class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="grace-btn btn-default btn-sm" ng-class="{\'click-disabled\': switchDisabled}" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{titles[$index]}}</strong></button></th>\n            <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n        </tr>\n        <tr>\n            <th ng-show="showWeeks" class="text-center">周</th>\n            <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n        </tr>\n        </thead>\n        <tbody ng-init="weekNumbers = weekNumbersGroup[$index]" >\n        <tr ng-repeat="row in rows track by $index">\n            <td ng-show="showWeeks" class="text-center h6">\n                <em class="grace-btn btn-default btn-sm"\n                    ng-click="selectWeek(weekNumbers[$index])" ng-class="{active: weekNumbers[$index].selected}">{{ weekNumbers[$index].week }}</em>\n            </td>\n            <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n                <button type="button" style="width:100%;"\n                        class="grace-btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: dt.selected, \'cell-muted\': dt.secondary,\'weekend\':dt.weekend}"\n                        ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1">\n                    <span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span>\n                </button>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n\n');

}]),angular.module("template/datepicker/hour.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/hour.html",'<table role="grid" class="hour-picker" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n    <thead>\n    <tr>\n        <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n        <th colspan="3"  class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="grace-btn btn-default btn-sm" ng-class="{\'click-disabled\': switchDisabled}" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n        <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="row in rows track by $index">\n        <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n            <button type="button"\n                    style="width:100%;"\n                    class="grace-btn btn-default"\n                    ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}"\n                    ng-click="select(dt.date)"\n                    ng-disabled="dt.disabled"\n                    ng-if="!!dt"\n                    tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n        </td>\n    </tr>\n    </tbody>\n</table>\n')}]),angular.module("template/datepicker/minuteOrSecond.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/minuteOrSecond.html",'<table role="grid" class="minuteOrSecond-picker" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n    <thead>\n    <tr>\n        <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n        <th colspan="3"  class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="grace-btn btn-default btn-sm" ng-class="{\'click-disabled\': switchDisabled}" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n        <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="row in rows track by $index">\n        <td ng-repeat="dt in row track by dt.uid" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n            <button type="button"\n                    style="width:100%;"\n                    class="grace-btn btn-default"\n                    ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}"\n                    ng-click="select(dt.date)"\n                    ng-disabled="dt.disabled"\n                    ng-if="!!dt.date"\n                    tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n        </td>\n    </tr>\n    </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" class="month-picker" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n      <th class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="grace-btn btn-default btn-sm" ng-class="{\'click-disabled\': switchDisabled}" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="grace-btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/monthrange.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/monthrange.html",'<div class="datepicker-group" >\n    <table role="grid" class="month-picker" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}" ng-repeat="rows in rowsGroup track by $index">\n        <thead>\n        <tr>\n          <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n          <th class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="grace-btn btn-default btn-sm" ng-class="{\'click-disabled\': switchDisabled}" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{titles[$index]}}</strong></button></th>\n          <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="row in rows track by $index">\n          <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n            <button type="button" style="width:100%;" class="grace-btn btn-default" ng-class="{\'btn-info\': dt.selected, active: dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n          </td>\n        </tr>\n      </tbody>\n\n        <!-- <thead>\n        <tr>\n            <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n            <th colspan="{{5 + showWeeks}}" class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="grace-btn btn-default btn-sm" ng-class="{\'click-disabled\': switchDisabled}" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{titles[$index]}}</strong></button></th>\n            <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n        </tr>\n        <tr>\n            <th ng-show="showWeeks" class="text-center">周</th>\n            <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n        </tr>\n        </thead>\n        <tbody ng-init="weekNumbers = weekNumbersGroup[$index]" >\n        <tr ng-repeat="row in rows track by $index">\n            <td ng-show="showWeeks" class="text-center h6">\n                <em class="grace-btn btn-default btn-sm"\n                    ng-click="selectWeek(weekNumbers[$index])" ng-class="{active: weekNumbers[$index].selected}">{{ weekNumbers[$index].week }}</em>\n            </td>\n            <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n                <button type="button" style="width:100%;"\n                        class="grace-btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: dt.selected, \'cell-muted\': dt.secondary,\'weekend\':dt.weekend}"\n                        ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1">\n                    <span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span>\n                </button>\n            </td>\n        </tr>\n        </tbody> -->\n    </table>\n</div>\n\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" id="{{uniqId}}" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="grace-btn-group">\n			<button ng-if="showCurrentButton"  type="button" class="grace-btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button ng-if="showClearButton" type="button" class="grace-btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n            <button ng-if="showEnterButton" type="button" class="grace-btn btn-sm btn-info" ng-click="enter()" >{{ getText(\'enter\') }}</button>\n		</span>\n		<button ng-if="showCloseButton" type="button" class="grace-btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" class="year-picker" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="grace-icon-chevron-left"></i></button></th>\n      <th colspan="3" class="th-header"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" ng-class="{\'click-disabled\': switchDisabled}" class="grace-btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th class="th-arrow"><button type="button" class="grace-btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="grace-icon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="grace-btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/dimension/dimension.html",[]).run(["$templateCache",function(a){a.put("template/dimension/dimension.html",'<section>\n    <section class="grace-section-dimension01" >\n        <div class="grace-dimension-0 grace-dimension-0-new" ng-show="showContrastOption" ><dt><label>维度对比：</label> </dt>\n            <span ng-click="checkContrast(true)" class="grace-dimension-contrast-new"  ng-class="{\'on\':isContrast}" >开启</span>\n            <span ng-click="checkContrast(false)" class="grace-dimension-contrast-new"  ng-class="{\'on\':!isContrast}" >关闭</span>\n        </div>\n        <dl ng-repeat="node0 in dimensionData"  class="grace-dimension-0 grace-dimension-0-new" >\n            <dt><label>{{node0.name}}:</label></dt>\n            <dd ng-repeat="node1 in node0.children"  ng-class="{checked:node1.checked}" >\n                <a ng-click="nodeClick($event,node1)" >{{node1.name}}</a>\n                <span ng-if="node1.children.length" ng-click="showSubDimension($event,node1)" class="grace-dimension-dropdown grace-dimension-dropdown-new level{{node1.level}}" >\n                    <i></i>\n                </span>\n            </dd>\n        </dl>\n        <dl class="grace-dimension-0 selected" ng-show="isBtn">\n            <dt><label>已选择：</label></dt>\n            <dd ng-repeat="(k,s) in selected" class="checked" >\n                <a>{{s.nameChain.join(\' > \')}}</a>\n                <span class="grace-dimension-x" ng-click="cancelSelect(k)" >&times;</span>\n            </dd>\n        </dl>\n        <div class="grace-dimension-0" ng-show="isBtn">\n            <span class="grace-dimension-button" ng-click="onAction()" ng-class="{disable:!selectedNode.length}" >查询</span>\n        </div>\n    </section>\n    <section class="grace-section-dimension23" ng-show="showDimension23" >\n        <div>\n            <div class="grace-search-group" >\n                <input type="text" placeholder="请输入要搜索的内容" level="23"  class="grace-dimension-searchbox" />\n                <span class="grace-dimension-searchbtn" ></span>\n                <span class="grace-searchbox-closebtn" ng-click="closeSearchBox(23)" ng-show="searchKeyWord23" >&times;</span>\n                <div class="grace-searchbox-searchResult" ng-show="!searchResult23Empty" >\n                    <span class="grace-searchbox-resultItem"  ng-repeat="item in searchResult23" ng-click="nodeClick($event,item)" ng-class="{checked:item.checked}" >{{item.name}}</span>\n                </div>\n            </div>\n        </div>\n        <div class="grace-dimension-2"  >\n            <div ng-repeat="c2 in curDimensionData23.children" >\n                <ul>\n                    <div><a ng-class="{checked:c2.checked}" ng-click="nodeClick($event,c2)" >{{c2.name}}</a></div>\n                    <li ng-repeat="c3 in c2.children" ng-class="{checked:c3.checked}" >\n                        <a ng-click="nodeClick($event,c3)" >{{c3.name}}</a>\n                        <span ng-if="c3.children.length" ng-click="showSubDimension($event,c3)" class="grace-dimension-dropdown level{{c3.level}}" >\n                            <i></i>\n                        </span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <i class="grace-dimension-arrow" ></i>\n    </section>\n    <section class="grace-section-dimension45" ng-show="showDimension45" >\n        <div>\n            <div class="grace-search-group" >\n                <input type="text" placeholder="请输入要搜索的内容" class="grace-dimension-searchbox" level="45" />\n                <span class="grace-dimension-searchbtn" ></span>\n                <span class="grace-searchbox-closebtn" ng-click="closeSearchBox(45)" ng-show="searchKeyWord45" >&times;</span>\n                <div class="grace-searchbox-searchResult" ng-show="!searchResult45Empty" >\n                    <span class="grace-searchbox-resultItem"  ng-repeat="item in searchResult45" ng-click="nodeClick($event,item)" ng-class="{checked:item.checked}"  >{{item.name}}</span>\n                </div>\n            </div>\n\n        </div>\n        <div class="grace-dimension-4" >\n            <div ng-repeat="c4 in curDimensionData45.children" >\n                <ul>\n                    <div><a ng-class="{checked:c4.checked}" ng-click="nodeClick($event,c4)" >{{c4.name}}</a></div>\n                    <li ng-repeat="c5 in c4.children" ng-class="{checked:c5.checked}" >\n                        <a ng-click="nodeClick($event,c5)" >{{c5.name}}</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <i class="grace-dimension-arrow" ></i>\n    </section>\n\n</section>')}]),angular.module("template/dimensionBaseSelect/dimensionBaseSelect.html",[]).run(["$templateCache",function(a){a.put("template/dimensionBaseSelect/dimensionBaseSelect.html",'<div class="grace-search-conditions clearfix">\n   <div class="search-item-title clearfix">\n       <span class="search-title" code="{{data.code}}" ng-style="config.label.style" >{{config.label.text || data.name}}:</span> <!--<span class="semicolon-right">:</span>-->\n   </div>\n   <div class="search-list" ng-class="{heightfix:heightFix, heightinherit:heightInherit}">\n    <div class="flod" ng-click="flod($event)"  ng-show="isShowflod">\n        <div class="up-down-icon grace-icon-angle-up" ng-class="{\'grace-icon-angle-up\':isIconUp, \'grace-icon-angle-down\': isIconDown}"></div>\n        <div class="up-down-text">{{flodStatus}}</div>\n      </div>\n    <div class="margin-rignt-80">\n      <div class="search-label" ng-class="{hidelist:hideList}" ng-repeat="di in data.detail">\n           <span ng-class="{active:(selStatus.indexOf(di.code)>-1 && isMult), active2:(selStatus.indexOf(di.code)>-1 && !isMult), active3:!isMult}"  ng-click="select(di,$index)" code="{{di.code}}">\n            <div ng-if="isMult" class="occupy" ng-class="{active:selStatus.indexOf(di.code)>-1}"></div> {{di.name}}\n           </span>\n       </div>\n       <div class="search-custom" ng-class="{showcustom:hideList}">\n           <input class="city-input" placeholder="搜索省份及城市" ng-keyup="keyUp($event)"/>\n           <span class="cancel-button" ng-click="return()">取消</span>\n       </div>\n    </div>\n   </div>\n    <input type="text" style="display: none;" ng-model="selStatus" ng-list="," dynamic-name="config.input.name" >\n</div>')}]),angular.module("template/dimensionBaseSelect/dimensionSelectWithCheckBox.html",[]).run(["$templateCache",function(a){a.put("template/dimensionBaseSelect/dimensionSelectWithCheckBox.html",'<div class="grace-search-conditions clearfix">\n    <div class="clearfix">\n        <div class="search-item-title clearfix">\n            <span class="search-title" code="{{data.code}}">{{data.name}}</span> <span class="semicolon-right">:</span>\n        </div>\n        <div class="search-list">\n            <div class="search-label" ng-repeat="di in data.detail">\n                <span ng-class="{active:selStatus.indexOf(di.code)>-1?true:false, active1:di.checkboxselect, di_sel: di.isDrop, active4:di.detail}" ng-click="select(di, $index, data.detail)" code="{{di.code}}">\n                    <div ng-if="!di.detail" class="occupy" ng-class="{active:selStatus.indexOf(di.code)>-1?true:false, active2:(di._checked)}"></div>\n                    <i style="font-style: normal;" ng-bind="di.name"></i>\n                    <em class="triangle-png-down" ng-if="di.detail"></em>\n                </span>\n                <div ng-if="di.detail" class="cond-dropdown" ng-show="di.showCheckBoxList" ng-mouseleave="hideCheckboxList(di)">\n                    <ul>\n                        <li ng-repeat="diDrop in di.detail" style="border-bottom:0px;">\n                            <label>\n                                <div name="{{diDrop.code}}" code="{{diDrop.code}}" ng-click="updateShowButtonForCheck(diDrop.code, di)">\n                                    <div class="occupy" ng-class="{active:selStatus.indexOf(diDrop.code)>-1?(di._checked=true):false}" ></div>\n                                    <i style="font-style: normal;" ng-bind="diDrop.name"></i>\n                                </div>\n                            </label>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ordertypediv clearfix" style="display: none;">\n        <div class="ordertypediv-content">\n            <ul>\n                <li ng-repeat="val in _orderType" class="">\n                    <div class="dropdownshowbutton clearfix">{{val.newName}}\n                        <div class="close-img" ng-click="updateShowButton(val.code)"><div>\n                        </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n')}]),angular.module("template/dimensionBaseSelect/dimensionSelectWithCustom.html",[]).run(["$templateCache",function(a){a.put("template/dimensionBaseSelect/dimensionSelectWithCustom.html",'<div class="grace-search-conditions clearfix">\n   <div class="search-item-title">\n       <span class="search-title" code="{{data.code}}">{{data.name}}</span><span class="semicolon-right">:</span>\n   </div>\n   <div class="search-list">\n       <div class="search-label"  ng-class="{hidelist:hideList}" ng-repeat="di in data.detail">\n           <!--<span ng-class="{active:selStatus.indexOf(di.code)>-1?true:false}"  ng-click="select(di,$index)" code="{{di.code}}">-->\n           <span ng-if="!isCustom(di)" ng-class="{active:(selStatus.indexOf(di.code)>-1 && isMult), active2:(selStatus.indexOf(di.code)>-1 && !isMult), active3:!isMult}"  ng-click="select(di,$index)" code="{{di.code}}">\n               <div ng-if="isMult" class="occupy" ng-class="{active:selStatus.indexOf(di.code)>-1?true:false}"></div> {{di.name}}\n           </span>\n           <span id="graceDiCustom" ng-if="isCustom(di)" class="custom"  ng-class="{active: customSelected}"  ng-click="select(di,$index)" code="{{di.code}}">\n           {{di.name}}\n           </span>\n       </div>\n       <div  class="search-custom" ng-class="{showcustom:hideList}">\n           <input id="graceDiCusInputBox" class="city-input" placeholder="搜索省份及城市"/>\n           <span class="cancel-button" ng-click="return()">取消</span>\n       </div>\n   </div>\n</div>')}]),angular.module("template/dimensionBaseSelect/dimensionSelectWithRadioBox.html",[]).run(["$templateCache",function(a){a.put("template/dimensionBaseSelect/dimensionSelectWithRadioBox.html",'<div class="grace-search-conditions clearfix">\n    <div class="clearfix">\n        <div class="search-item-title clearfix">\n            <span class="search-title" code="{{data.code}}">{{data.name}}</span>\n            <span class="semicolon-right">:</span>\n        </div>\n        <div class="search-list">\n            <div class="search-label" ng-repeat="di in data.detail">\n                <span ng-class="{active:selStatus.indexOf(di.code)>-1?true:false, active1:di.checkboxselect, di_sel: di.isDrop, active4:di.detail}" ng-click="select(di, $index, data.detail)" code="{{di.code}}">\n                    <div ng-if="!di.detail" class="occupy" ng-class="{active:selStatus.indexOf(di.code)>-1?true:false, active2:(di._checked)}"></div>\n                    <i style="font-style: normal;" ng-bind="di.name"></i>\n                    <em class="triangle-png-down" ng-if="di.detail" ng-click="hideCheckboxListForClick(di, di.isDrop, $event)"></em>\n                </span>\n                <div ng-if="di.detail" class="cond-dropdown" ng-show="di.showCheckBoxList" ng-mouseleave="hideCheckboxList(di)">\n                    <ul style="min-width: 90px;margin: 5px 0;">\n                        <li ng-repeat="diDrop in di.detail" style="border-bottom:0px;">\n                            <label style="padding: 0;">\n                                <div name="{{diDrop.code}}" code="{{diDrop.code}}" ng-click="updateShowButtonForCheck(diDrop.code, di)" ng-class="{activeradio:selStatus.indexOf(diDrop.code)>-1?(di._checked=true):false}" style="padding-left: 10px;">\n                                    {{diDrop.name}}\n                                </div>\n                            </label>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="grace-tooltip {{placement}} {{theme}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="grace-tooltip-arrow"></div>\n  <div class="grace-tooltip-inner" grace-bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="grace-tooltip {{placement}} {{theme}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="grace-tooltip-arrow"></div>\n  <div class="grace-tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/grid/grid.html",[]).run(["$templateCache",function(a){a.put("template/grid/grid.html","<div class=\"grace-grid-container grace-grid-container{{gridId}}\" >\n    <style grace-grid-style >\n        .grace-grid-container{{gridId}} {\n            padding-top:{{valueParse(screenerHeight)}};\n            padding-bottom:{{valueParse(paginationHeight)}};\n        }\n        .grid{{ gridId }} {\n            width:{{valueParse(gridWidth)}};\n            height:{{valueParse(gridHeight)}};\n            overflow-x:{{ showScroller ? 'scroll':'hidden'}};\n            overflow-y:{{gridHeight != 'auto' && !enableInfiniteScroll && (gridHeight < getBodyHeight() + headerInfo.height) && 'scroll' || 'hidden' }};\n        }\n        .grid{{gridId}} .grace-grid-body .grace-grid-cell .cell-content {\n            height: {{valueParse(rowHeight == 'auto' ? rowHeight:rowHeight-1)}};\n            white-space: {{rowHeight == 'auto' ? 'normal':'nowrap'}};\n            text-overflow: {{rowHeight == 'auto' ? 'initial' : 'ellipsis'}};\n            {{rowHeight != 'auto' && ('line-height:'+valueParse(rowHeight-1)+\";\") }}\n        }\n        .grid{{gridId}} .grace-grid-body .grace-grid-cell .cell-content > span{\n            position: {{rowHeight == 'auto' ? 'relative':'absolute'}};\n        }\n        .grid{{gridId}} .grace-grid-body .grace-grid-cell .cell-content > span > span{\n            position: {{rowHeight == 'auto' ? 'relative':'absolute'}};\n        }\n        .grid{{gridId}} .grace-grid-header-cell{\n            height: {{valueParse(headerRowHeight)}};\n        }\n        .grid{{gridId}} header>div>div{\n            height: {{valueParse(headerInfo.height)}};\n        }\n        .grid{{gridId}} header{\n            height:{{valueParse(headerInfo.height)}};\n            width: {{valueParse(headerInfo.totalWidth + compensation )}};\n        }\n        .grid{{gridId}} section{\n            width: {{valueParse(bodyInfo.totalWidth + compensation )}};\n        }\n        .grid{{gridId}} .pinning-header .grace-grid-header-cell{\n            height:{{valueParse(headerInfo.height)}};\n        }\n        .grid{{gridId}} .empty-tips{\n            width: {{valueParse(headerInfo.totalWidth + compensation )}};\n        }\n        .grid{{gridId}} .grace-grid-selectall-cnt{\n            width:{{valueParse(gridWidth)}};\n        }\n        {{headerInfo.columnCss}}\n    </style>\n    <div grace-grid-screen ng-if=\"enableScreen\" ></div>\n\n    <div grace-grid-search-all ng-if=\"enableSearchAll\" ></div>\n\n    <div class=\"grid{{gridId}} grace-grid-wrapper\"  >\n"+'        <div class="grace-grid-scroller" id="gridScroller" >\n            <header class="clearfix" >\n                <div grace-grid-header header-data="headerInfo"></div>\n            </header>\n            <section ng-if="!gridDataEmpty" ng-class="{\'row-dragging-mode\':isDraggingMode}" >\n                <div ng-if="enableSelectAll" grace-grid-selectall ></div>\n                <div ng-if="simpleMode === false" grace-grid-body body-data="bodyInfo"></div>\n                <div ng-if="simpleMode === true" grace-grid-body-simple body-data="bodyInfo"></div>\n            </section>\n            <div ng-if="gridDataEmpty && !isLoading" class="empty-tips" ng-bind="dataEmptyText" >\n            </div>\n            <footer>\n            </footer>\n        </div>\n        <div grace-grid-scrollbar-vertical ng-if="enableInfiniteScroll" ></div>\n    </div>\n\n    <div grace-grid-pagination ng-if="enablePagination" ></div>\n\n    <div ng-show="isLoading" class="grace-loading" var="{{isLoading}}" >\n        <span  ><i class="grace-icon-spin grace-icon-spinner" ></i><span ng-bind="loadingText" ></span></span>\n    </div>\n</div>')}]),angular.module("template/grid/gridBody.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridBody.html",'<div class="clearfix" >\n    <div style="float: left" class="pinning-body" ng-if="bodyData.rows2Pinning[0][0]" >\n        <table class="grace-grid-body">\n            <tbody>\n                <tr ng-repeat="row in bodyData.rows2Pinning track by row.rowInfo.rowId"\n                    ng-class="{grouper:gridScope.groupingMode && row.rowInfo.hasChildren,\n                    grouperChild:gridScope.groupingMode && !row.rowInfo.hasChildren,\n                    expanded:row.rowInfo.expanded,\n                    selected:row.rowInfo.selected}"\n                    class="grace-grid-body-row row-depth{{row.rowInfo.depth}}"\n                    ng-mousedown="rowMousedown(row,$event,$index)"\n                    ng-click="rowClick(row,$event)"\n                    ng-if="row.rowInfo.visible"\n                    tr-index="{{$index}}" >\n                    <td ng-repeat="rowCell in row track by rowCell.cellId"\n                        grace-grid-cell\n                        cell-data="rowCell"\n                        row-index="row.rowInfo.originalRowIndex"\n                        ng-if="rowCell.visible" ></td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    <div style="float: left" class="normal-body" >\n        <table class="grace-grid-body">\n            <tbody>\n                <tr ng-repeat="row in bodyData.rows2Render track by row.rowInfo.rowId"\n                    ng-class="{grouper:gridScope.groupingMode && row.rowInfo.hasChildren && !bodyData.rows2Pinning[0][0],\n                    grouperChild:gridScope.groupingMode && !row.rowInfo.hasChildren && !bodyData.rows2Pinning[0][0],\n                    expanded:row.rowInfo.expanded && !bodyData.rows2Pinning[0][0],\n                    selected:row.rowInfo.selected}"\n                    class="grace-grid-body-row row-depth{{row.rowInfo.depth}}"\n                    ng-mousedown="rowMousedown(row,$event,$index)"\n                    ng-click="rowClick(row,$event)"\n                    ng-if="row.rowInfo.visible"\n                    tr-index="{{$index}}" >\n                    <td ng-repeat="rowCell in row track by rowCell.cellId"\n                        grace-grid-cell\n                        cell-data="rowCell"\n                        row-index="row.rowInfo.originalRowIndex"\n                        ng-if="rowCell.visible"  ></td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n');

}]),angular.module("template/grid/gridBodySimple.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridBodySimple.html",'<div class="clearfix" >\n    简易模式\n</div>\n')}]),angular.module("template/grid/gridCell.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridCell.html",'<td class="grace-grid-cell {{cellData.columnClasses}}"  >\n\n</td>')}]),angular.module("template/grid/gridFooter.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridFooter.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n\n</body>\n</html>')}]),angular.module("template/grid/gridFooterCell.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridFooterCell.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n\n</body>\n</html>')}]),angular.module("template/grid/gridHeader.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridHeader.html",'<div>\n    <div style="display: table-cell;float:left;" class="pinning-header" ng-if="headerData.columns2Pinning[0][0]" >\n    <table class="grace-grid-header " ng-if="gridScope.gridOptions.enablePinning" >\n        <thead>\n        <tr ng-repeat="cells in headerData.columns2Pinning track by $index" vars="{{rowIndex = $index}}" >\n            <th grace-grid-header-cell\n                ng-repeat="cell in cells track by cell.columnId"\n                cell-data="cell"\n                row-index="rowIndex"\n                column-index="$index"\n\n\n                ng-if="gridScope.gridOptions.enableScreen && cell.visible || !gridScope.gridOptions.enableScreen"\n                    ></th>\n        </tr>\n        </thead>\n    </table>\n    </div>\n    <div class="normal-header" style="display: table-cell;float:left;" >\n    <table class="grace-grid-header" >\n        <thead>\n        <tr ng-repeat="cells in headerData.columns2Render track by $index" vars="{{rowIndex = $index}}" >\n            <th grace-grid-header-cell\n                ng-repeat="cell in cells track by cell.columnId"\n                cell-data="cell"\n                row-index="rowIndex"\n                column-index="$index"\n\n\n                ng-if="gridScope.gridOptions.enableScreen && cell.visible || !gridScope.gridOptions.enableScreen"\n                    ></th>\n        </tr>\n        </thead>\n    </table>\n    </div>\n</div>\n')}]),angular.module("template/grid/gridHeaderCell.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridHeaderCell.html",'<th class="grace-grid-header-cell {{cellData.columnClasses}}"  colspan="{{cellData.colspan}}" rowspan="{{cellData.rowspan}}" >\n</th>')}]),angular.module("template/grid/gridPagination.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridPagination.html",'<div class="grace-grid-pagination grace-clear" ng-class="{\'grid-pagination-icon\':pageIcon}">\n    <grace-refresh-settime set-time-refresh="setTimeRefresh" refresh-change="changeTime" class="grid-settime-refresh" ng-if="enableSetRefresh" ng-bind-template="定时刷新"></grace-refresh-settime>\n    <div class="grid-refresh" ng-class="{\'grid-refresh-icon\':pageIcon}" ng-if="enableRefresh"><a href ng-click="refreshGrid();" ng-bind-template="刷新"></a></div>\n    <pagination ng-class="{\'grace-grid-icon\':pageIcon}"  total-items="totalItems"\n                ng-model="currentPageIndex"\n                max-size="paginationSize"\n                class="pagination-sm"\n                boundary-links="true"\n                rotate="true"\n                items-per-page="pageSize"\n                ng-change="changePage()"\n                num-pages="totalPages"\n                previous-text="{{previousText}}"\n                next-text="{{nextText}}"\n                first-text="{{firstText}}"\n                last-text="{{lastText}}"></pagination>\n\n    <div class="pagination-info" >\n        <span>第{{currentPageIndex}}/{{totalPages}}页</span>\n    </div>\n    <div class="pagination-info" >\n        <span>\n            到\n            <input type="number" ng-model="currentPageIndex" ng-change="changePage()" />\n            页\n        </span>\n    </div>\n    <div class="pagination-sizes" >\n        <!--每页<select ng-model="pageSize" ng-options="item for item in pageSizes" ng-change="changePage()" ></select>条-->\n        每页<grace-simple-select select-model="pageSizes" select-val="pageSize" content-change="changePage"></grace-simple-select>条\n    </div>\n\n    <div class="record-num" >\n        共{{totalItems}}条\n    </div>\n</div>')}]),angular.module("template/grid/gridScreener.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridScreener.html",'<div class="grace-grid-screen grace-clear" >\n    <div ng-if="screenConfig.type == \'in-line\'" >\n        <div class="screen-left" >{{screenConfig.screenLabel}}</div>\n        <div class="screen-right grace-clear">\n            <div class="screen-item"  ng-click="toggleAll($event)" >\n                <label>{{allSelector.label}}</label><i class="{{allSelector.checked?\'grace-icon-check\':\'grace-icon-unchecked\'}}"></i>\n            </div>\n            <div class="screen-item" ng-repeat="si in screener track by $index" ng-click="doCheck(si.field,$event)" >\n                <label>{{si.label}}</label><i class="{{si.checked?\'grace-icon-check\':\'grace-icon-unchecked\'}}"></i>\n            </div>\n        </div>\n    </div>\n    <div ng-if="screenConfig.type == \'drop-down\'" >\n        <div class="screen-drop-down-trigger" ng-click="showDropDown($event)" ng-class="{\'active\':dropDownConfig.active}" var="{{dropDownConfig.active}}" >\n            <span>{{screenConfig.screenLabel}}</span><i class="grace-icon-caret-down" ></i>\n        </div>\n        <div class="screen-drop-down"  ng-class="{active:dropDownConfig.active}" >\n            <ul class="clearfix"  ng-style="{width:screenConfig.dropDownWidth+\'px\'}" ng-class="{unClickable:visibleCount<=1}" >\n                <li class="screen-drop-down-item"  ng-click="toggleAll($event)" ng-style="{width:1/screenConfig.dropDownColumnCount*100+\'%\'}"  >\n                    <i class="{{allSelector.checked?\'grace-icon-check\':\'grace-icon-unchecked\'}}" ></i><label>{{allSelector.label}}</label>\n                </li>\n                <li class="screen-drop-down-item" ng-repeat="si in screener track by $index" ng-click="doCheck(si.field,$event)" ng-style="{width:1/screenConfig.dropDownColumnCount*100+\'%\'}"  >\n                    <i class="{{si.checked?\'grace-icon-check\':\'grace-icon-unchecked\'}}" ></i><label>{{si.label}}</label>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n')}]),angular.module("template/grid/gridSearchAll.html",[]).run(["$templateCache",function(a){a.put("template/grid/gridSearchAll.html","")}]),angular.module("template/input/input.html",[]).run(["$templateCache",function(a){a.put("template/input/input.html",'<div class="grace-input clearfix">\n    <label ng-style="config.label.style" ng-show="config.label.text">\n        <span ng-if="config.input.allowBlank == false" class="not-blank">*</span>\n        {{config.label.text}}\n    </label>\n    <div class="input-box {{!!config.label.text ? \'\' : \'all\'}}" ng-style="config.input.style">\n        <input  dynamic-name="config.input.name"\n              \n               class="form-control"\n               placeholder="{{config.input.placeholder}}"\n               ng-model="result.value"\n               maxlength="{{config.input.maxLength || maxLength}}"\n               ng-class="{\'hasUnit\': config.input.unit}"\n               ng-disabled="config.input.disabled"\n               type="{{config.input.type != \'number\' ? config.input.type : \'\'}}" \n\n               tooltip="{{validResult.text}}" tooltip-trigger="blur" tooltip-placement="bottom"\n                input-validate >\n        <span ng-if="config.input.unit" class="unit">{{config.input.unit}}</span>\n    </div>\n</div>')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/nav/nav.html",[]).run(["$templateCache",function(a){a.put("template/nav/nav.html",'<div class="grace-nav-new clearfix"> \n  <a ng-class="vm.logo"></a>\n  <ul class="grace-nav-list">\n    <li class="grace-nav-item-{{($index+1)}}" ng-repeat="navData in navsData track by $index" ng-mouseover="listShow = true" ng-mouseleave="listShow = false"> <a ng-bind="navData.title" ng-href="{{navData.url}}" ng-class="{on:listShow}"></a>\n      <dl ng-if="navData.detail" ng-show="listShow">\n        <dd ng-repeat="nav in navData.detail" class="grace-nav-item-{{($index+1)}}"> <a ng-bind="nav.title" ng-href="{{nav.url}}"></a> </dd>\n      </dl>\n      <i class="grace-nav-icon-role" ng-if="navData.detail" ng-show="listShow"></i> </li>\n  </ul>\n</div>\n\n')}]),angular.module("template/popWindow/alert.html",[]).run(["$templateCache",function(a){a.put("template/popWindow/alert.html",'<!--<div class="modal-header">-->\n    <!--<h3 class="modal-title" ng-bind="title"></h3>-->\n<!--</div>-->\n<div class="modal-body">\n    <label class="{{option.type}}" ng-show="!!option.type"></label>\n    <div class="title">\n    	<p class="title-text" ng-bind="option.title"></p>\n	   	<div class="pop-window-close grace-icon-remove" ng-click="cancel();"></div>\n	</div>\n    <div class="content">\n    	<div class="icon-tips grace-icon-ok-sign" ng-show="showOKIcon" style="color:green;"></div>\n    	<div class="icon-tips grace-icon-remove-sign" ng-show="showErrorIcon" style="color:red;"></div>\n    	<p class="contnet-p" ng-bind="content" ng-class="{\'margin-left-0\': !(showOKIcon||showErrorIcon)}"></p>\n    </div>\n    <div class="pop-window-close grace-icon-remove" ng-click="ok();"></div>\n</div>\n<div class="modal-footer">\n    <button class="grace-btn btn-primary ok-btn" ng-click="ok();">确定</button>\n</div>')}]),angular.module("template/popWindow/confirm.html",[]).run(["$templateCache",function(a){a.put("template/popWindow/confirm.html",'<!--<div class="modal-header">-->\n    <!--<h3 class="modal-title" ng-bind="title"></h3>-->\n<!--</div>-->\n<div class="modal-body">\n    <div class="title">\n        <p class="title-text" ng-bind="option.title"></p>\n        <div class="pop-window-close grace-icon-remove" ng-click="cancel();"></div>\n    </div>\n    <div class="content">\n    	<div class="icon-tips grace-icon-ok-sign" ng-show="showOKIcon" style="color:green;"></div>\n    	<div class="icon-tips grace-icon-remove-sign" ng-show="showErrorIcon" style="color:red;"></div>\n    	<p class="contnet-p" ng-bind="content" ng-class="{\'margin-left-0\': !(showOKIcon||showErrorIcon)}"></p>\n    </div>\n</div>\n<div class="modal-footer">\n    <button class="grace-btn btn-primary ok-btn" ng-click="ok();">确定</button>\n    <button class="grace-btn btn-warning cancel-btn" ng-click="cancel();">取消</button>\n</div>')}]),angular.module("template/radio/radio.html",[]).run(["$templateCache",function(a){a.put("template/radio/radio.html",'<div class="grace-radio-wrapper {{config.extra.extraCSS}}">\n    <label class="" ng-style="config.label.style" ng-show="config.label.text">\n        <span ng-if="!config.input.allowBlank" class="not-blank">*</span>\n        {{config.label.text}}\n        \n    </label>\n    <div class="grace-radio-item-wrapper {{!!config.label.text ? \'\' : \'all\'}}" ng-style="config.input.style" ng-class="{\'disabled bdp-color-gray\': config.input.disabled}">\n        <span ng-repeat="item in config.list" class="grace-radio-item" ng-click="selectItem(item)">\n            <span ng-class="{\'grace-icon-circle-blank\': currentItem.value !== item.value,\'bdp-color-gray\': config.input.disabled,\'grace-icon-circle bdp-color-blue\': currentItem.value === item.value}"></span>\n            <span class="grace-radio-item-text">{{item.text}}</span>\n        </span>\n    </div>\n    <div class="items" style="display: none;" ng-transclude></div>\n    <input type="hidden" dynamic-name="config.input.name" ng-model="currentItem.value" />\n</div>')}]),angular.module("template/search/search.html",[]).run(["$templateCache",function(a){a.put("template/search/search.html",'<div class="grace-search clearfix">\n    <label ng-style="config.label.style" ng-show="config.label.text">\n        <span ng-if="config.input.allowBlank == false" class="not-blank">*</span>\n        {{config.label.text}}\n    </label>\n    <div class="input-box" ng-style="config.input.style" ng-class="{\'all\': !config.label.text, \'disabled\': config.input.disabled}">\n        <input class="form-control bdp-search-input"\n               placeholder="{{config.input.placeholder}}"\n               ng-model="result.value"\n               ng-disabled="config.input.disabled"\n               ng-keydown="enterSearch($event);"\n               type="text"\n                dynamic-name="config.input.name"\n               >\n        <span class="search-box unfucus-bdp-color" ng-click="doSearch();">\n            <span class="search-btn grace-icon-search"></span>\n        </span>\n        <span class="no-input"></span>\n    </div>\n</div>')}]),angular.module("template/select/select.html",[]).run(["$templateCache",function(a){a.put("template/select/select.html",'<div class="grace-select clearfix"  >\n    <label class="control-label" ng-style="config.label.style" ng-show="config.label.text">\n         <span ng-if="config.input.allowBlank == false" class="not-blank">*</span>\n        {{config.label.text}}\n     </label>\n    <div class="dropdown-container {{!!config.label.text ? \'\' : \'all\'}}" dropdown ng-style="config.input.style">\n        <div class="item-select" tabindex="0" hidefocus="true" dropdown-toggle ng-disabled="config.input.disabled" ng-class="{\'disable\': config.input.disabled}"  tooltip="{{validResult.text}}" tooltip-trigger="click" tooltip-placement="right" >\n            <span class="item-name" ng-bind="currentItem.text || config.input.placeholder"></span>\n            <a class="toggle"></a>\n        </div>\n        <ul class="dropdown-menu" ng-show="config.list.length">\n            <li ng-repeat="item in config.list" ng-class="{selected: item.value == currentItem.value}">\n                <a ng-click="selectItem(item);">{{item.text}}</a>\n            </li>\n        </ul>\n    </div>\n    <input  ng-model="currentItem.value" style="display:none;"  dynamic-name="config.input.name" select-valid>\n    <div class="items" style="display: none;" ng-transclude></div>\n</div>')}]),angular.module("template/selectByGroup/selectByGroup.html",[]).run(["$templateCache",function(a){a.put("template/selectByGroup/selectByGroup.html",'<div class="selectByGroup">\n    <a class="selection" ng-class="{isMore:selectionData.length == 0}" ng-click="changeSelectionShow()"> {{baseFirst.name}}<span class="selection-dropdown"></span></a>\n    <div class="selectionList">\n		<div class="selection-title" ng-hide="curCode == \'own\'">\n			<ul class="clearfix">\n				<li ng-class="{on:index == $index}" ng-repeat="t in selectionData.title" ng-click="changTitle($index)" ng-bind="t"></li>\n			</ul>\n			<div class="selection-search">\n				<input type="text" placeholder="请输入要搜索的内容" class="selection-search-searchbox">\n				<span class="selection-search-searchbtn"></span>\n				<div class="selection-searchbox-searchResult" ng-show="!searchResult23Empty" >\n                    <span class="selection-searchbox-resultItem"  ng-repeat="item in searchResult23" ng-click="nodeClick(item)" >{{item.name}}</span>\n                </div>\n			</div>\n		</div>\n		<div class="selection-body clearfix">\n			<a ng-repeat="item in curDataList"><span ng-bind="item.name" ng-class="{on:item.checked}" ng-click="nodeClick(item)"></span></a>\n    	</div>\n    	<i class="selection-arrow"></i>\n    </div>\n</div>')}]),angular.module("template/step/step.html",[]).run(["$templateCache",function(a){a.put("template/step/step.html",'<div class="grace-step-list"> <ul class="clearfix"> \n	<li ng-repeat="item in config" step-repeat-done> \n		 <div  class="bold-line {{item.status}}"></div> \n		 <div class="g-wrapper">\n		 	 <div class="{{item.status}} items" >\n		 	 	<span ng-if="item.status!=\'approval\'">{{item.step}}</span> \n		 	 	<i  ng-if="item.status==\'approval\'" class="grace-icon-ok"></i>\n		 	 </div> \n		 	 <span class="msg">{{item.text}}</span> \n		 	 <p class="message" ng-if="item.message.length>0"> <span ng-repeat="mi in item.message">{{mi}}</span> </p>\n		 </div>\n		<!--  <div grace-step-item status="{{item.status}}" step="{{item.step}}" text="{{item.text}}" message="item.message"></div>  -->\n	</li>\n	<!--  <li> <div grace-step-item status="complete"></div> </li>\n    <li><div class="bold-line"></div><div grace-step-item status="going"></div></li>\n    <li><div class="bold-line"></div><div grace-step-item status="unbegin"></div></li>\n    <li><div class="bold-line"></div><div grace-step-item status="approval"></div></li> --> </ul> \n</div>')}]),angular.module("template/summary/summary-item.html",[]).run(["$templateCache",function(a){a.put("template/summary/summary-item.html",'<li class="grace-summary-item">\n    <div class="arrow-outer">\n        <div class="arrow-inner"></div>\n    </div>\n    <h6 class="summary-title"><label desc="{{sum.desc}}">{{sum.value}}</label></h6>\n    <span>\n        <div id="Odometer{{sum.id}}" class="odometer">{{sum.currentData}}</div>\n        <label class="percent" ng-bind-html="to_trusted(sum.currentType)">{{sum.currentType}}</label>\n    </span>\n\n    <div id="Trend{{sum.id}}" class="clearfix trendDataOutDiv num {{sum.trendCss}}">\n        <b><label ng-class="{abnormal:sum.abnormal}">{{sum.trendRatio}}</label></b>\n\n        <div class="isBrFlag" style="display: none"><br/></div>\n        <em class="trendData">{{sum.trendData}}</em>\n    </div>\n</li>')}]),angular.module("template/summary/summary.html",[]).run(["$templateCache",function(a){a.put("template/summary/summary.html",'<div class="grace-summary" >\n    <ul class="grace-clear summary-list"  >\n        <li class="summary-item"\n            ng-repeat="sum in curSummaryData track by $index"\n            ng-class="{disable:sum.disable,selected:selectedIndex == $index}"\n            ng-click="itemClick($index,$event)" >\n            <div class="arrow-outer" >\n                <div class="arrow-inner"></div>\n            </div>\n            <h6 class="summary-title">\n                <label tooltip="{{sum.desc}}" tooltip-placement="bottom" tooltip-append-to-body="true" >{{sum.title}}</label>\n            </h6>\n\n            <div class="summary-body" >\n                <div class="odometer {{sum.mainValue.class}}" style="{{sum.mainValue.style}}" ></div>\n				<div style="height: 100%;display: inline-block;" class="unit" ng-if="sum.mainValue.isPercent">%</div>\n            </div> \n\n            <div class="summary-foot grace-clear" ng-if="sum.footLeftValue || sum.footRightValue" >\n                <b ng-if="sum.footLeftValue"\n                   class="foot-left {{sum.footLeftValue.class}}"\n                   style="{{sum.footLeftValue.style}}" >{{sum.footLeftValue.value | summaryFilter:sum.footLeftValue.format}}</b>\n                <b ng-if="sum.footRightValue"\n                   class="foot-right {{sum.footRightValue.class}}"\n                   style="{{sum.footRightValue.style}}" >{{sum.footRightValue.value | summaryFilter:sum.footRightValue.format}}</b>\n            </div>\n        </li>\n        <li class="summary-item"\n            ng-show="overFlowData"\n            ng-class="{selected:selectedIndex == maxItemCount-1}"\n            ng-click="overFlowItemClick($event)" >\n            <div class="arrow-outer" >\n                <div class="arrow-inner"></div>\n            </div>\n            <h6 class="summary-title" >\n                <select ng-click="onSelectClick($event)"\n                        ng-change="overFlowItemChanged($event)"\n                        ng-model="selectedOverFlow"\n                        ng-options="item.title for item in overFlowData"></select>\n            </h6>\n\n            <div class="summary-body" ng-show="selectedOverFlow.mainValue" >\n                <!--<div style="display: none" class="odometer-value" >{{sum.value}}</div>-->\n                <div class="odometer" ></div>\n				<div style="height: 100%;display: inline-block;" class="unit" ng-if="selectedOverFlow.mainValue.isPercent">%</div>\n            </div>\n\n            <div class="summary-foot grace-clear" ng-if="selectedOverFlow.footLeftValue || selectedOverFlow.footRightValue" >\n                <b ng-if="selectedOverFlow.footLeftValue"\n                   class="foot-left {{selectedOverFlow.footLeftValue.class}}"\n                   style="{{selectedOverFlow.footLeftValue.style}}" >{{selectedOverFlow.footLeftValue.value | summaryFilter:selectedOverFlow.footLeftValue.format}}</b>\n                <b ng-if="selectedOverFlow.footRightValue"\n                   class="foot-right {{sum.footRightValue.class}}"\n                   style="{{selectedOverFlow.footRightValue.style}}" >{{selectedOverFlow.footRightValue.value | summaryFilter:selectedOverFlow.footRightValue.format}}</b>\n            </div>\n\n        </li>\n    </ul>\n</div>')}]),angular.module("template/summaryList/summaryList.html",[]).run(["$templateCache",function(a){a.put("template/summaryList/summaryList.html",'<div  class="grace-summaryList clearfix">\n\n        <h3><i class="{{summaryListData.titleClass}}"></i>{{summaryListData.title}}</h3>\n      \n     <div class="summary-item" ng-repeat="item in summaryListData.data track by $index" ng-style="{\'height\':rowheight+\'px\'}">\n             <div class="summary-inner" ng-if="item&&item.name"  >\n                <label class="icon-help"  tooltip="{{item.desc}}" tooltip-placement="bottom"></label>\n                <span ng-bind="item.name"></span>\n                <strong ng-bind="item.value"></strong>\n             </div>\n             \n             <div class="summary-inner" ng-if="item&&item.length>1" ng-repeat="ii in item track by $index"  style="margin-top:11px">\n                <label class="icon-help"  tooltip="{{ii.desc}}" tooltip-placement="bottom"></label>\n                <span ng-bind="ii.name"></span>\n                <strong ng-bind="ii.value"></strong>\n             </div>\n             <div class="summary-inner" ng-if="!(item&&item.name)"></div>\n      </div>\n    \n    </div>\n')}]),angular.module("template/table/table.html",[]).run(["$templateCache",function(a){a.put("template/table/table.html",'<table class="grace-table" >\n    <thead>\n        <th class="grace-table-th" ng-repeat="th in tableData.head" ng-if="th.hide !== true" ng-switch on="th.type" >\n\n             <!--<span ng-if="!th.isSearch">{{th.name}}</span>\n             <div ng-if="th.isSearch" id="{{\'th_\'+(th.code?th.code:\'\')}}">\n                 <div class="search-wrapper">\n                     <input type="text" placeholder="{{th.placeholder}}" >\n                     <i ng-click="searchData($event, th)"></i>\n                 </div>\n             </div>-->\n            <div ng-switch-when="search" id="{{\'th_\'+(th.code?th.code:\'\')}}" >\n                <div class="search-wrapper">\n                    <input type="text" placeholder="{{th.placeholder}}" value="{{th.text}}"  ng-keypress="searchData($event, th)">\n                    <i ng-click="searchData($event, th)"></i>\n                </div>\n            </div>\n            <div ng-switch-when="filter" class="grace-btn-group dropdown-box" dropdown dropdown-toggle>\n                <!--<select ng-model="th.selected" ng-options="f.name for f in th.filter" ng-change="onFilterDispatch($index,th.selected)" ></select>-->\n                <button type="button" class="grace-btn">{{th.selected.name}}</button>\n                <button type="button" class="grace-btn dropdown-toggle">\n                    &nabla;\n                </button>\n                <ul class="dropdown-menu" role="menu">\n                    <li ng-repeat="f in th.filter" ng-click="onFilterDispatch(th,$index)" ><a>{{f.name}}</a></li>\n                </ul>\n            </div>\n            <span ng-switch-default >{{th.name}}</span>\n        </th>\n        <!--<th class="grace-table-th" ng-if="enableFn" >{{fnThText}}</th>-->\n    </thead>\n\n    <tbody>\n    <tr class="grace-table-tr" ng-repeat="item in tableData.body" >\n        <td class="grace-table-td"\n            ng-repeat="it in item track by $index"\n            var="{{itIndex = $index;colFilterable = tableData.head[itIndex].formatter;colCode = tableData.head[itIndex].code}}"\n            ng-if="tableData.head[$index].hide !== true" >\n            <tsc ng-if="!isArray(it) && !isObject(it)" >\n                <a ng-bind-html="it|tableFilter:colCode" class="grace-table-value" title="{{tableData.head[itIndex].tipBubble ? tipBubbleFormatter(it) : \'\'}}" ></a>\n                <i ng-if="tableData.head[$index].editable" ng-click="editCell(table.head,item,$index,$event)" class="grace-table-btn-edit" >&#9998;</i>\n            </tsc>\n            <tsc ng-if="isArray(it)"  ng-repeat="t in it track by $index" ng-class="{\'grace-table-cell-fn\':t.fn}" >\n                <span ng-if="!isObject(t)" ng-bind-html="t|tableFilter:colCode" title="{{tableData.head[itIndex].tipBubble ? tipBubbleFormatter(t) : \'\'}}" ></span>\n                <span ng-if="isObject(t)" >\n                    <i ng-if="t.iconClass" class="{{t.iconClass}}" ></i>\n                    <a ng-click="t.fn(tableData.head,item,$event)" ng-bind-html="t.text|tableFilter:colCode" title="{{tableData.head[itIndex].tipBubble ? tipBubbleFormatter(t.text) : \'\'}}" ></a>\n                </span>\n            </tsc>\n            <tsc ng-if="isObject(it)"  ng-click="it.fn(tableData.head,item,$index,$event)">\n                <i ng-if="it.iconClass" class="{{it.iconClass}}" ></i>\n                <a ng-bind-html="it.text" title="{{tableData.head[itIndex].tipBubble ? tipBubbleFormatter(it.text) : \'\'}}" ></a>\n            </tsc>\n        </td>\n        <td class="grace-table-td" ng-if="enableFn && item.$$fn" >\n            <span class="grace-table-btn" ng-repeat="fn in item.$$fn track by $index" >\n                <i ng-if="fn.iconClass" class="{{fn.iconClass}}" ></i>\n                <a ng-click="fn.fn(tableData.head,item)" ng-bind-html="fn.text" ></a>\n            </span>\n        </td>\n    </tr>\n    </tbody>\n\n</table>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n    <a ng-click="select()" tab-heading-transclude ng-class="{\'height-43\': active}">{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n    <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n    <div class="tab-content">\n        <div class="tab-pane"\n             ng-repeat="tab in tabs"\n             ng-class="{active: tab.active}"\n             tab-content-transclude="tab">\n        </div>\n    </div>\n</div>\n')}]),angular.module("template/textarea/textarea.html",[]).run(["$templateCache",function(a){a.put("template/textarea/textarea.html",'<div class="grace-textarea clearfix">\n    <label class="area-label" ng-style="config.label.style" ng-show="config.label.text">\n        <span ng-if="config.input.allowBlank == false" class="not-blank">*</span>\n        {{config.label.text}}\n    </label>\n    <div class="area-box" >\n      <textarea class="area-content {{!!config.label.text ? \'\' : \'all\'}}"\n            ng-model="result.value"  ng-style="config.input.style"\n                dynamic-name="config.input.name"\n            placeholder="{{config.input.placeholder}}"\n            ng-maxlength="{{config.input.maxLength || maxLength}}"\n            ng-disabled="config.input.disabled"\n            tooltip="{{validResult.text}}" tooltip-trigger="blur" tooltip-placement="bottom" >\n      </textarea>\n    </div>\n\n</div>\n\n')}]);